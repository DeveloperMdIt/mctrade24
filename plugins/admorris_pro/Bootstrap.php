<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 declare (strict_types=1); namespace Plugin\admorris_pro; use JTL\Backend\DirManager; use JTL\Shop; use Plugin\admorris_pro\update\RewardPointsExpertSettingsUpdater; use scc\Renderer; use JTL\Events\Event; use JTL\Plugin\State; use JTL\Plugin\Helper; use JTL\Events\Dispatcher; use JTL\Plugin\Bootstrapper; use JTL\Minify\MinifyService; use JTL\Update\DBMigrationHelper; use Plugin\admorris_pro\PluginSettings; use Plugin\admorris_pro\ioHandling\CronJobIO; use Plugin\admorris_pro\cron\RecentSalesDeleteJob; use Plugin\admorris_pro\update\RewardPointsUpdater; use Plugin\admorris_pro\update\EnhancedEcommerceUpdater; use Plugin\admorris_pro\frontend\controller\RewardPointsController; use Plugin\admorris_pro\frontend\controller\ThreeSixtyImageController; use Plugin\admorris_pro\frontend\controller\EnhancedEcommerceTrackingController; use Plugin\admorris_pro\ioHandling\AdminIoRequests; use Plugin\admorris_pro\mailchimp\cron\MailchimpCronJobHandler; use Plugin\admorris_pro\Utils\Icon; use Plugin\admorris_pro\Utils\Image; use Plugin\admorris_pro\Utils\Utils; use Plugin\admorris_pro\NotificationBell; use Plugin\admorris_pro\search\cron\SearchCronJobHandler; use Plugin\admorris_pro\search\SearchApi; if (file_exists(__DIR__ . "\57\142\165\151\x6c\x64\57\166\x65\x6e\x64\157\x72\57\163\143\157\x70\x65\x72\55\x61\165\164\x6f\154\x6f\141\144\56\x70\x68\x70")) { goto VOYfR; } echo __DIR__ . "\57\x62\x75\x69\x6c\x64\x2f\166\145\x6e\x64\157\162\57\163\143\157\x70\145\x72\x2d\x61\165\x74\157\x6c\157\x61\x64\56\160\x68\x70\x20\x6e\x6f\x74\x20\146\157\165\x6e\x64\56"; throw new \Error("\x41\144\x6d\x6f\162\162\x69\163\40\x70\x72\157\x20\x65\162\x72\x6f\x72\72\x20" . __DIR__ . "\57\142\165\151\x6c\x64\57\166\x65\x6e\x64\157\162\57\x73\143\x6f\x70\x65\x72\x2d\x61\165\x74\157\154\x6f\x61\x64\56\x70\150\160\x20\156\157\164\40\146\x6f\165\x6e\x64\56\x20\120\x6c\x65\141\x73\x65\x20\x72\x75\156\40\160\x68\x70\55\163\x63\x6f\160\145\162\x20\146\x69\x72\163\164\x2e", 0); VOYfR: try { require_once __DIR__ . "\x2f\x62\165\151\154\x64\57\x76\145\156\x64\x6f\x72\57\163\x63\x6f\x70\145\162\x2d\x61\x75\x74\x6f\x6c\157\x61\x64\x2e\160\x68\160"; } catch (\Error $e) { Shop::Container()->getLogService()->error("\x41\x64\x6d\157\x72\x72\151\x73\x20\160\162\x6f\40\105\x72\162\157\162\72\x20\101\x6e\40\145\x72\x72\x6f\162\x20\157\x63\x63\x75\x72\162\145\x64\x20\x77\150\151\x6c\x65\40\x6c\x6f\x61\x64\x69\x6e\147\x20\164\x68\145\40\141\x64\155\x6f\x72\162\151\x73\x20\x70\x72\157\x20\141\x75\x74\157\x6c\x6f\x61\x64\40\146\151\x6c\145\x3a\40" . (string) $e); throw new \Error("\x41\x6e\x20\x65\162\162\x6f\162\40\x6f\143\x63\x75\162\x72\145\x64\x20\x77\150\151\154\x65\x20\154\157\141\x64\x69\156\147\40\164\150\x65\x20\141\144\155\x6f\162\x72\x69\x73\x20\160\162\x6f\x20\141\x75\164\157\x6c\157\141\144\40\x66\x69\x6c\x65", 0, $e); } try { require_once __DIR__ . "\57\150\145\x6c\160\x65\162\x5f\146\x75\156\x63\164\151\157\x6e\x73\56\x70\150\x70"; require_once __DIR__ . "\57\144\145\160\162\145\x63\141\164\x65\x64\x5f\x67\154\157\142\141\x6c\137\146\x75\156\143\164\151\157\x6e\x73\56\x70\x68\x70"; require_once __DIR__ . "\x2f\150\145\x6c\x70\x65\x72\x73\x2e\x70\150\x70"; } catch (\Throwable $th) { Shop::Container()->getLogService()->error((string) $th); } class Bootstrap extends Bootstrapper { use LoggerTrait; private $renderer; private $pluginSettings; private $templateSettings; private EloquentManagerCapsule $capsule; private Icon $iconHelper; public function boot(Dispatcher $dispatcher) { goto YF3lE; xutI_: $dispatcher->listen("\163\x68\x6f\160\56\x68\157\157\x6b\56" . \HOOK_IO_HANDLE_REQUEST, function (array $args) use($plugin) { $oPlugin = $plugin; require_once $plugin->getPaths()->getFrontendPath() . "\151\x6f\137\x68\x61\x6e\x64\x6c\145\137\162\x65\161\x75\145\x73\x74\x2e\x70\150\160"; if (!($oPlugin->getConfig()->getValue("\x61\x64\x6d\157\x72\162\151\163\137\x70\x72\x6f\137\155\141\162\x6b\145\164\151\156\147\x5f\x73\x68\x69\160\x70\151\156\147\137\x63\157\163\164\137\x70\x72\x6f\147\x72\145\x73\x73\x5f\142\x61\162\137\x61\143\x74\151\x76\x65") === "\x59")) { goto z7UNQ; } if (!str_contains($_REQUEST["\151\157"], "\x67\145\164\x42\x61\x73\153\x65\x74\111\164\145\155\163")) { goto KHCAp; } $smarty = Shop::Smarty(); $shippingBar = new ShippingCostProgressBar($oPlugin); $shippingBarArr = $shippingBar->getOutputArray(); $smarty->assign("\141\x64\155\x6f\x72\x72\x69\163\x5f\160\162\157\x5f\x6d\x61\162\153\145\164\151\x6e\x67\137\163\x68\151\160\x70\151\x6e\147\137\x63\x6f\163\164\137\x70\162\x6f\147\x72\145\163\x73\x5f\x62\141\162\x5f\x61\162\x72\141\x79", $shippingBarArr); KHCAp: z7UNQ: }); ExtraProduct::initHooks($plugin, $dispatcher); if (!isTemplateActive()) { goto kRb8x; } $dispatcher->listen("\163\x68\x6f\x70\56\x4f\x50\103\x2e\120\157\x72\164\154\x65\x74\x49\156\x73\164\x61\x6e\143\x65\x2e\x67\x65\164\x46\151\156\141\154\x48\x74\155\x6c", function ($params) { $nonPortletSlider = Shop::Smarty()->getTemplateVars("\x6f\x53\x6c\x69\x64\x65\x72"); $nonPortletSliderActive = !empty($nonPortletSlider) && count($nonPortletSlider->getSlides()) > 0; if (!(is_a($params["\x70\157\x72\x74\154\145\164\x49\156\x73\164\141\x6e\x63\x65"]->getPortlet(), "\112\124\x4c\134\117\x50\103\134\x50\157\x72\164\154\145\164\163\x5c\111\x6d\141\147\145\x53\154\151\144\x65\x72\134\x49\x6d\141\147\145\x53\154\x69\x64\x65\x72") && !$nonPortletSliderActive)) { goto HNK1F; } $assetLoader = AssetLoader::getInstance(); $assetLoader->addToHead([$this->getPlugin()->getPaths()->getFrontendURL() . "\166\x65\156\x64\x6f\162\57\x6e\x69\166\157\55\163\x6c\151\144\x65\162\57\152\161\x75\145\162\x79\56\156\151\x76\157\x2e\x73\x6c\151\x64\x65\162\x2e\x70\x61\x63\153\x2e\152\163", $this->getPlugin()->getPaths()->getFrontendURL() . "\x76\145\156\x64\x6f\x72\x2f\156\151\166\157\55\163\x6c\x69\x64\x65\162\57\x6e\x69\166\157\x2d\163\x6c\151\144\145\x72\x2d\155\151\x6e\56\143\x73\x73"], "\152\164\x6c\55\163\154\x69\x64\145\x72"); HNK1F: }); $dispatcher->listen("\163\x68\x6f\160\x2e\x68\157\157\153\x2e" . \HOOK_PRODUCTFILTER_REGISTER_SEARCH_OPTION, function (array $args) { $factory = $args["\146\141\143\164\x6f\162\171"]; $factory->registerSortingOption(99, SortRandom::class); }); kRb8x: goto DqdXN; gDaL4: if (!(Shop::isFrontend() === false)) { goto rvweO; } return; rvweO: $dispatcher->listen("\163\150\157\160\x2e\150\x6f\x6f\x6b\56" . \HOOK_SMARTY_INC, function (array $args) { $jtlSearchPlugin = Helper::getPluginById("\152\164\154\137\163\x65\x61\x72\x63\x68"); if (!($jtlSearchPlugin && $jtlSearchPlugin->getState() === State::ACTIVATED)) { goto NceCQ; } Shop::Smarty()->assign("\152\164\154\137\x73\x65\x61\x72\143\x68\137\146\162\157\156\164\x65\x6e\x64\x55\x52\x4c", $jtlSearchPlugin->getPaths()->getFrontendURL()); Shop::Smarty()->assign("\x6a\164\x6c\137\163\x65\x61\x72\143\150\137\x61\154\151\147\x6e", $jtlSearchPlugin->getConfig()->getValue("\x6a\x74\154\163\145\x61\162\143\150\x5f\163\165\147\x67\145\163\x74\137\x61\x6c\151\147\156")); NceCQ: Shop::Smarty()->addTemplateDir($this->getPlugin()->getPaths()->getFrontendPath() . "\164\145\x6d\160\154\141\x74\145\x73\x2f", "\x61\144\x6d\x50\x72\x6f"); Shop::Smarty()->assign("\x61\x64\155\x49\155\x61\147\145", Image::class)->assign("\141\x64\x6d\x48\x65\154\x70\145\x72\x73", Image::class)->assign("\x61\x64\x6d\x55\164\151\x6c\163", Utils::class); if (!Shop::isFrontend()) { goto NkDSN; } $this->registerImageComponent(); try { $this->setPluginSettings(); $this->iconHelper = new Icon($this->getPlugin()); Shop::Smarty()->assign("\x61\144\x6d\111\143\x6f\x6e", $this->iconHelper); Shop::set("\141\x64\x6d\111\x63\157\156", $this->iconHelper); if (isTemplateActive()) { goto bVhp_; } Shop::Smarty()->assign("\x61\144\x6d\x50\x72\x6f", new \Template\admorris_pro\TemplateUtils()); goto wOnFl; bVhp_: $this->setTemplateSmartyVariables(); wOnFl: } catch (\Throwable $th) { $this->log->error($th); } NkDSN: }); if (!(Shop::getSettings([\CONF_GLOBAL])["\x67\154\157\x62\x61\x6c"]["\167\141\x72\x74\x75\156\147\x73\155\x6f\x64\165\x73\137\141\x6b\x74\x69\x76\151\x65\x72\164"] === "\131" && !Shop::isAdmin())) { goto KSrau; } return; KSrau: $this->initializeControllers([RewardPointsController::class, EnhancedEcommerceTrackingController::class, ThreeSixtyImageController::class, EuEnergyLabels::class], $dispatcher); $dispatcher->listen(Event::MAP_CRONJOB_TYPE, static function (array &$args) { $args = CronJobIO::mapCron($args, cron\RecentSalesDeleteJob::RECENT_SALES_DELETE_CRON_JOB, cron\RecentSalesDeleteJob::class); }); $dispatcher->listen("\163\150\157\x70\x2e\150\x6f\157\153\x2e" . \HOOK_SMARTY_OUTPUTFILTER, function () use($plugin) { try { $this->setPluginSettings(); $this->registerImageComponent(); $status = new Status($plugin, $this->templateSettings, Shop::Smarty()); $status->init(); if (!isTemplateActive()) { goto oVlKW; } $this->iconHelper->replaceFontAwesomeIcons(); oVlKW: } catch (\Throwable $th) { $this->log->error($th); } }, 8); goto xutI_; YF3lE: parent::boot($dispatcher); Shop::set("\141\144\155\x50\162\x6f\137\114\x6f\x67\x67\145\162", $this->getPlugin()->getLogger()); $this->initLogger(); $plugin = $this->getPlugin(); $this->connectEloquent(); Shop::set("\157\160\x6c\x75\x67\151\156\x5f\x61\x64\155\157\162\x72\151\x73\137\x70\x72\x6f", $plugin); $this->loadPluginSettings(); try { if (!(Shop::isAdmin() && isset($_GET["\151\156\163\164\141\154\x6c\x65\x64"]) && $_GET["\151\156\163\164\141\x6c\154\x65\x64"] === "\164\x72\165\x65")) { goto QV1T0; } $this->installed(); QV1T0: try { $templateSettings = new TemplateSettings($this->getPlugin(), $this->getDB(), $this->getCache()); $templateSettings = $templateSettings->load(); $this->templateSettings = $templateSettings; Shop::set("\x61\x64\155\x6f\x72\162\151\163\x2d\x63\x75\163\164\x6f\155\55\164\x65\155\x70\x6c\141\164\145\x2d\163\x65\x74\x74\151\x6e\147\x73", $templateSettings->templateCustom); } catch (\Exception $th) { $this->log->error($th); } $this->registerStatusRequest(); $this->newVersionNotification(); } catch (\Throwable $th) { $this->log->error($th); return; } $dispatcher->listen("\163\150\x6f\160\56\x68\157\x6f\153\56" . \HOOK_IO_HANDLE_REQUEST_ADMIN, function (array $args) use($plugin) { try { $adminRequestHandler = new AdminIoRequests($plugin); $adminRequestHandler->register($args); } catch (\Throwable $th) { $this->log->error($th); } }); $this->initializeControllers([SearchCronJobHandler::class, MailchimpCronJobHandler::class, SearchApi::class], $dispatcher); goto gDaL4; DqdXN: } private function registerImageComponent() { if (isTemplateActive()) { goto Jseai; } try { if (!isset(Shop::Smarty()->registered_plugins["\146\x75\x6e\143\164\151\x6f\x6e"]["\x72\145\x73\160\157\x6e\163\x69\166\x65\x49\155\141\147\145"])) { goto qm71z; } return; qm71z: require_once PFAD_ROOT . "\x74\145\x6d\x70\154\141\164\x65\163\57\x61\144\155\157\162\162\151\x73\137\160\162\x6f\57\x63\157\x6d\160\157\x6e\x65\156\164\163\x2f\x49\155\141\x67\x65\x2f\111\155\x61\x67\x65\x2e\x70\x68\160"; $this->renderer = new Renderer(Shop::Smarty()); $this->renderer->registerComponent(new \Template\admorris_pro\components\Image\Image()); } catch (\Throwable $th) { $this->log->error($th); } Jseai: } private function setPluginSettings() { $smarty = Shop::Smarty(); $plugin = $this->getPlugin(); if (empty($smarty->getTemplateVars("\141\x64\x6d\x6f\162\162\151\x73\120\x72\157\123\145\x74\164\151\156\x67\x73"))) { goto OzkN1; } return; OzkN1: $admorrisProSettings = $this->pluginSettings; $smarty->assign("\141\144\155\157\x72\162\x69\163\x50\x72\157\x53\x65\164\x74\x69\x6e\x67\163", $admorrisProSettings); if (!($plugin->getConfig()->getValue("\141\x64\155\157\x72\162\x69\x73\137\x70\162\x6f\x5f\x6d\141\162\x6b\145\164\151\x6e\147\x5f\144\x69\x73\143\x6f\x75\156\164\137\x64\151\163\160\x6c\141\x79\x5f\141\143\164\151\166\x65") === "\x59" && isTemplateActive())) { goto jSOGB; } $discountDisplay = new DiscountDisplay($plugin); $smarty->assign("\x61\x6d\x5f\x64\151\x73\143\x6f\165\x6e\164\104\x69\x73\160\154\x61\x79", $discountDisplay); jSOGB: } private function setTemplateSmartyVariables() { $plugin = $this->getPlugin(); $smarty = Shop::Smarty(); $smarty->assign("\141\x64\155\x6f\162\x72\x69\x73\137\160\162\157\x5f\x74\145\155\160\154\x61\164\145\123\x65\x74\x74\x69\x6e\x67\163", $this->templateSettings->templateCustom); $smarty->assign("\x61\x64\155\102\154\157\147\x53\x65\164\164\151\156\147\x73", new BlogSettings()); $smarty->assign("\141\x64\x6d\x6f\162\x72\x69\x73\x5f\x70\162\157\137\164\150\145\155\x65\126\141\x72\163", (object) $this->templateSettings->themeVars); } public function installed() { parent::installed(); try { $this->connectEloquent(); $this->setDefaultValues(); $this->loadPluginSettings(); $this->registerStatusRequest(); $status = new StatusRequest($this->getPlugin(), $this->pluginSettings); $status->requestLicense(); } catch (\Throwable $th) { $this->getPlugin()->getLogger()->error("\x45\x72\162\157\162\40\x69\x6e\40\x42\157\157\164\163\164\x72\141\x70\x3a\72\x69\x6e\163\x74\x61\154\154\x65\144\x3a\40" . $th); } } public function updated($oldVersion, $newVersion) { parent::updated($oldVersion, $newVersion); $this->connectEloquent(); $db = $this->getDB(); $this->flushTemplateCache(); $this->getCache()->flushTags($this->getPlugin()->getCache()->getGroup()); RecentSalesDeleteJob::handleCron($this->pluginSettings); $this->setDefaultValues(); if (!(version_compare($oldVersion, "\62\56\x35\56\x30\x2d\142\145\x74\x61", "\x3c") && version_compare($newVersion, "\62\56\x35\x2e\60\x2d\142\x65\164\141", "\x3e\75"))) { goto f3anW; } $this->moveSettingsAfterUpdate("\62\x2e\65\56\60"); f3anW: } private function installDefaultThemeSettings() : void { $themeSettings = file_get_contents($this->getPlugin()->getPaths()->getBasePath() . "\x2f\144\145\146\x61\165\154\x74\124\150\x65\x6d\x65\123\145\x74\164\x69\156\147\163\56\152\163\x6f\x6e"); $themeVars = Shop::Container()->getDB()->selectAll("\x78\160\154\x75\x67\x69\156\137\x61\144\155\x6f\x72\162\x69\x73\x5f\160\162\157\137\164\150\x65\x6d\145", [], []); if (empty($themeVars)) { goto wNHlq; } return; wNHlq: Shop::Container()->getDB()->insert("\x78\x70\x6c\165\x67\151\156\137\x61\x64\x6d\x6f\162\x72\x69\163\137\x70\x72\157\x5f\164\150\x65\x6d\x65", (object) ["\156\141\155\145" => "\143\165\163\164\x6f\155", "\144\141\x74\141" => $themeSettings]); } private function setDefaultValues() : void { new InsertCustomLangvars(); new InitialDataGenerator(); } public function renderAdminMenuTab(string $tabName, int $menuID, \JTL\Smarty\JTLSmarty $smarty) : string { $oPlugin = $this->getPlugin(); $this->loadPluginSettings(); $statusRequest = new StatusRequest($oPlugin, $this->pluginSettings); return (new Backend($oPlugin, $statusRequest, $smarty))->execute(); } private function flushTemplateCache() : void { $notice = ''; $error = ''; $callback = static function (array $params) { if (!\str_starts_with($params["\x66\151\x6c\x65\156\141\x6d\145"], "\56")) { goto LRZ41; } return; LRZ41: if (!$params["\151\163\x64\x69\162"]) { goto v5kUs; } if (!@\rmdir($params["\160\x61\x74\x68"] . $params["\146\x69\154\145\156\x61\x6d\145"])) { goto iMdZl; } goto rUsoN; v5kUs: if (@\unlink($params["\x70\141\164\x68"] . $params["\146\151\x6c\145\156\x61\155\145"])) { goto AqEH3; } $params["\x65\162\162\x6f\162"] .= \sprintf(\__("\145\x72\x72\157\162\x46\x69\x6c\145\x44\x65\154\x65\164\145"), "\74\x73\x74\x72\x6f\156\147\x3e" . $params["\160\x61\x74\x68"] . $params["\146\151\154\x65\x6e\x61\x6d\x65"] . "\74\57\163\x74\162\157\156\x67\x3e") . "\x3c\142\x72\57\76"; goto a0gpT; AqEH3: $params["\x63\x6f\x75\156\x74"]++; a0gpT: goto rUsoN; iMdZl: $params["\x65\x72\x72\x6f\162"] .= \sprintf(\__("\x65\162\x72\157\x72\x44\x69\162\x44\145\x6c\145\164\x65"), "\74\x73\x74\162\157\156\147\76" . $params["\x70\141\164\150"] . $params["\146\151\x6c\145\x6e\x61\x6d\145"] . "\x3c\57\163\x74\x72\x6f\x6e\147\x3e") . "\x3c\142\162\x2f\x3e"; rUsoN: }; $deleteCount = 0; $cbParameters = ["\143\157\x75\x6e\164" => &$deleteCount, "\156\157\x74\x69\143\145" => &$notice, "\145\162\x72\x6f\x72" => &$error]; $template = Shop::Container()->getTemplateService()->getActiveTemplate(); $dirMan = new DirManager(); $dirMan->getData(\PFAD_ROOT . \PFAD_COMPILEDIR . $template->getDir(), $callback, $cbParameters); $dirMan->getData(\PFAD_ROOT . \PFAD_ADMIN . \PFAD_COMPILEDIR, $callback, $cbParameters); $ms = new MinifyService(); $ms->flushCache(); $alertService = Shop::Container()->getAlertService(); $alertService->addError($error, "\x65\162\162\x6f\x72\x43\141\143\x68\145"); $alertService->addNotice($notice, "\x6e\x6f\x74\x69\143\x65\x43\x61\x63\x68\145"); $alertService->addSuccess(\sprintf(\__("\163\x75\x63\x63\145\x73\163\124\x65\x6d\160\154\141\x74\145\103\x61\143\x68\145\x44\x65\154\145\164\x65"), \number_format($cbParameters["\x63\157\165\156\x74"])), "\x73\x75\x63\x63\x65\x73\163\124\145\x6d\160\154\x61\x74\x65\x43\x61\x63\150\145\x44\x65\154\145\164\x65"); } public function loadPluginSettings() : void { if (empty($this->pluginSettings)) { goto hu1CY; } return; hu1CY: $this->pluginSettings = (new PluginSettings())->load(); Shop::set("\141\x64\x6d\157\162\162\x69\x73\120\162\x6f\x2d\163\x65\164\x74\151\x6e\x67\x73", $this->pluginSettings); } public function registerStatusRequest() : void { container()->singleton(StatusRequest::class, function () { return new StatusRequest($this->getPlugin(), $this->pluginSettings); }); } public function newVersionNotification() { if (!Shop::isFrontend()) { goto n3Lme; } return; n3Lme: $status = container()->get(StatusRequest::class); $newVersion = $status->getNextVersion(); if (!($newVersion === null)) { goto rEriu; } return; rEriu: $notificationMassage = "\x4e\145\165\145\40\x61\x64\x6d\x6f\162\x72\x69\x73\x20\x70\162\157\40\126\x65\162\163\x69\x6f\x6e\40\166\145\x72\146\xc3\xbc\147\x62\x61\x72\x3a\x20" . $newVersion; $notificationLink = Shop::getAdminURL() . "\x2f\x70\x6c\x75\147\151\x6e\x2f" . $this->getPlugin()->getID() . "\x23\x75\x70\144\141\x74\x65"; $notificationBell = new NotificationBell($this->getPlugin()); $notificationBell->setNotification($notificationMassage, $notificationLink); } private function moveSettingsAfterUpdate($version) : void { switch ($version) { case "\x32\x2e\65\56\60": (new RewardPointsUpdater($this->getDB()))->moveSettings(); $enhancedEcommerceUpdater = new EnhancedEcommerceUpdater($this->getDB()); $enhancedEcommerceUpdater->moveSettings(); $enhancedEcommerceUpdater->renameConsentId(); new RewardPointsExpertSettingsUpdater($this->getDB()); goto GSI12; } KN5cB: GSI12: $this->getPlugin()->getLogger()->debug("\141\x64\155\157\x72\x72\x69\163\x5f\160\x72\157\x20\165\160\144\x61\x74\145\40\164\157\x20" . $version . "\x20\x66\x69\x6e\x69\x73\150\145\x64\40\50\155\157\166\145\x53\145\x74\x74\x69\x6e\147\x73\x41\146\164\145\162\x55\x70\x64\x61\x74\x65\51"); } private function connectEloquent() : void { if (!isset($this->capsule)) { goto EIVhC; } return; EIVhC: $this->capsule = new EloquentManagerCapsule(); $this->capsule->setAsGlobal(); $this->capsule->bootEloquent(); } private function initializeControllers(array $classes, Dispatcher $dispatcher) : void { foreach ($classes as $class) { try { container()->make($class, ["\x70\x6c\x75\147\x69\156" => $this->getPlugin(), "\x64\x69\163\x70\141\x74\x63\x68\145\x72" => $dispatcher]); } catch (\Throwable $th) { $this->log->error("\103\x6f\x6e\164\x72\157\x6c\x6c\145\x72\40\151\x6e\151\x74\x69\x61\154\x69\x7a\x61\x74\151\x6f\156\x20\146\x61\151\154\145\144\72\40" . $th); } MpTJJ: } IzKV7: } }