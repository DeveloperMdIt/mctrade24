<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Helpers\Form; use JTL\Helpers\Request; use JTL\Shop; use JTL\Media\Image as JtlImage; use Intervention\Image\ImageManager; use Intervention\Image\Encoders\WebpEncoder; use Intervention\Image\Interfaces\ImageInterface; use Plugin\admorris_pro\backend\CustomElFinder; function customElFinderAdminIncludes() { $toRequire = $_SERVER["\x44\x4f\x43\x55\x4d\105\116\124\x5f\x52\117\x4f\x54"] . "\x2f\x61\144\x6d\x69\x6e\x2f\x69\x6e\x63\x6c\165\x64\x65\x73\57\x61\x64\155\x69\156\x69\156\143\154\x75\x64\145\x2e\160\x68\160"; $subDir = str_replace("\57\160\154\165\147\x69\x6e\163\57\x61\x64\x6d\157\162\x72\x69\163\137\x70\x72\157\x2f\x61\144\x6d\x69\156\x6d\145\x6e\165\57\143\165\x73\164\157\155\105\154\146\x69\156\x64\x65\162\56\x70\150\160", '', $_SERVER["\120\110\x50\x5f\x53\x45\114\106"]); if (empty($subDir)) { goto HWs7_; } return $_SERVER["\104\117\x43\x55\x4d\x45\116\124\x5f\122\117\x4f\x54"] . $subDir . "\x2f\141\x64\x6d\x69\x6e\57\x69\x6e\x63\154\x75\x64\145\x73\57\x61\144\x6d\151\x6e\x69\x6e\x63\154\x75\144\145\x2e\x70\150\x70"; goto eFs3H; HWs7_: return $toRequire; eFs3H: } $toRequire = customElFinderAdminIncludes(); require_once $toRequire; $oAccount->permission("\111\x4d\x41\107\x45\x5f\125\x50\x4c\117\101\x44", true, true); require_once PFAD_ROOT . PFAD_ADMIN . PFAD_INCLUDES . "\145\x6c\x66\x69\156\x64\x65\162\137\x69\x6e\143\56\x70\x68\160"; require PFAD_ROOT . PFAD_INCLUDES . "\166\x65\x6e\144\157\162\x2f\141\165\x74\x6f\154\x6f\x61\x64\56\x70\150\160"; require PFAD_ROOT . "\160\154\x75\147\151\156\163\57\x61\144\x6d\157\162\x72\x69\163\x5f\x70\162\157\x2f\143\x6c\141\x73\x73\x65\x73\x2f\x62\x61\143\153\x65\156\144\x2f\103\165\x73\164\x6f\x6d\x45\154\106\151\x6e\x64\x65\x72\56\160\150\x70"; $driver = JtlImage::getImageDriver(); $imageManager = new ImageManager($driver); class ImageSize { public function __construct(protected $width, protected $height) { } public function getWidth() { return $this->width; } public function getHeight() { return $this->height; } } if (Form::validateToken()) { goto jbhDe; } return; jbhDe: $customElFinder = new CustomElFinder(); $mediafilesSubdir = STORAGE_OPC; $mediafilesType = Request::verifyGPDataString("\x6d\145\144\x69\x61\x66\x69\x6c\x65\163\124\x79\x70\145"); $elfinderCommand = Request::verifyGPDataString("\143\155\144"); $isCKEditor = Request::verifyGPDataString("\143\153\145\x64\151\x74\x6f\162") === "\61"; $CKEditorFuncNum = Request::verifyGPDataString("\x43\113\x45\x64\151\x74\x6f\x72\x46\165\x6e\x63\x4e\165\x6d"); if (!($mediafilesType === "\166\151\x64\145\157")) { goto XPYE9; } $mediafilesSubdir = PFAD_MEDIA_VIDEO; XPYE9: if (!empty($elfinderCommand)) { goto Ou1TU; } Shop::Smarty()->assign("\x6d\x65\x64\151\x61\x66\151\x6c\x65\163\x54\171\x70\145", $mediafilesType)->assign("\155\x65\144\x69\141\x66\151\154\x65\x73\123\x75\x62\144\x69\x72", $mediafilesSubdir)->assign("\151\x73\103\113\105\144\151\164\157\162", $isCKEditor)->assign("\x43\x4b\105\144\x69\164\x6f\x72\106\165\x6e\x63\116\x75\x6d", $CKEditorFuncNum)->assign("\164\x65\x6d\x70\x6c\141\x74\145\125\x72\154", Shop::getAdminURL(true) . "\57" . Shop::Smarty()->getTemplateUrlPath())->assign("\x63\165\x73\164\x6f\155\x45\x6c\x66\x69\x6e\144\x65\x72\120\x61\x74\150", Shop::getURL() . "\x2f\160\154\x75\x67\x69\156\x73\x2f\x61\144\155\157\x72\162\151\163\137\160\162\x6f\57\141\144\x6d\x69\x6e\155\x65\156\x75\x2f\143\x75\x73\x74\x6f\155\105\x6c\x66\x69\156\x64\x65\x72\56\160\x68\x70"); Shop::Smarty()->display(__DIR__ . "\57\164\x65\x6d\160\154\x61\x74\145\x73\57\143\165\x73\x74\x6f\x6d\105\x6c\146\x69\x6e\x64\x65\162\x2e\x74\x70\x6c"); goto wENwl; Ou1TU: $connector = new \elFinderConnector(new \elFinder(["\144\145\142\165\x67" => false, "\x62\151\x6e\x64" => ["\x72\x6d" => $customElFinder->removeSrcSet(...), "\x72\x65\156\x61\155\145" => $customElFinder->renameSrcSet(...), "\x70\141\x73\x74\145" => $customElFinder->moveSrcSet(...), "\144\165\x70\x6c\151\143\x61\164\145" => $customElFinder->duplicateSrcSet(...), "\x75\x70\x6c\157\141\144" => $customElFinder->createSrcSets(...), "\165\160\x6c\x6f\141\x64\x2e\x70\x72\x65\x73\141\166\145" => [static function (&$path, &$name, $tmpname, $_this, $volume) { $name = mb_strtolower($name); }, "\120\x6c\x75\147\x69\156\x2e\x41\165\x74\157\x52\x65\x73\151\x7a\x65\x2e\x6f\x6e\125\160\114\157\x61\144\x50\x72\x65\123\141\166\x65", $customElFinder->createSrcSetsFolder()], "\x75\160\x6c\x6f\141\x64\x2e\160\162\145\x20\155\x6b\x64\x69\162\56\x70\x72\x65\x20\x6d\x6b\x66\x69\154\145\56\x70\x72\x65\x20\162\x65\x6e\x61\x6d\145\56\x70\162\145\40\141\162\x63\x68\x69\166\x65\x2e\160\162\x65\40\x6c\163\56\160\162\x65" => ["\x50\154\x75\147\151\156\56\116\157\x72\x6d\x61\154\x69\172\145\x72\x2e\x63\155\144\x50\162\x65\160\162\x6f\143\145\x73\x73", "\120\x6c\165\x67\151\x6e\x2e\x53\141\156\151\x74\x69\x7a\x65\162\56\x63\x6d\x64\120\x72\145\160\162\x6f\143\145\163\x73"], "\165\160\154\157\141\144\56\160\162\145\x73\141\x76\145\40\x70\141\163\164\x65\56\x63\x6f\160\171\x66\162\157\155" => ["\120\154\165\x67\x69\x6e\56\x4e\x6f\162\155\x61\154\151\172\145\x72\x2e\157\156\x55\x70\x4c\157\x61\x64\120\x72\x65\123\x61\x76\145", "\120\x6c\x75\x67\151\x6e\x2e\x53\x61\156\x69\164\x69\172\145\162\56\157\156\125\x70\114\x6f\141\144\120\162\x65\x53\141\x76\145"]], "\x70\154\165\147\x69\156" => array("\x41\165\x74\x6f\122\145\x73\x69\172\x65" => array("\145\x6e\x61\x62\x6c\x65" => true, "\155\x61\170\x57\151\x64\164\150" => 3840, "\155\141\x78\110\x65\151\147\x68\x74" => 3840, "\160\162\145\163\x65\x72\166\x65\x45\170\151\x66" => false, "\x74\x61\162\147\x65\x74\x54\171\160\x65" => IMG_GIF | IMG_JPG | IMG_PNG | IMG_WBMP), "\x4e\157\x72\155\x61\154\x69\x7a\x65\x72" => array("\145\156\141\142\154\145" => true, "\x6e\146\x63" => false, "\156\x66\153\x63" => true, "\x75\155\x6c\x61\x75\x74\x73" => true, "\154\x6f\x77\x65\162\143\x61\163\145" => false, "\x63\x6f\156\x76\155\x61\160" => array()), "\x53\141\156\x69\164\x69\x7a\145\x72" => array("\x65\x6e\141\x62\x6c\x65" => true, "\x74\141\x72\x67\145\x74\x73" => array("\134", "\57", "\x3a", "\x2a", "\x3f", "\42", "\x3c", "\x3e", "\x7c", "\40", "\133", "\x5d", "\x7b", "\175", "\xc2\xb0", "\136", "\x28", "\x29", "\45", "\x24", "\xc2\xa7", "\46", "\x2b", "\55", "\41", "\75"), "\162\145\160\x6c\141\x63\145" => "\x5f", "\x63\141\x6c\154\x42\141\x63\153" => null)), "\x72\x6f\x6f\x74\x73" => [["\164\155\x62\123\x69\172\145" => 120, "\x64\162\151\166\x65\162" => "\114\157\143\141\154\x46\x69\154\x65\x53\171\x73\x74\145\155", "\x70\141\164\x68" => \PFAD_ROOT . $mediafilesSubdir, "\125\122\x4c" => parse_url(Shop::getURL() . "\x2f" . $mediafilesSubdir, \PHP_URL_PATH), "\167\x69\x6e\x48\x61\163\150\106\151\x78" => \DIRECTORY_SEPARATOR !== "\x2f", "\x75\x70\x6c\157\x61\x64\104\145\x6e\x79" => ["\141\154\x6c"], "\165\160\x6c\157\141\144\101\154\154\x6f\167" => ["\151\x6d\x61\147\145", "\166\x69\144\145\157", "\164\145\x78\164\x2f\x70\x6c\141\151\156", "\x61\x70\160\x6c\x69\143\x61\164\x69\x6f\x6e\57\160\x64\146", "\141\x70\x70\154\x69\x63\141\164\x69\x6f\x6e\57\155\163\167\x6f\x72\144", "\141\160\x70\154\151\x63\x61\164\x69\x6f\x6e\57\x65\x78\143\145\x6c", "\x61\160\160\154\151\143\141\164\151\157\x6e\57\166\x6e\144\56\x6d\163\55\x65\170\143\x65\x6c", "\x61\160\160\154\151\x63\x61\164\x69\157\156\57\170\x2d\x65\x78\143\145\154", "\141\x70\160\x6c\x69\143\141\x74\151\157\x6e\x2f\x76\156\144\56\157\x70\x65\x6e\170\155\154\x66\157\162\x6d\x61\164\x73\x2d\x6f\x66\146\151\x63\x65\x64\x6f\143\x75\x6d\145\156\164\56\x73\x70\162\x65\x61\x64\163\150\x65\x65\x74\x6d\154\x2e\163\x68\145\145\164", "\x61\x70\x70\x6c\x69\143\141\164\x69\x6f\x6e\x2f\x76\x6e\x64\x2e\x6f\160\x65\156\170\155\x6c\146\157\162\x6d\x61\x74\163\55\x6f\x66\146\x69\x63\x65\144\157\x63\165\x6d\145\x6e\x74\x2e\x77\x6f\x72\144\160\x72\x6f\143\x65\163\163\x69\x6e\x67\155\x6c\56\144\157\x63\x75\155\x65\x6e\x74"], "\165\160\154\157\141\x64\117\x72\x64\x65\x72" => ["\x64\x65\156\171", "\141\154\x6c\x6f\167"], "\x61\x63\x63\145\x73\163\103\x6f\x6e\x74\x72\x6f\x6c" => "\x61\143\x63\145\x73\163"]]])); $connector->run(); wENwl: