<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\DB\ReturnType; use JTL\Shop; use Plugin\admorris_pro\Utils\TypeConverter; function admGetPopUps() { $data = Shop::Container()->getDB()->query("\x53\105\x4c\x45\x43\x54\x20\52\x20\x46\x52\117\115\40\x78\160\x6c\x75\147\151\x6e\x5f\141\x64\x6d\157\x72\x72\x69\x73\x5f\x70\162\157\x5f\x70\x6f\160\165\x70\40\x4f\122\104\x45\x52\x20\102\131\40\x60\x70\x72\151\157\x72\x69\164\171\140\40\104\105\123\x43", 2); foreach ($data as $key => $popup) { $popup->active = TypeConverter::convertIntegerToBool($popup->active); $popup->styleBackdropStatic = TypeConverter::convertIntegerToBool($popup->styleBackdropStatic); $popup->styleCloseButton = TypeConverter::convertIntegerToBool($popup->styleCloseButton); $popup->styleScrollbar = TypeConverter::convertIntegerToBool($popup->styleScrollbar); $popup->contentSalutation = TypeConverter::convertIntegerToBool($popup->contentSalutation); $popup->contentFirstName = TypeConverter::convertIntegerToBool($popup->contentFirstName); $popup->contentLastName = TypeConverter::convertIntegerToBool($popup->contentLastName); $popup->startTime = TypeConverter::dateTimeStringToIso($popup->startTime); $popup->disableTime = TypeConverter::dateTimeStringToIso($popup->disableTime); $popup->saleStart = TypeConverter::dateTimeStringToIso($popup->saleStart); $popup->saleEnd = TypeConverter::dateTimeStringToIso($popup->saleEnd); vNg8e: } KEuaP: $response = json_encode($data); header("\103\x6f\156\x74\145\x6e\164\x2d\x74\171\x70\145\x3a\x20\x61\x70\x70\154\151\143\x61\164\151\157\156\57\152\163\157\x6e"); return $response; } function admCopyPopUp($data) { $PopUpData = Shop::Container()->getDB()->query("\x53\105\x4c\x45\103\x54\40\52\40\x46\122\117\x4d\x20\x78\160\154\165\147\151\156\137\x61\144\x6d\x6f\162\162\151\x73\x5f\x70\162\x6f\x5f\x70\x6f\160\165\160\x20\127\110\105\x52\105\40\151\x64\x20\x3d\x20{$data}", 2); $PopUpData[0]->id = ''; $newID = Shop::Container()->getDB()->insert("\x78\x70\x6c\x75\x67\x69\156\137\141\x64\155\157\162\x72\x69\163\x5f\160\162\157\x5f\160\x6f\x70\x75\x70", $PopUpData[0]); $popupFilterData = Shop::Container()->getDB()->query("\123\105\x4c\x45\103\124\40\52\40\106\122\x4f\115\x20\x78\x70\x6c\165\147\151\156\137\x61\x64\x6d\157\x72\162\x69\163\x5f\160\162\157\137\x70\x6f\160\165\x70\137\164\162\151\x67\147\x65\x72\137\x66\x69\154\164\x65\162\40\127\110\105\122\105\x20\160\x6f\160\x75\x70\111\x64\40\x3d\x20{$data}", 2); foreach ($popupFilterData as $key => $popupFilter) { $popupFilterData[$key]->id = ''; $popupFilterData[$key]->popupId = $newID; $result = Shop::Container()->getDB()->insert("\170\160\154\165\x67\151\156\x5f\141\144\x6d\x6f\162\162\151\163\x5f\x70\x72\x6f\137\160\x6f\x70\x75\160\x5f\x74\162\x69\x67\147\x65\x72\x5f\x66\x69\x6c\164\145\162", $popupFilterData[$key]); QUQo_: } R2RAy: header("\103\157\x6e\164\145\156\164\x2d\x74\x79\160\x65\72\x20\x61\160\x70\x6c\x69\143\x61\164\151\157\x6e\x2f\152\163\157\x6e"); if ($newID != '') { goto PfAnR; } return false; goto Wh0YM; PfAnR: return true; Wh0YM: } function admSavePopUps($data) { $startDate = strtotime($data["\163\x74\x61\162\x74\x54\x69\x6d\x65"]); $startDate = date("\x59\55\x6d\55\x64\40\110\x3a\x69\x3a\x73", $startDate); $disableDate = strtotime($data["\x64\151\163\141\142\x6c\145\124\151\x6d\x65"]); $disableDate = date("\131\55\155\55\144\40\x48\x3a\151\72\x73", $disableDate); $saleStart = strtotime($data["\163\x61\154\x65\123\164\x61\162\x74"]); $saleStart = date("\x59\x2d\x6d\55\144\x20\x48\x3a\x69\x3a\x73", $saleStart); $saleEnd = strtotime($data["\x73\x61\x6c\145\x45\156\144"]); $saleEnd = date("\131\55\155\x2d\x64\40\x48\x3a\x69\x3a\163", $saleEnd); Shop::Container()->getDB()->query("\12\40\40\40\x20\122\x45\x50\114\x41\x43\x45\40\111\116\124\117\40\x78\160\154\x75\x67\x69\156\x5f\x61\144\155\x6f\162\162\x69\163\x5f\x70\x72\x6f\x5f\x70\x6f\x70\x75\160\40\xa\x20\x20\x20\40\x20\40\126\101\x4c\x55\x45\123\40\50\12\x20\x20\40\40\40\x20\x20\x20\42" . $data["\151\144"] . "\x22\54\40\xa\x20\x20\40\x20\40\40\40\40\x22" . $data["\x70\x72\x69\157\162\151\x74\x79"] . "\42\x2c\x20\12\x20\x20\x20\40\x20\40\40\x20\42" . TypeConverter::encode_with_specialchars($data["\156\x61\155\145"]) . "\x22\x2c\x20\12\40\40\x20\x20\40\x20\40\40\42" . $data["\154\x61\x6e\x67"] . "\x22\x2c\40\12\40\x20\x20\x20\x20\40\40\40\42" . TypeConverter::convertBoolToInteger($data["\x61\x63\164\151\166\x65"]) . "\42\54\40\12\40\x20\40\x20\x20\x20\40\40\x22" . $startDate . "\x22\54\40\xa\40\40\x20\x20\x20\x20\40\x20\42" . $disableDate . "\x22\x2c\x20\12\40\x20\40\x20\40\40\x20\40\x22" . $data["\x74\x72\151\x67\147\x65\x72\124\171\x70\x65"] . "\42\54\x20\12\40\x20\40\x20\x20\x20\40\40\x22" . $data["\x74\162\x69\x67\147\x65\162\126\x61\154\165\x65"] . "\x22\54\x20\12\40\40\x20\40\x20\40\40\40\42" . $data["\x74\162\x69\147\147\145\162\x46\151\154\x74\x65\x72\x4f\160\x65\x72\141\164\x6f\x72"] . "\x22\x2c\40\12\x20\x20\x20\40\40\40\40\40\42" . $data["\164\145\x6d\160\154\x61\164\x65"] . "\42\x2c\x20\12\x20\x20\x20\x20\x20\40\40\40\x22" . $data["\x63\x6f\157\153\x69\145\x4c\151\x66\x65\x74\151\x6d\x65"] . "\42\x2c\40\12\40\x20\40\40\x20\40\x20\x20\42" . $data["\x73\x74\x79\154\145\123\151\x7a\145\127\151\144\164\x68"] . "\42\54\40\12\x20\x20\x20\x20\x20\x20\40\x20\42" . $data["\x73\x74\171\154\x65\x53\x69\172\145\110\145\151\x67\x68\x74"] . "\42\54\40\xa\40\x20\40\40\x20\40\x20\x20\x22" . $data["\163\164\171\x6c\145\101\156\151\x6d\141\164\151\x6f\156"] . "\42\x2c\40\12\x20\x20\x20\40\40\x20\40\x20\42" . $data["\x73\x74\x79\154\145\x41\x6e\x69\155\x61\x74\x69\157\156\x4f\165\x74"] . "\x22\54\x20\12\x20\40\40\x20\40\x20\x20\x20\42" . $data["\163\164\171\x6c\x65\x50\x6f\x73\x69\x74\x69\x6f\156"] . "\42\54\40\xa\x20\x20\x20\x20\40\x20\40\40\x22" . $data["\x73\164\x79\x6c\145\103\157\x6c\157\x72"] . "\42\54\40\12\x20\40\x20\x20\x20\x20\x20\40\x22" . $data["\x73\164\x79\x6c\145\102\141\x63\153\x64\162\x6f\160\103\157\x6c\157\x72"] . "\x22\54\x20\12\40\x20\40\40\40\x20\x20\40\42" . TypeConverter::convertBoolToInteger($data["\163\x74\x79\154\x65\102\141\x63\153\144\x72\x6f\x70\123\x74\141\x74\151\x63"]) . "\42\54\x20\12\40\x20\x20\x20\x20\x20\x20\40\42" . $data["\x73\164\x79\154\145\x53\x68\x61\144\157\x77"] . "\42\54\x20\xa\40\40\x20\40\x20\40\x20\x20\x22" . $data["\163\x74\x79\x6c\x65\102\x61\x63\x6b\147\162\157\x75\x6e\144\103\157\154\157\162"] . "\42\54\40\xa\x20\x20\40\40\x20\40\40\40\42" . $data["\163\x74\171\154\145\x42\x61\x63\153\x67\162\157\165\x6e\144\111\155\x61\147\145"] . "\42\54\x20\xa\x20\40\40\x20\40\40\x20\x20\42" . TypeConverter::convertBoolToInteger($data["\163\164\x79\154\x65\x43\x6c\157\163\x65\102\165\x74\x74\157\156"]) . "\42\54\40\12\40\40\x20\x20\x20\40\40\40\42" . TypeConverter::convertBoolToInteger($data["\163\164\x79\154\145\123\143\x72\x6f\x6c\154\x62\x61\162"]) . "\x22\54\xa\x20\x20\x20\x20\40\x20\x20\40\x22" . $data["\x73\x74\x79\x6c\x65\x42\x75\x74\164\157\156\103\x6f\154\157\x72"] . "\x22\x2c\40\12\40\x20\40\40\40\x20\40\40\x22" . $data["\x73\164\x79\154\145\102\165\164\164\157\x6e\x54\x65\170\164\x43\157\x6c\x6f\x72"] . "\x22\x2c\x20\xa\x20\x20\40\x20\x20\40\40\40\x22" . TypeConverter::encode_with_specialchars($data["\x63\x6f\x6e\164\x65\156\164\124\x69\164\x6c\x65"]) . "\42\x2c\40\xa\40\x20\x20\40\40\x20\40\x20\x22" . TypeConverter::encode_with_specialchars($data["\x63\x6f\156\164\x65\156\x74\124\145\170\x74\x31"]) . "\x22\x2c\x20\12\x20\40\40\40\40\x20\x20\x20\x22" . TypeConverter::encode_with_specialchars($data["\143\157\156\164\x65\156\164\x54\145\170\x74\x32"]) . "\42\54\x20\12\40\40\x20\x20\x20\x20\40\x20\x22" . TypeConverter::encode_with_specialchars($data["\x63\157\x6e\164\145\x6e\164\124\x65\170\x74\x33"]) . "\x22\x2c\x20\xa\40\40\x20\40\40\40\40\40\x22" . TypeConverter::encode_with_specialchars($data["\143\157\156\x74\x65\x6e\x74\x42\165\x74\x74\x6f\x6e\x54\145\x78\x74"]) . "\42\x2c\40\12\x20\x20\x20\40\x20\40\40\x20\x22" . TypeConverter::encode_with_specialchars($data["\x63\157\x6e\x74\145\156\x74\x42\165\164\x74\157\156\114\151\x6e\153"]) . "\x22\x2c\40\12\x20\40\x20\x20\40\40\40\40\42" . TypeConverter::encode_with_specialchars($data["\x63\x6f\x6e\164\x65\x6e\164\x4c\x69\156\x6b"]) . "\x22\x2c\x20\xa\x20\40\x20\40\x20\40\40\40\42" . $data["\143\x6f\156\x74\145\156\x74\x53\141\154\x75\x74\x61\164\x69\x6f\x6e"] . "\x22\54\x20\12\x20\x20\40\40\x20\40\40\x20\x22" . $data["\143\x6f\x6e\164\145\x6e\x74\106\x69\x72\163\x74\x4e\141\x6d\x65"] . "\x22\54\x20\12\x20\40\x20\40\40\x20\40\x20\42" . $data["\x63\157\156\164\145\156\x74\x4c\141\163\164\x4e\x61\155\145"] . "\42\54\40\12\x20\x20\40\x20\40\40\x20\40\x22" . $saleStart . "\42\x2c\40\xa\x20\x20\x20\x20\x20\x20\40\x20\42" . $saleEnd . "\42\54\40\xa\x20\40\x20\x20\40\x20\x20\40\x22" . $data["\x63\157\x75\156\164\x64\x6f\167\x6e\x53\x74\171\154\x65"] . "\x22\54\x20\12\40\40\x20\40\x20\40\x20\x20\x22" . $data["\x63\157\x75\x6e\164\x64\157\x77\156\106\x6f\x72\155\141\x74"] . "\42\xa\40\40\x20\x20\x20\x20\51\xa\40\x20\40\40\40\40", 3); header("\x43\157\156\x74\145\x6e\x74\55\x74\x79\x70\x65\72\x20\x61\x70\x70\x6c\151\x63\x61\x74\x69\x6f\156\x2f\152\163\157\x6e"); return true; } function admAddPopUp($module) { $popupId = Shop::Container()->getDB()->query("\xa\40\x20\40\x20\111\x4e\123\x45\x52\124\x20\x49\x4e\124\x4f\40\x78\160\x6c\165\x67\x69\156\x5f\141\144\x6d\x6f\x72\x72\151\x73\137\160\x72\157\x5f\160\x6f\160\x75\160\40\xa\x20\40\x20\x20\40\x20\x56\101\x4c\125\105\x53\x20\50\xa\40\40\x20\x20\x20\40\x20\40\x22\42\x2c\40\12\40\40\x20\40\x20\x20\x20\40\42\x30\42\x2c\x20\xa\x20\x20\40\40\x20\40\x20\40\x22\116\x65\x75\145\163\40\120\157\160\125\160\x22\54\x20\12\40\40\x20\40\40\x20\x20\40\x22\61\x22\x2c\x20\xa\40\x20\x20\40\40\x20\40\x20\42\60\x22\x2c\40\xa\40\x20\x20\40\x20\x20\x20\x20\42\62\60\x31\x38\x2d\60\x31\x2d\60\61\40\60\x30\72\60\61\x3a\60\x30\42\x2c\x20\12\x20\x20\40\40\40\x20\x20\40\42\62\x30\x33\x30\x2d\x30\61\55\60\61\40\x30\60\x3a\60\x31\72\60\x30\42\54\40\12\40\x20\40\40\x20\40\40\x20\x22\x6f\156\154\157\x61\144\42\x2c\40\xa\40\x20\40\x20\40\40\40\x20\x22\x30\42\x2c\40\12\x20\40\x20\x20\x20\40\x20\x20\42\141\x6e\144\42\x2c\40\xa\40\x20\x20\40\x20\x20\40\40\x22\151\x6d\141\147\145\137\160\x6f\x70\x75\160\42\x2c\40\xa\x20\40\x20\x20\40\40\40\x20\42\63\60\x22\54\x20\xa\x20\x20\x20\x20\x20\40\x20\x20\x22\70\x30\60\x70\x78\42\x2c\40\xa\40\x20\40\40\x20\40\x20\x20\42\42\54\x20\12\x20\40\40\x20\x20\x20\x20\x20\x22\146\141\x64\x65\111\156\x22\54\x20\xa\x20\40\40\x20\40\x20\x20\x20\42\146\x61\144\145\117\165\164\42\54\40\12\x20\x20\40\40\x20\40\40\40\42\x61\144\155\x6f\162\162\x69\x73\x2d\x6d\x6f\144\141\x6c\55\x63\x65\x6e\164\145\x72\145\x64\x22\54\40\12\x20\x20\40\x20\40\40\x20\x20\x22\43\60\60\x30\60\x30\60\x22\54\40\xa\x20\40\40\x20\x20\40\x20\40\42\x23\60\x30\60\x30\x30\x30\71\x30\x22\x2c\x20\12\40\x20\40\40\40\x20\x20\x20\42\61\42\54\40\12\x20\40\x20\40\40\40\40\x20\x22\61\x22\x2c\x20\xa\40\x20\x20\40\x20\40\40\40\42\43\x66\x66\146\x66\x66\x66\x22\54\x20\12\40\x20\x20\x20\x20\40\40\x20\42\x67\146\170\x2f\x6b\145\151\156\x42\x69\x6c\144\x2e\147\x69\146\42\54\x20\12\40\x20\x20\x20\x20\40\x20\40\x22\x31\x22\54\x20\12\x20\x20\40\x20\x20\x20\40\x20\x22\60\42\54\x20\xa\40\x20\x20\x20\40\40\x20\x20\x22\x23\60\60\x30\x30\x30\x30\x22\54\40\xa\x20\40\40\40\x20\40\x20\x20\42\43\x66\146\146\x66\146\x66\x22\54\40\12\40\40\40\x20\x20\x20\40\x20\42\124\151\x74\x65\154\x22\x2c\x20\12\x20\40\x20\40\40\40\x20\x20\x22\124\x65\170\164\61\x22\x2c\x20\xa\x20\x20\x20\x20\40\40\40\40\x22\124\145\170\164\62\42\54\x20\xa\x20\40\40\x20\x20\x20\40\40\x22\x54\x65\x78\164\63\42\54\40\xa\x20\x20\x20\40\40\40\40\x20\42\x42\x75\x74\164\157\x6e\x20\x54\x65\x78\164\x22\54\40\xa\x20\40\x20\40\40\x20\x20\x20\x22\x68\164\164\x70\x73\x3a\57\x2f\x61\144\x6d\x6f\x72\x72\x69\163\x2e\x63\x6f\x6d\x2f\x70\162\157\57\42\x2c\x20\xa\40\x20\40\40\x20\x20\40\x20\x22\150\164\164\160\163\x3a\57\x2f\x61\x64\x6d\x6f\x72\162\x69\x73\56\143\157\x6d\57\160\x72\157\x2f\42\x2c\xa\x20\40\x20\40\40\40\40\x20\x22\60\42\54\40\12\x20\40\x20\40\40\40\40\40\x22\60\42\x2c\xa\x20\x20\x20\x20\40\40\x20\x20\x22\x30\42\x2c\12\40\40\40\x20\x20\40\x20\x20\42\62\x30\x31\71\55\60\61\55\60\61\40\x30\60\x3a\60\61\x3a\60\60\x22\54\x20\xa\40\x20\40\x20\x20\40\x20\x20\42\x32\x30\61\71\55\x30\61\x2d\x30\x32\40\x30\x30\72\x30\61\72\60\60\42\54\xa\x20\40\x20\40\x20\x20\40\40\42\x73\x74\141\x6e\144\x61\x72\144\x2d\143\x6c\157\x63\153\55\167\150\x69\x74\x65\x22\54\xa\x20\40\40\40\x20\40\x20\40\42\110\x6f\165\x72\x6c\171\103\157\x75\156\164\145\162\42\xa\x20\x20\x20\x20\40\x20\51\12\40\40\40\40\x20\x20", ReturnType::LAST_INSERTED_ID); header("\x43\x6f\156\x74\x65\156\164\x2d\x74\171\x70\145\72\x20\141\160\160\x6c\151\143\141\x74\x69\x6f\x6e\x2f\x6a\163\x6f\x6e"); return $popupId; } function admDeletePopUp($data) { Shop::Container()->getDB()->delete("\x78\x70\x6c\165\x67\x69\156\x5f\x61\x64\x6d\157\162\162\x69\163\137\160\x72\x6f\137\x70\157\x70\x75\x70", "\x69\144", (int) $data); header("\103\x6f\156\164\x65\x6e\x74\55\164\171\x70\x65\72\40\x61\x70\x70\154\151\x63\141\x74\151\157\156\x2f\152\x73\157\x6e"); return true; } function admGetPopUpFilter($data) { $data = Shop::Container()->getDB()->query("\x53\x45\114\105\x43\124\x20\x2a\40\106\x52\x4f\115\40\x78\x70\154\x75\x67\x69\x6e\x5f\x61\144\x6d\x6f\162\x72\x69\x73\x5f\x70\x72\x6f\137\x70\157\x70\x75\x70\x5f\x74\162\x69\147\x67\x65\162\137\146\x69\x6c\x74\145\162\x20\127\110\x45\122\105\x20\x70\157\160\x75\160\111\144\40\75\40{$data}", 2); $response = json_encode($data); header("\103\157\156\x74\145\x6e\164\55\x74\171\160\x65\x3a\40\141\x70\160\154\151\x63\141\164\x69\157\x6e\57\x6a\x73\157\156"); return $response; } function admSavePopUpFilter($data) { Shop::Container()->getDB()->query("\12\40\x20\x20\40\122\x45\120\114\101\x43\105\40\x49\x4e\x54\x4f\x20\170\x70\154\x75\147\x69\x6e\x5f\x61\x64\155\x6f\x72\x72\x69\163\x5f\160\162\x6f\137\x70\x6f\160\165\160\137\164\162\x69\147\x67\145\162\x5f\x66\151\x6c\164\x65\162\x20\xa\40\40\x20\40\40\40\x56\x41\114\125\x45\123\40\50\xa\x20\x20\40\x20\40\40\40\x20\x22\x22\x2c\40\xa\40\40\x20\x20\x20\40\40\40\x22" . $data["\151\x64"] . "\x22\x2c\40\12\40\40\x20\x20\40\40\40\40\42" . $data["\x74\162\x69\x67\x67\145\x72\x46\151\154\164\x65\162\x54\x79\160\x65"] . "\x22\54\40\12\40\x20\40\x20\x20\x20\x20\40\x22" . TypeConverter::encode_with_specialchars($data["\164\162\x69\x67\x67\x65\x72\x46\x69\154\164\145\162\126\x61\x6c\x75\145"]) . "\x22\12\40\40\x20\x20\x20\x20\51\12\x20\40\x20\40\x20\40", 3); header("\x43\x6f\156\x74\x65\x6e\164\x2d\x74\x79\x70\x65\x3a\40\141\x70\x70\x6c\x69\143\x61\x74\151\x6f\156\57\152\x73\x6f\156"); return true; } function admDeletePopUpFilter($data) { Shop::Container()->getDB()->delete("\x78\x70\154\165\x67\151\x6e\x5f\141\x64\155\157\162\x72\151\x73\137\160\x72\157\137\160\x6f\x70\x75\160\x5f\x74\x72\x69\147\x67\145\x72\x5f\146\151\154\x74\x65\162", "\x69\x64", (int) $data); header("\103\157\x6e\x74\x65\x6e\164\55\x74\171\x70\x65\x3a\40\x61\160\160\154\x69\x63\141\x74\151\x6f\x6e\57\x6a\x73\x6f\x6e"); return true; }