<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\Migrations; use JTL\Plugin\Migration; use JTL\Update\IMigration; use JTL\Shop; use stdClass; class Migration20210713010100 extends Migration implements IMigration { protected $description = "\101\x64\x64\40\x6e\x6f\111\x63\x6f\x6e\x20\x70\x6c\141\143\x65\150\x6f\x6c\144\x65\162\x20\x69\143\x6f\x6e\54\40\x61\x64\x64\x20\x62\x75\x6c\x6c\x65\x74\x20\151\143\157\x6e\163\x2c\x20\x61\x64\x64\40\x6c\157\157\160\x20\x73\x65\164\x74\151\x6e\x67\54\40\x61\x64\x64\40\146\x6f\162\x65\x69\x67\156\40\153\145\x79\40\157\x66\40\x69\143\157\156\111\x64\x20\151\156\40\x73\x6c\151\144\x65\162"; public function up() { goto ER5_R; ER5_R: $obj = new stdClass(); $obj->category = "\156\157\111\143\157\156"; $obj->iconType = "\x6e\x6f\111\x63\157\156"; $obj->iconFamily = "\156\157\111\143\157\156"; $obj->pathOrSvg = "\74\163\166\x67\x20\x78\155\154\156\x73\x3d\x22\150\164\164\x70\72\57\57\167\167\167\x2e\167\x33\56\157\x72\x67\57\x32\x30\60\60\x2f\163\x76\147\42\x20\x76\151\x65\x77\x42\x6f\170\x3d\x22\60\x20\x30\40\61\x30\60\x20\61\x30\60\42\40\163\x74\x79\x6c\145\x3d\42\x65\x6e\x61\x62\x6c\x65\55\x62\141\143\153\x67\x72\157\x75\156\x64\x3a\x6e\x65\x77\40\x30\x20\x30\40\61\x30\x30\40\61\60\60\42\x20\146\x69\154\154\75\42\43\x38\x30\x38\60\x38\x30\x22\x3e\x3c\x70\x61\164\150\40\x64\x3d\x22\115\71\x34\x2c\x30\x63\x2d\x31\x2e\x36\x2c\x30\x2d\63\x2c\x30\56\67\55\64\56\x31\x2c\x31\x2e\x38\114\65\60\x2c\x34\x31\56\67\x4c\x31\60\x2e\61\x2c\61\56\x38\x43\x39\x2c\x30\56\67\54\67\x2e\x35\x2c\60\54\65\x2e\x39\54\x30\x43\x32\x2e\67\x2c\x30\54\60\x2c\62\56\67\x2c\60\x2c\x35\56\71\x43\60\x2c\x37\x2e\x35\54\x30\56\67\54\x39\54\x31\x2e\70\x2c\x31\60\x2e\61\x4c\x34\61\x2e\x37\x2c\65\60\114\x31\56\70\54\x38\71\56\71\xa\11\x9\143\x2d\62\56\x33\x2c\x32\56\x32\x2d\62\56\x34\x2c\x36\55\60\56\x32\x2c\70\56\63\143\x32\x2e\62\x2c\x32\x2e\63\x2c\66\x2c\x32\56\64\54\70\x2e\x33\x2c\60\56\x32\143\x30\x2e\x31\55\60\x2e\61\54\x30\56\61\x2d\60\56\61\54\60\56\62\55\60\56\62\114\65\60\54\x35\x38\56\63\x6c\x33\x39\56\71\54\63\71\56\x39\143\62\56\x32\54\x32\x2e\63\x2c\x36\54\x32\x2e\x34\54\x38\56\63\x2c\60\56\x32\163\x32\56\64\x2d\x36\54\60\x2e\x32\x2d\x38\x2e\x33\xa\11\x9\x63\x2d\x30\56\61\x2d\60\56\x31\55\60\x2e\x31\x2d\60\x2e\x31\x2d\60\x2e\x32\55\x30\x2e\62\114\x35\x38\x2e\x33\x2c\65\x30\x6c\x33\x39\56\x39\55\x33\x39\x2e\71\143\x32\x2e\x33\55\62\56\x32\54\62\x2e\64\55\66\54\x30\x2e\62\55\x38\56\63\x43\71\67\56\62\54\60\x2e\x36\x2c\71\x35\56\x36\54\x30\54\71\x34\x2c\60\x7a\42\76\x3c\x2f\x70\x61\x74\x68\76\74\57\163\x76\x67\76"; Shop::Container()->getDB()->insert("\170\x70\154\x75\x67\151\156\x5f\x61\144\155\157\162\x72\x69\x73\x5f\x70\x72\x6f\x5f\x69\x63\x6f\x6e\163", $obj); $iconsFile = file_get_contents(dirname(__FILE__) . "\x2f" . "\x62\x75\x6c\154\145\x74\x73\x5f\x73\x63\141\154\x65\x64\x5f\x6f\160\164\151\155\x69\x7a\145\144\x2e\x6a\163\157\x6e"); $jsonIcons = json_decode($iconsFile); foreach ($jsonIcons as $categoryKey => $categories) { foreach ($categories as $iconTypesKey => $iconTypes) { foreach ($iconTypes as $iconFamilyKey => $iconFamilies) { foreach ($iconFamilies as $iconSvg) { $bulletObj = new stdClass(); $bulletObj->category = $categoryKey; $bulletObj->iconType = $iconTypesKey; $bulletObj->iconFamily = $iconFamilyKey; $bulletObj->pathOrSvg = $iconSvg; Shop::Container()->getDB()->insert("\x78\x70\x6c\x75\x67\151\156\137\x61\144\x6d\x6f\x72\x72\151\163\x5f\x70\162\x6f\137\151\x63\x6f\x6e\x73", $bulletObj); RS9SB: } ShNpq: k8IbS: } O1271: zcwfA: } VmonF: vbeoq: } b_SrV: goto ybsuh; IVaGA: $noIcon = Shop::Container()->getDB()->select("\170\160\154\x75\x67\x69\x6e\x5f\x61\144\x6d\x6f\162\x72\151\x73\137\160\x72\157\137\x69\143\157\x6e\163", "\143\x61\x74\x65\x67\157\x72\171", $obj->category); $defaultArrow = Shop::Container()->getDB()->query("\123\105\x4c\105\x43\x54\40\52\40\x46\122\x4f\115\x20\x78\x70\154\x75\x67\151\156\x5f\141\x64\x6d\x6f\x72\162\151\x73\x5f\160\162\157\137\x69\143\x6f\x6e\163\40\x57\x48\105\x52\105\40\x69\x63\157\x6e\x54\x79\x70\145\40\x3d\x20\47\x63\x68\145\166\x72\157\156\122\151\x67\x68\164\47\40\x41\x4e\x44\40\151\x63\x6f\x6e\x46\141\155\151\x6c\171\40\75\40\47\x66\154\165\x65\x6e\x74\123\171\x73\164\145\x6d\x46\x69\154\154\145\144\47", 1); $defaultBullet = Shop::Container()->getDB()->query("\123\105\x4c\x45\103\x54\40\x2a\40\x46\x52\x4f\x4d\x20\170\160\154\165\147\151\x6e\x5f\x61\144\x6d\x6f\162\x72\151\163\137\x70\162\157\137\x69\x63\157\x6e\x73\x20\127\110\x45\x52\x45\x20\x69\x63\157\x6e\124\171\160\x65\x20\75\x20\47\144\157\164\x27\40\101\x4e\x44\x20\x69\143\x6f\x6e\x46\x61\155\x69\x6c\x79\40\75\x20\47\163\x69\155\x70\x6c\x65\123\x6d\x61\x6c\154\47", 1); foreach ($sliders as $slider) { if ($slider->navArrows !== "\146\141\154\x73\x65") { goto g44Gb; } $slider->navArrowsIconId = $noIcon->iconId; goto eqRm7; g44Gb: $slider->navArrowsIconId = $defaultArrow->iconId; eqRm7: if ($slider->navBullets !== "\146\141\x6c\x73\145") { goto rTVjv; } $slider->navBulletsIconId = $noIcon->iconId; goto mWgsk; rTVjv: $slider->navBulletsIconId = $defaultBullet->iconId; mWgsk: $slider->transition = "\146\x61\144\145"; $slider->looping = 0; Shop::Container()->getDB()->update("\170\160\154\165\x67\151\x6e\x5f\141\144\155\x6f\162\162\x69\163\137\x70\x72\x6f\137\x73\x6c\151\x64\x65\x72", "\151\x64", $slider->id, $slider); jkSXq: } ElwCo: $this->execute("\101\x4c\124\105\122\x20\124\101\x42\x4c\105\x20\170\x70\x6c\165\x67\x69\x6e\137\141\x64\155\157\162\x72\151\163\137\160\162\157\x5f\x73\154\151\x64\x65\x72\40\x44\122\117\x50\40\x6e\x61\166\x41\162\x72\x6f\x77\x73"); $this->execute("\101\x4c\x54\x45\x52\x20\x54\101\102\114\x45\40\x78\x70\154\x75\147\x69\x6e\x5f\141\144\155\157\x72\x72\151\163\137\x70\x72\x6f\137\x73\x6c\151\x64\145\x72\x20\x44\x52\117\120\x20\156\x61\x76\102\165\x6c\x6c\x65\164\163"); goto hyYbg; ybsuh: $this->execute("\101\114\x54\x45\x52\40\x54\x41\102\x4c\105\x20\170\x70\154\165\x67\x69\156\x5f\x61\x64\x6d\x6f\162\x72\x69\x73\137\160\x72\157\x5f\163\x6c\x69\144\x65\162\x20\x41\104\104\40\156\x61\x76\x41\x72\162\x6f\167\x73\111\x63\x6f\156\111\x64\40\151\x6e\164"); $this->execute("\x41\x4c\124\x45\x52\x20\124\101\x42\x4c\105\x20\170\160\x6c\x75\147\151\x6e\137\141\x64\155\157\162\162\x69\x73\137\x70\162\x6f\x5f\163\154\x69\144\145\162\40\x41\104\104\40\156\141\x76\x42\x75\x6c\x6c\145\x74\x73\x49\x63\157\156\x49\144\x20\x69\156\164"); $this->execute("\x41\x4c\124\105\x52\x20\124\x41\102\x4c\105\40\170\x70\154\x75\x67\x69\x6e\137\x61\144\155\x6f\162\x72\151\163\137\160\162\157\x5f\x73\154\x69\x64\145\x72\x20\x41\104\x44\x20\106\117\122\x45\x49\x47\x4e\40\x4b\105\131\40\x28\x6e\x61\166\101\x72\x72\x6f\167\x73\x49\x63\157\156\111\x64\x29\x20\122\x45\x46\105\122\105\x4e\103\x45\x53\40\170\x70\x6c\x75\147\x69\x6e\137\141\x64\155\x6f\162\162\x69\x73\137\160\x72\157\x5f\151\143\157\x6e\x73\40\x28\x69\143\x6f\x6e\111\x64\51"); $this->execute("\x41\114\x54\105\122\x20\x54\101\x42\114\x45\40\x78\160\154\x75\147\x69\x6e\137\x61\144\155\157\x72\162\x69\x73\137\160\162\157\137\163\x6c\151\144\x65\x72\40\x41\x44\104\x20\x46\x4f\122\x45\x49\107\x4e\x20\x4b\x45\131\x20\x28\156\141\x76\102\x75\x6c\154\145\164\x73\111\x63\157\x6e\x49\144\x29\40\122\x45\106\x45\x52\105\116\103\105\x53\40\170\160\154\x75\x67\x69\156\137\x61\x64\x6d\x6f\x72\x72\x69\163\x5f\160\162\157\137\151\143\157\156\x73\x20\x28\x69\143\x6f\x6e\x49\144\x29"); $this->execute("\x41\114\124\105\x52\40\x54\101\x42\114\x45\x20\170\160\154\x75\x67\151\x6e\x5f\141\x64\x6d\x6f\x72\x72\151\x73\137\160\162\157\x5f\163\154\x69\144\145\x72\40\x41\x44\104\40\154\157\157\160\x69\156\147\40\x54\151\156\x79\x49\156\164\x28\x31\51\x20\x41\106\x54\x45\x52\40\141\165\x74\x6f\160\154\x61\171"); $this->execute("\101\114\124\105\122\x20\x54\x41\102\x4c\105\x20\x78\x70\154\x75\147\151\x6e\x5f\x61\144\155\x6f\162\x72\151\x73\x5f\x70\162\157\x5f\x73\x6c\151\144\x65\x20\x41\104\x44\x20\155\145\x64\x69\x61\x54\x79\x70\145\x20\x56\101\122\x43\110\101\122\50\62\x30\x29\40\101\106\124\105\122\x20\x74\145\x6d\160\154\x61\164\145"); $slides = Shop::Container()->getDB()->getObjects("\x53\105\x4c\x45\103\124\40\x2a\40\106\x52\117\x4d\x20\x78\160\x6c\165\147\x69\156\x5f\141\x64\x6d\157\x72\x72\151\163\137\x70\x72\157\x5f\163\x6c\x69\x64\145"); foreach ($slides as $slide) { if (!empty($slide->video)) { goto Xi3tW; } if (!empty($slide->image)) { goto glxcS; } $slide->mediaType = null; goto GCGsH; Xi3tW: $slide->mediaType = "\x76\x69\144\x65\x6f"; goto GCGsH; glxcS: $slide->mediaType = "\x69\155\x61\x67\145"; GCGsH: Shop::Container()->getDB()->update("\x78\x70\x6c\x75\x67\x69\156\x5f\141\144\155\x6f\162\162\x69\163\137\x70\162\157\137\x73\154\151\x64\x65", "\151\144", $slide->id, $slide); gAiyX: } Ys592: $sliders = Shop::Container()->getDB()->query("\x53\105\x4c\x45\x43\x54\40\x2a\x20\x46\122\117\x4d\40\x78\160\x6c\x75\x67\x69\156\x5f\x61\144\x6d\157\162\162\x69\163\137\x70\x72\157\137\x73\154\151\x64\x65\x72", 2); goto IVaGA; hyYbg: } public function down() { $category = "\x6e\x6f\111\143\157\x6e"; Shop::Container()->getDB()->delete("\x78\160\x6c\165\147\x69\x6e\x5f\x61\x64\x6d\157\162\x72\x69\x73\137\160\x72\157\137\x69\x63\x6f\156\163", "\x63\x61\x74\x65\x67\157\162\x79", $category); $category = "\x62\165\154\x6c\145\164\163"; $query = "\x53\105\114\x45\x43\124\40\52\x20\x46\122\x4f\x4d\40\170\160\x6c\x75\147\x69\156\137\141\x64\155\157\x72\162\x69\163\137\160\x72\157\137\x69\143\x6f\x6e\x73\40\x57\x48\105\122\x45\x20\x63\141\164\145\147\157\162\x79\40\75\x20\72\143\141\164\x65\147\157\x72\171"; $bulletIcons = Shop::Container()->getDB()->queryPrepared($query, ["\143\x61\x74\145\147\157\162\x79" => $category], 2); foreach ($bulletIcons as $icon) { Shop::Container()->getDB()->delete("\x78\x70\x6c\165\147\151\156\x5f\x61\144\x6d\157\162\x72\151\x73\x5f\x70\x72\157\137\x69\x63\157\156\x73", "\151\143\x6f\x6e\x49\x64", $icon->iconId); UOe8Q: } rwgvo: $this->execute("\x41\114\124\105\122\40\124\x41\x42\x4c\105\40\x78\x70\x6c\x75\147\151\x6e\137\141\144\155\157\162\x72\x69\163\137\x70\162\x6f\x5f\x73\154\x69\x64\x65\x72\x20\101\x44\104\40\x6e\x61\166\x41\x72\162\157\167\x73\x20\x76\141\x72\x63\x68\x61\x72\50\62\65\x29"); $this->execute("\101\x4c\124\x45\122\40\124\x41\x42\x4c\x45\x20\x78\x70\154\165\x67\x69\x6e\137\141\x64\x6d\x6f\x72\162\x69\163\137\x70\162\157\x5f\x73\154\x69\x64\145\x72\40\101\104\x44\40\x6e\141\x76\102\165\x6c\x6c\145\x74\163\x20\x76\x61\x72\143\150\141\162\50\62\x35\51"); $this->execute("\x41\x4c\x54\105\122\x20\x54\x41\x42\x4c\x45\x20\170\160\154\x75\147\151\x6e\x5f\x61\x64\x6d\x6f\x72\162\x69\x73\x5f\160\x72\157\137\x73\154\x69\144\x65\x72\x20\104\x52\x4f\120\40\x6c\x6f\157\x70\151\x6e\x67"); $this->execute("\101\114\124\x45\x52\x20\124\101\x42\114\105\40\170\x70\x6c\x75\147\151\156\137\x61\x64\155\157\162\162\x69\x73\137\x70\162\157\137\163\154\x69\x64\x65\162\x20\104\122\117\120\40\x46\117\122\x45\x49\107\x4e\x20\x4b\105\x59\40\170\x70\154\x75\147\x69\x6e\x5f\141\x64\x6d\x6f\162\x72\x69\x73\137\x70\x72\x6f\x5f\163\x6c\x69\144\x65\x72\137\x69\x62\x66\153\137\61"); $this->execute("\x41\114\124\x45\122\40\124\101\102\114\105\x20\170\160\154\x75\x67\151\156\x5f\x61\144\x6d\x6f\162\162\x69\163\137\x70\162\157\x5f\x73\x6c\151\144\x65\162\x20\104\122\x4f\120\x20\106\x4f\x52\x45\x49\107\x4e\40\113\x45\x59\x20\x78\x70\154\165\147\x69\x6e\137\x61\144\x6d\x6f\162\x72\x69\x73\x5f\160\x72\157\x5f\x73\154\151\144\145\x72\137\x69\142\146\x6b\137\x32"); $this->execute("\101\114\x54\x45\122\40\x54\101\102\x4c\x45\x20\170\x70\154\x75\x67\x69\x6e\137\x61\144\155\157\162\162\x69\x73\x5f\x70\162\157\x5f\x73\x6c\151\x64\145\162\x20\x44\x52\x4f\x50\x20\156\141\x76\x41\162\162\157\x77\x73\111\x63\157\156\111\144"); $this->execute("\x41\x4c\x54\105\122\40\x54\101\102\x4c\x45\x20\x78\160\x6c\165\x67\151\156\137\x61\x64\x6d\157\162\x72\x69\163\137\160\162\157\x5f\163\154\x69\x64\145\162\x20\x44\x52\117\120\40\x6e\x61\x76\102\165\154\x6c\x65\164\163\111\143\157\x6e\x49\x64"); $this->execute("\101\114\124\x45\122\40\x54\x41\102\114\x45\x20\170\160\x6c\165\147\x69\156\x5f\141\144\155\157\x72\162\x69\163\137\160\x72\x6f\x5f\163\154\x69\144\x65\x20\x44\x52\x4f\x50\x20\155\145\x64\151\141\x54\171\160\x65"); } }