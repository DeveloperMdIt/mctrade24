<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\Migrations; use JTL\Plugin\Migration; use JTL\Update\IMigration; class Migration20240418010100 extends Migration implements IMigration { protected $description = "\123\145\x74\x20\146\157\x6f\164\145\162\x20\160\162\x69\155\141\x72\171\40\x63\x6f\x6c\157\x72\x20\x61\x73\40\160\141\x79\x6d\x65\156\164\40\151\143\157\156\40\x63\x6f\x6c\x6f\x72\x2e"; public function up() { $templateSettings = $this->db->select("\x78\160\x6c\x75\x67\x69\x6e\x5f\x61\144\155\157\162\162\x69\163\x5f\x70\x72\157\137\x74\145\x6d\160\x6c\141\164\145\x5f\x73\145\164\x74\151\156\x67\163", "\151\x64", 1); if (!empty($templateSettings)) { goto X46VF; } return; X46VF: $themeVars = $this->db->select("\170\160\x6c\x75\147\151\x6e\137\141\x64\155\x6f\162\162\x69\163\137\x70\x72\157\x5f\164\x68\145\155\145", "\x69\x64", (int) $templateSettings->themeId); if (!empty($themeVars)) { goto pkvbr; } return; pkvbr: $themeVarsData = json_decode($themeVars->data); $themeVarsData->shippingPaymentLogosFooterColor = $themeVarsData->footerPrimaryColor; $themeVarsData->shippingPaymentLogosDetailsPageColor = $themeVarsData->brandPrimary; $themeVars->data = json_encode($themeVarsData); $themeVars->id = (int) $themeVars->id; $this->db->upsert("\x78\x70\154\x75\147\151\156\137\141\x64\x6d\157\162\162\151\163\x5f\160\162\x6f\x5f\x74\x68\145\x6d\x65", $themeVars); } public function down() { } }