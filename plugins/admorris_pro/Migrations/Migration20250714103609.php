<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\Migrations; use JTL\Plugin\Migration; use JTL\Update\IMigration; class Migration20250714103609 extends Migration implements IMigration { protected $description = "\x53\x65\141\x72\x63\150\40\146\151\145\154\144\40\x73\x74\x79\154\x65\x20\x64\145\146\141\165\154\x74\x20\x76\141\154\165\145\40\x75\x70\x64\141\164\145"; public function up() { $jsonPath = PFAD_ROOT . "\x74\145\155\x70\154\141\x74\145\x73\x2f\141\144\155\x6f\162\162\151\163\x5f\160\162\157\57\x70\x68\x70\57\150\145\x61\144\x65\x72\114\x61\x79\x6f\165\164\x44\141\x74\141\56\x6a\x73\157\156"; if (file_exists($jsonPath)) { goto snEVg; } return; snEVg: $data = json_decode(file_get_contents($jsonPath), true); if (!(!is_array($data) || !isset($data["\151\x74\x65\x6d\x73"]["\x73\145\x61\x72\143\x68"]) || !is_array($data["\x69\164\x65\x6d\x73"]["\163\x65\141\162\x63\150"]))) { goto CS5Wm; } return; CS5Wm: $changed = false; if (isset($data["\151\164\145\x6d\163"]["\163\145\141\162\x63\x68"]["\163\x74\x79\x6c\x65\x44\x65\163\153\164\157\x70"])) { goto us6fV; } $data["\151\164\145\155\x73"]["\163\145\141\162\x63\x68"]["\x73\x74\171\154\145\104\145\163\x6b\164\157\160"] = "\x75\156\144\x65\x72\x6c\151\156\145"; $changed = true; us6fV: if (isset($data["\151\x74\145\155\163"]["\x73\x65\x61\162\143\150"]["\163\x74\x79\x6c\145\x4d\157\142\151\x6c\x65"])) { goto khf15; } $data["\151\164\x65\155\x73"]["\x73\x65\x61\162\143\150"]["\x73\x74\x79\154\145\x4d\157\x62\151\x6c\x65"] = "\165\156\x64\x65\x72\154\x69\156\x65"; $changed = true; khf15: if (!$changed) { goto hsRgD; } file_put_contents($jsonPath, json_encode($data)); hsRgD: } public function down() { $jsonPath = PFAD_ROOT . "\164\x65\x6d\x70\x6c\141\164\145\x73\57\x61\x64\x6d\x6f\162\x72\151\163\x5f\160\162\x6f\57\x70\150\160\57\150\x65\141\144\x65\x72\x4c\141\x79\x6f\x75\164\x44\x61\164\141\56\152\x73\157\x6e"; if (file_exists($jsonPath)) { goto GMPST; } return; GMPST: $data = json_decode(file_get_contents($jsonPath), true); if (!(!is_array($data) || !isset($data["\x69\164\145\155\x73"]["\163\145\x61\162\143\150"]) || !is_array($data["\x69\164\x65\155\163"]["\x73\145\141\162\x63\x68"]))) { goto sI3el; } return; sI3el: $changed = false; if (!(isset($data["\x69\164\145\x6d\x73"]["\163\145\x61\x72\x63\150"]["\x73\x74\x79\x6c\x65\104\145\163\153\x74\x6f\x70"]) && $data["\151\x74\x65\155\x73"]["\163\145\x61\162\x63\x68"]["\x73\164\171\154\x65\x44\145\x73\x6b\x74\157\160"] === "\165\x6e\x64\145\x72\154\x69\156\x65")) { goto G8yfj; } unset($data["\x69\x74\x65\155\163"]["\163\145\141\x72\143\x68"]["\163\164\171\154\145\x44\145\x73\153\164\x6f\x70"]); $changed = true; G8yfj: if (!(isset($data["\x69\x74\x65\x6d\x73"]["\x73\x65\x61\x72\143\x68"]["\163\x74\x79\x6c\145\115\157\142\x69\154\145"]) && $data["\151\x74\x65\155\163"]["\x73\x65\141\162\143\150"]["\163\164\x79\154\x65\x4d\157\x62\151\154\145"] === "\165\x6e\x64\x65\x72\154\x69\x6e\145")) { goto yQg1v; } unset($data["\x69\x74\x65\x6d\x73"]["\163\x65\141\162\143\x68"]["\x73\164\x79\x6c\145\115\157\x62\x69\x6c\x65"]); $changed = true; yQg1v: if (!$changed) { goto I3jQ4; } file_put_contents($jsonPath, json_encode($data)); I3jQ4: } }