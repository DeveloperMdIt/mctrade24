<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\Migrations; use JTL\Plugin\Migration; use JTL\Update\IMigration; use JTL\Shop; class Migration20201215010100 extends Migration implements IMigration { protected $description = "\111\143\157\x6e\163"; public function up() { $this->execute("\103\x52\105\101\124\105\40\124\x41\102\x4c\105\40\x49\106\x20\116\x4f\124\x20\105\x58\x49\123\124\123\40\170\x70\154\x75\x67\151\156\x5f\141\x64\x6d\x6f\162\162\151\163\137\x70\x72\157\137\151\143\157\156\x73\40\50\xa\x20\40\x20\x20\x20\x20\x69\143\x6f\x6e\x49\144\x20\151\156\x74\x20\x4e\x4f\x54\x20\x4e\125\114\x4c\40\x41\125\124\117\x5f\x49\116\x43\122\105\115\x45\x4e\x54\40\120\122\x49\115\x41\122\131\x20\113\105\x59\54\12\40\40\x20\x20\40\x20\143\x61\164\x65\x67\x6f\162\171\40\x76\141\x72\x63\150\141\x72\x28\x32\65\65\x29\x2c\xa\40\x20\x20\x20\40\40\151\x63\157\x6e\x54\x79\160\145\40\x76\x61\162\x63\150\141\162\x28\x32\x35\65\x29\x2c\xa\40\x20\40\40\40\40\x69\143\157\x6e\x46\141\x6d\151\154\x79\x20\166\x61\162\x63\x68\141\162\50\x32\x35\x35\51\54\12\40\40\x20\x20\x20\x20\160\141\x74\150\x4f\162\123\166\147\x20\x54\105\130\124\12\x20\40\x20\40\x29\x20\105\116\107\111\x4e\105\75\x49\x6e\156\157\104\102\x20\x43\110\101\122\x53\x45\x54\x3d\165\164\146\70\x20\103\x4f\x4c\x4c\x41\124\x45\75\x75\164\146\70\137\165\156\x69\143\157\144\x65\137\143\151\x3b"); $this->execute("\103\122\x45\101\x54\x45\x20\124\101\102\114\x45\x20\111\x46\x20\116\x4f\x54\40\x45\130\x49\123\x54\123\x20\x78\160\154\165\147\x69\x6e\x5f\141\x64\155\x6f\x72\x72\151\163\x5f\x70\162\157\x5f\x69\x63\x6f\x6e\163\137\x75\163\x65\144\x20\50\12\x20\40\x20\40\40\40\x69\x64\40\x69\156\164\40\116\x4f\124\40\x4e\x55\x4c\114\x20\x41\125\x54\x4f\x5f\x49\116\x43\x52\105\x4d\105\116\124\40\120\122\x49\115\101\x52\131\x20\x4b\105\x59\x2c\xa\40\40\40\40\x20\40\151\143\157\x6e\124\171\160\x65\x20\x76\x61\x72\143\150\x61\162\50\x32\65\x35\x29\x2c\12\40\x20\x20\x20\x20\x20\x69\x63\157\156\111\144\x20\x69\x6e\164\x2c\xa\40\40\40\x20\40\40\163\151\x7a\x65\115\x75\154\x74\x69\x70\x6c\x69\x65\x72\x20\166\141\162\x63\150\141\x72\x28\x31\60\x29\54\xa\40\x20\x20\40\x20\40\151\143\157\156\106\141\155\x69\154\171\40\166\141\162\x63\150\141\162\50\62\65\x35\51\54\xa\40\x20\x20\40\40\x20\106\x4f\122\105\111\107\116\40\113\105\131\x20\50\151\143\x6f\x6e\x49\x64\51\40\122\105\106\105\x52\x45\x4e\x43\x45\123\40\x78\160\154\x75\147\x69\156\x5f\141\144\x6d\157\x72\x72\x69\163\x5f\x70\162\157\x5f\151\143\157\x6e\163\x28\x69\143\157\156\111\144\x29\12\x20\x20\40\40\51\40\x45\x4e\107\111\x4e\105\x3d\x49\156\x6e\157\x44\102\40\103\110\101\x52\x53\x45\124\x3d\x75\164\x66\70\x20\103\117\114\x4c\101\x54\x45\75\x75\x74\146\70\x5f\x75\x6e\x69\143\x6f\144\145\137\x63\x69\73"); $iconsFile = file_get_contents(dirname(__FILE__) . "\x2f" . "\x69\x63\157\156\x73\x2e\152\x73\157\x6e"); $jsonIcons = json_decode($iconsFile); foreach ($jsonIcons as $categoryKey => $categories) { foreach ($categories as $iconTypesKey => $iconTypes) { foreach ($iconTypes as $iconFamilyKey => $iconFamilies) { foreach ($iconFamilies as $icon) { $this->execute("\x49\x4e\x53\105\x52\124\40\111\x4e\x54\x4f\x20\x78\160\x6c\x75\147\x69\x6e\137\141\x64\155\157\162\x72\151\163\x5f\160\162\x6f\x5f\x69\143\x6f\156\x73\x20\x56\x41\x4c\x55\x45\x53\40\50\47\47\54\x20\x27{$categoryKey}\47\x2c\40\x27{$iconTypesKey}\x27\x2c\40\47{$iconFamilyKey}\47\x2c\x20\47{$icon}\47\x29\x3b"); NUnrG: } ypxD8: v2qi6: } oStKL: mp0CJ: } uD0d3: i2sVv: } B90gW: $defaultIcons = Shop::Container()->getDB()->query("\123\x45\114\105\x43\124\x20\x49\143\157\156\111\x64\54\40\151\x63\157\156\x54\171\160\145\54\x20\x69\x63\157\156\106\141\155\151\x6c\171\x20\x46\x52\117\x4d\x20\x78\160\x6c\x75\147\151\x6e\x5f\141\x64\155\157\x72\162\x69\x73\137\160\162\157\x5f\151\143\x6f\x6e\163\40\127\x48\105\122\105\x20\151\x63\x6f\x6e\106\141\155\151\x6c\171\x20\x3d\40\x27\146\x6f\156\x74\101\167\x65\163\x6f\155\145\x34\47\40\x4f\x52\x44\105\122\40\102\131\40\151\143\157\x6e\x54\171\160\145\x3b", 2); $lastIconType = $defaultIcons[0]->iconType; $firstId = intval($defaultIcons[0]->IconId); $firstIconFamily = $defaultIcons[0]->iconFamily; $this->execute("\111\x4e\123\105\122\124\x20\111\116\x54\117\x20\x78\160\154\165\x67\151\x6e\x5f\x61\x64\x6d\157\x72\162\x69\163\x5f\x70\162\157\137\151\143\x6f\x6e\x73\x5f\165\x73\145\144\x20\126\x41\x4c\125\105\123\40\x28\47\x27\x2c\40\47{$lastIconType}\47\x2c\x20\x27{$firstId}\x27\54\40\47\61\47\54\x20\x27{$firstIconFamily}\47\51\x3b"); foreach ($defaultIcons as $defaultIcon) { $newIconType = $defaultIcon->iconType; $currentId = intval($defaultIcon->IconId); $iconFamily = $defaultIcon->iconFamily; if (!($newIconType !== $lastIconType)) { goto IIQ1g; } $this->execute("\111\x4e\123\105\x52\x54\x20\111\116\x54\117\x20\x78\160\154\x75\147\151\x6e\137\x61\144\155\x6f\x72\x72\151\163\x5f\x70\x72\x6f\137\x69\143\157\x6e\163\x5f\165\x73\x65\x64\40\x56\x41\x4c\125\x45\x53\x20\x28\47\47\54\40\47{$newIconType}\47\x2c\x20\x27{$currentId}\47\54\40\47\x31\47\x2c\x20\x27{$iconFamily}\47\x29\73"); $lastIconType = $newIconType; IIQ1g: FHMWx: } LvKNN: $this->execute("\x49\x4e\x53\x45\x52\x54\40\111\x4e\124\x4f\40\x74\x74\145\155\160\154\x61\x74\x65\x65\x69\156\163\x74\145\154\x6c\165\156\x67\145\x6e\40\x56\101\114\125\x45\123\x20\50\47\x61\144\155\x6f\x72\162\151\x73\137\x70\x72\157\x27\x2c\40\x27\147\x65\156\x65\x72\x61\154\47\54\x20\47\147\154\x6f\x62\141\x6c\111\143\x6f\x6e\x53\151\x7a\145\x4d\x75\x6c\164\x69\x70\x6c\151\145\162\x27\54\40\47\x31\x27\51\73"); } public function down() { $this->execute("\123\105\x54\x20\x46\x4f\x52\x45\x49\107\x4e\137\x4b\105\131\137\x43\110\105\x43\113\x53\x20\x3d\40\60"); $this->execute("\104\122\x4f\120\x20\x54\x41\102\x4c\105\40\111\106\40\105\130\111\123\124\123\40\x78\x70\x6c\x75\147\x69\x6e\x5f\141\x64\x6d\x6f\x72\x72\151\x73\137\x70\x72\x6f\x5f\x69\143\157\x6e\163\137\165\163\x65\x64"); $this->execute("\104\x52\x4f\x50\40\124\101\102\114\105\40\x49\x46\x20\105\130\x49\123\124\x53\x20\x78\160\154\x75\147\151\156\137\x61\144\155\x6f\162\162\151\x73\137\160\162\x6f\x5f\x69\x63\157\x6e\x73"); $this->execute("\x53\105\124\x20\106\117\122\105\x49\x47\x4e\137\x4b\x45\131\x5f\103\x48\105\103\x4b\123\x20\x3d\40\61"); } }