<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\Migrations; use JTL\Plugin\Migration; use JTL\Shop; use JTL\Update\IMigration; class Migration20240118010100 extends Migration implements IMigration { protected $description = "\x41\x64\144\40\x6e\145\x77\x20\x76\x61\154\x75\145\163\x20\146\157\162\x20\156\x65\x77\x20\155\157\142\x69\x6c\x65\40\155\145\156\x75\40\x73\145\164\164\151\x6e\x67\163\x20\164\x6f\40\x74\150\145\x6d\x65\x20\166\141\162\x69\141\142\154\145\x73\x2e\x20\103\157\160\171\40\x66\162\x6f\155\40\x65\170\151\x73\164\x69\156\x67\x20\x64\x65\163\153\x74\157\160\40\155\145\x6e\165\40\163\x65\164\164\x69\x6e\x67\163\x2e"; public function up() { $templateSettings = $this->db->select("\x78\x70\154\x75\x67\151\156\x5f\141\x64\155\157\162\x72\151\x73\x5f\x70\162\157\137\x74\145\x6d\160\x6c\141\x74\x65\137\x73\x65\164\x74\x69\156\147\163", "\151\x64", 1); if (!empty($templateSettings)) { goto zTYrc; } return; zTYrc: $themeVars = $this->db->select("\170\160\154\165\147\151\x6e\x5f\x61\144\155\157\x72\x72\151\x73\137\x70\162\157\x5f\x74\150\145\155\145", "\151\x64", (int) $templateSettings->themeId); if (!empty($themeVars)) { goto RvWYf; } return; RvWYf: $themeVarsData = json_decode($themeVars->data); $mobileHeaderVars = ["\150\x65\141\144\x65\x72\x52\x6f\167\102\147\x43\157\154\x6f\162\x4d\157\x62\x69\x6c\145\x31", "\150\145\x61\x64\145\x72\x52\x6f\x77\x42\147\103\157\154\157\162\x4d\x6f\142\x69\154\145\62", "\150\x65\x61\x64\x65\x72\x52\157\167\102\147\103\157\154\157\162\x4d\157\x62\151\154\145\x33", "\x68\x65\x61\144\x65\x72\122\x6f\167\x54\145\x78\164\x43\x6f\154\x6f\162\115\157\x62\x69\154\x65\x31", "\x68\145\x61\x64\x65\x72\122\157\x77\124\145\x78\164\103\x6f\x6c\x6f\x72\x4d\x6f\142\x69\x6c\x65\62", "\x68\145\x61\x64\145\162\122\157\x77\x54\145\170\164\x43\x6f\x6c\157\x72\115\157\x62\x69\x6c\145\x33", "\x68\145\x61\x64\145\162\122\157\167\106\x6f\x6e\164\123\151\x7a\x65\115\157\142\151\x6c\145\x31", "\x68\145\x61\144\x65\x72\x52\x6f\x77\x46\157\x6e\164\x53\x69\x7a\145\115\x6f\142\151\x6c\x65\62", "\x68\x65\141\144\145\x72\122\x6f\x77\x46\157\156\164\123\151\x7a\145\115\157\142\x69\154\145\x33", "\150\145\x61\x64\x65\162\122\157\167\102\x67\x43\157\154\157\162\117\x76\x65\x72\154\141\x79\x4d\x6f\142\x69\154\x65\61", "\150\145\x61\144\x65\162\122\x6f\167\102\x67\x43\157\154\x6f\x72\x4f\x76\x65\162\154\141\171\115\157\x62\151\x6c\145\62", "\150\x65\141\144\145\162\122\x6f\x77\x42\147\103\157\154\157\x72\117\166\145\x72\154\x61\171\x4d\x6f\x62\151\x6c\145\63", "\x68\145\x61\144\x65\x72\122\157\x77\124\145\170\x74\x43\x6f\154\x6f\162\x4f\x76\x65\x72\154\x61\171\115\x6f\x62\x69\154\x65\x31", "\150\x65\141\144\145\x72\122\x6f\167\124\x65\x78\164\103\157\x6c\157\162\117\x76\145\162\154\141\x79\x4d\157\142\x69\x6c\145\62", "\x68\x65\x61\x64\145\162\x52\x6f\x77\x54\x65\170\164\103\157\x6c\157\x72\x4f\166\145\162\154\x61\x79\115\157\x62\151\154\x65\63", "\150\x65\141\144\x65\x72\x52\x6f\167\124\x65\170\x74\x54\162\x61\x6e\163\x66\x6f\162\x6d\x4d\157\x62\x69\154\x65\61", "\x68\x65\141\144\x65\x72\x52\x6f\x77\x54\145\170\164\x54\162\141\x6e\x73\x66\157\162\155\x4d\157\142\x69\154\145\62", "\x68\145\x61\144\145\162\x52\157\167\124\x65\170\x74\124\162\x61\156\163\146\x6f\162\x6d\115\157\142\151\154\x65\63", "\x68\x65\x61\144\x65\x72\x52\x6f\x77\106\x6f\156\164\x57\x65\151\x67\x68\164\115\x6f\142\151\154\x65\x31", "\x68\x65\x61\144\145\162\x52\x6f\x77\106\157\156\164\x57\145\x69\147\150\164\x4d\157\x62\151\x6c\145\x32", "\150\145\141\x64\145\162\122\157\x77\106\x6f\156\x74\127\145\x69\x67\150\164\115\157\142\151\x6c\x65\x33", "\150\x65\x61\x64\145\162\122\x6f\x77\x50\141\x64\144\151\x6e\x67\124\157\160\115\157\x62\151\154\x65\x31", "\150\145\x61\x64\145\162\x52\x6f\167\x50\141\x64\144\151\156\x67\124\157\x70\115\x6f\x62\x69\154\x65\x32", "\x68\x65\x61\x64\x65\x72\x52\157\x77\120\x61\x64\144\x69\x6e\x67\x54\157\x70\x4d\157\x62\x69\154\x65\63", "\150\x65\141\x64\145\x72\122\157\x77\120\141\144\x64\x69\x6e\x67\102\157\164\x74\x6f\155\115\x6f\x62\151\154\x65\61", "\x68\145\141\144\145\162\122\157\167\x50\x61\144\x64\x69\x6e\147\x42\x6f\164\x74\157\x6d\x4d\157\142\151\154\x65\x32", "\x68\x65\x61\x64\145\x72\122\x6f\x77\x50\x61\x64\144\151\x6e\x67\102\x6f\x74\x74\157\155\115\157\142\x69\154\145\x33"]; foreach ($mobileHeaderVars as $mobileVar) { $desktopVar = substr($mobileVar, 0, -7) . substr($mobileVar, -1); if (!isset($themeVarsData->{$desktopVar})) { goto jZYsb; } $themeVarsData->{$mobileVar} = $themeVarsData->{$desktopVar}; jZYsb: aCQjJ: } ayAjo: $themeVars->data = json_encode($themeVarsData); $themeVars->id = (int) $themeVars->id; $this->db->upsert("\170\x70\x6c\x75\147\x69\x6e\137\x61\144\x6d\157\162\162\151\163\x5f\x70\x72\157\137\164\150\145\x6d\x65", $themeVars); } public function down() { } }