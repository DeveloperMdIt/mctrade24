<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\Migrations; use JTL\Plugin\Migration; use JTL\Update\IMigration; use JTL\Shop; class Migration20210601010100 extends Migration implements IMigration { protected $description = "\x41\144\144\x20\162\145\x63\x65\x6e\164\x20\x76\151\163\151\164\163\x20\151\x63\157\156\x20\x74\x6f\40\x69\143\157\x6e\x73\x5f\165\x73\x65\x64\40\x74\141\x62\154\145"; public function up() { $lookUp = "\x72\145\x63\x65\156\164\x53\141\154\145\163"; $query = "\123\x45\x4c\x45\103\124\x20\x2a\x20\106\122\x4f\115\40\170\x70\x6c\x75\147\x69\156\137\x61\144\155\157\x72\x72\151\163\137\160\x72\x6f\137\151\x63\x6f\156\x73\137\165\x73\145\144\40\127\110\105\x52\x45\x20\x69\x63\157\x6e\124\171\x70\145\40\x3d\40\72\151\143\x6f\156\124\171\x70\x65"; $recentSalesIcon = Shop::Container()->getDB()->queryPrepared($query, ["\151\143\157\156\124\171\x70\145" => $lookUp], 1); $data = new \stdClass(); $data->iconType = "\162\145\143\x65\156\x74\126\151\x73\x69\x74\x73"; $data->iconId = $recentSalesIcon->iconId; $data->sizeMultiplier = "\61"; $data->iconFamily = $recentSalesIcon->iconFamily; Shop::Container()->getDB()->insert("\x78\160\154\x75\x67\x69\x6e\137\141\144\x6d\157\x72\162\x69\x73\137\x70\162\157\x5f\x69\143\x6f\156\163\x5f\165\x73\145\x64", $data); } public function down() { Shop::Container()->getDB()->delete("\170\160\x6c\x75\147\x69\x6e\x5f\141\144\x6d\157\x72\x72\x69\x73\x5f\x70\x72\157\x5f\x69\x63\157\x6e\163\x5f\x75\x73\145\144", "\x69\143\x6f\156\124\x79\160\145", "\x72\145\143\145\156\164\x56\151\163\x69\x74\x73"); } }