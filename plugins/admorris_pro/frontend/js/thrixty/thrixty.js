!function(){"use strict";var t={"./src/Thrixty.ts":
/*!************************!*\
    !*** ./src/Thrixty.ts ***!
    \************************/
function(t,e,i){i.r(e),i.d(e,{Thrixty:function(){return o}});var s=i(/*! ./ThrixtyPlayer */"./src/ThrixtyPlayer.ts");class o{static is_initialized=!1;static get version(){return"3.0"}static players=[];static get mainpath(){let t=document.getElementsByTagName("script"),e=t[t.length-1].src.split("/");return e.pop(),e.join("/")+"/"}static logs={main_log:[],player_logs:[[]]};static icons={fullsize_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' fill='#000000' points='18.5,18.5 42.566,18.5 42.566,25.72 25.72,25.72 25.72,42.566 18.5,42.566'/><polygon class='icon_polygons' fill='#000000' points='81.5,18.5 81.5,42.566 74.283,42.566 74.283,25.72 57.435,25.72 57.435,18.5'/><polygon class='icon_polygons' fill='#000000' points='18.5,81.5 18.5,57.435 25.72,57.435 25.72,74.283 42.566,74.283 42.566,81.5'/><polygon class='icon_polygons' fill='#000000' points='81.5,81.5 57.435,81.5 57.435,74.283 74.283,74.283 74.283,57.435 81.5,57.435'/>",load_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' points='35.481,12.501 35.481,87.501 81.519,50.217' fill='#000000'/>",next_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' fill='#000000' points='44.587,87.5 90.641,50.217 44.587,12.5'/><polygon class='icon_polygons' fill='#000000' points='37.139,87.5 28.156,87.5 28.156,12.5 37.139,12.5'/>",normalsize_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' fill='#000000' points='35.348,18.5 42.565,18.5 42.565,42.566 18.5,42.566 18.5,35.348 35.348,35.348'/><polygon class='icon_polygons' fill='#000000' points='18.5,64.652 18.5,57.435 42.565,57.435 42.565,81.5 35.348,81.5 35.348,64.652'/><polygon class='icon_polygons' fill='#000000' points='64.652,81.5 57.435,81.5 57.435,57.435 81.5,57.435 81.5,64.652 64.652,64.652'/><polygon class='icon_polygons' fill='#000000' points='81.5,35.348 81.5,42.566 57.435,42.566 57.435,18.5 64.652,18.5 64.652,35.348'/>",pause_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' points='36.5,12.5 45.5,12.5 45.5,87.5 36.5,87.5' fill='#000000'/><polygon class='icon_polygons' points='54.5,12.5 63.5,12.5 63.5,87.5 54.5,87.5' fill='#000000'/>",play_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' points='35.481,12.501 35.481,87.501 81.519,50.217' fill='#000000'/>",prev_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' fill='#000000' points='55.413,12.5 9.359,50.217 55.413,87.5'/><polygon class='icon_polygons' fill='#000000' points='62.862,12.5 71.844,12.5 71.844,87.5 62.862,87.5'/>",zoom_in_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' fill='#000000' points='45.5,12.5 54.5,12.5 54.5,45.5 87.5,45.5 87.5,54.5 54.5,54.5 54.5,87.5 45.5,87.5 45.5,54.5 12.5,54.5 12.5,45.5 45.5,45.5'/>",zoom_out_icon:"<circle class='icon_backgrounds' stroke-width='3' cx='50' cy='50' r='47' fill='transparent' stroke='black'/><polygon class='icon_polygons' fill='#000000' points='12.5,45.5 87.5,45.5 87.5,54.5 12.5,54.5'/>"};static get is_mobile(){let t=window.innerWidth;return window.innerHeight>t||t<960}static log(t,e){-1!==e?this.logs.player_logs[e]?this.logs.player_logs[e].push(t):this.logs.player_logs[e]=[t]:this.logs.main_log.push(t)}static export_logs(){return JSON.stringify(this.logs)}static create_element(t){let e=document.createElement("div");return e.innerHTML=t,e.children[0]}static add_touch_click_event(t,e){let i=!1;t.addEventListener("touchstart",(t=>{i=!0,t.preventDefault()})),t.addEventListener("touchend",(t=>{e(),i=!1,t.preventDefault()}))}static add_mouse_hold_event(t,e,i){let s=0;t.addEventListener("mouseup",(function(t){clearInterval(s),t.preventDefault()})),t.addEventListener("mouseout",(function(t){clearInterval(s),t.preventDefault()})),t.addEventListener("mousedown",(function(t){if(t.button>1)clearInterval(s);else{e(t),s=setInterval(e,i)}t.preventDefault()}))}static add_touch_hold_event(t,e,i){let s=0;t.addEventListener("touchend",(function(t){clearInterval(s),t.preventDefault()})),t.addEventListener("touchstart",(function(t){e(t),s=setInterval(e,i),t.preventDefault()}))}static throttle(t,e){let i,s,o=!1;return function a(){if(o)return i=arguments,void(s=this);o=!0,t.apply(this,arguments),setTimeout((function(){o=!1,i&&(a.apply(s,i),i=s=null)}),e)}}static init(){if(this.is_initialized)return;this.is_initialized=!0,o.log("Initializing Thrixty...",-1);let t=document.querySelectorAll("div.thrixty"),e=t.length;for(let i=0;i<e;i++){let e=t[i];new s.ThrixtyPlayer(e)}}}window.addEventListener("DOMContentLoaded",o.init)},"./src/ThrixtyPlayer.ts":
/*!******************************!*\
    !*** ./src/ThrixtyPlayer.ts ***!
    \******************************/
function(t,e,i){i.r(e),i.d(e,{ThrixtyPlayer:function(){return o}});var s=i(/*! ./Thrixty */"./src/Thrixty.ts");class o{constructor(t){if(s.Thrixty.players.push(this),this.player_id=s.Thrixty.players.indexOf(this),this.root_element=t,this.root_element_parent=this.root_element.parentElement,this.root_element.getAttribute("tabindex")||this.root_element.setAttribute("tabindex",String(this.player_id)),this.root_element.setAttribute("thrixty","found"),this.settings={basepath:"",localization_path:"./thrixty/text.json",filelist_path_small:"small/Filelist.txt",filelist_path_large:"large/Filelist.txt",reversed_play_direction:!1,reversed_drag_direction:!1,autoplay:-1,autoload:!s.Thrixty.is_mobile,start_image_id:0,cycle_duration:5,zoom_control:"progressive",zoom_mode:"outbox",zoom_mode_mobile:"inbox",zoom_pointer:"marker",marker_mode:"new",sensitivity_x:20,sensitivity_y:50},this.events_assigned=!1,this.can_zoom=null,this.canvas_size=null,this.is_zoomed=!1,this.is_fullpage=!1,this.is_rotating=!1,this.rotation_id=0,this.rotation_count=-1,this.rotation_delay=100,this.rotation_speed_modifiers=[.1,.2,.4,.6,.8,1,1.4,2,2.5,3.2,4],this.rotation_speed_selected=5,this.DOM_obj={showroom:s.Thrixty.create_element("<div id='showroom_"+(this.player_id+1)+"' class='thrixty_showroom'></div>"),canvas_container:s.Thrixty.create_element("<div id='canvas_container_"+(this.player_id+1)+"' class='thrixty_canvas_container'></div>"),bg_canvas:s.Thrixty.create_element("<canvas id='bg_canvas_"+(this.player_id+1)+"' class='canvas thrixty_bg_canvas' width='0' height='0'></canvas>"),main_canvas:s.Thrixty.create_element("<canvas id='main_canvas_"+(this.player_id+1)+"' class='canvas thrixty_main_canvas' width='0' height='0'></canvas>"),minimap_canvas:s.Thrixty.create_element("<canvas id='minimap_canvas_"+(this.player_id+1)+"' class='canvas thrixty_minimap_canvas' width='0' height='0'></canvas>"),marker:s.Thrixty.create_element("<div id='marker_"+(this.player_id+1)+"' class='thrixty_marker'></div>"),progress_container:s.Thrixty.create_element("<div id='progress_container_"+(this.player_id+1)+"' class='thrixty_progress_container'></div>"),small_progress_bar:s.Thrixty.create_element("<div id='small_progress_bar_"+(this.player_id+1)+"' class='thrixty_small_progress_bar' thrixty-state='unloaded'></div>"),controls:s.Thrixty.create_element("<div class='thrixty_controls'></div>"),control_container_one:s.Thrixty.create_element("<div class='thrixty_control_container_one'></div>"),prev_btn:s.Thrixty.create_element("<button type='button' id='prev_btn_"+(this.player_id+1)+"' class='ctrl_buttons thrixty_prev_btn'></button>"),prev_icon:s.Thrixty.create_element("<svg id='prev_icon_"+(this.player_id+1)+"' class='icons thrixty_prev_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.prev_icon+"</svg>"),play_btn:s.Thrixty.create_element("<button type='button' id='play_btn_"+(this.player_id+1)+"' class='ctrl_buttons thrixty_play_btn' thrixty-state='pause'></button>"),play_icon:s.Thrixty.create_element("<svg id='play_icon_"+(this.player_id+1)+"' class='icons thrixty_play_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.play_icon+"</svg>"),pause_icon:s.Thrixty.create_element("<svg id='pause_icon_"+(this.player_id+1)+"' class='icons thrixty_pause_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.pause_icon+"</svg>"),next_btn:s.Thrixty.create_element("<button type='button' id='next_btn_"+(this.player_id+1)+"' class='ctrl_buttons thrixty_next_btn'></button>"),next_icon:s.Thrixty.create_element("<svg id='next_icon_"+(this.player_id+1)+"' class='icons thrixty_next_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.next_icon+"</svg>"),zoom_btn:s.Thrixty.create_element("<button type='button' id='zoom_btn_"+(this.player_id+1)+"' class='ctrl_buttons thrixty_zoom_btn' thrixty-state='zoomed_out'></button>"),zoom_in_icon:s.Thrixty.create_element("<svg id='zoom_in_icon_"+(this.player_id+1)+"' class='icons thrixty_zoom_in_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.zoom_in_icon+"</svg>"),zoom_out_icon:s.Thrixty.create_element("<svg id='zoom_out_icon_"+(this.player_id+1)+"' class='icons thrixty_zoom_out_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.zoom_out_icon+"</svg>"),size_btn:s.Thrixty.create_element("<button type='button' id='size_btn_"+(this.player_id+1)+"' class='ctrl_buttons thrixty_size_btn' thrixty-state='normalsized'></button>"),fullsize_icon:s.Thrixty.create_element("<svg id='fullsize_icon_"+(this.player_id+1)+"' class='icons thrixty_fullsize_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.fullsize_icon+"</svg>"),normalsize_icon:s.Thrixty.create_element("<svg id='normalsize_icon_"+(this.player_id+1)+"' class='icons thrixty_normalsize_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.normalsize_icon+"</svg>"),close_btn:s.Thrixty.create_element("<button type='button' id='close_btn_"+(this.player_id+1)+"' class='thrixty_close_btn'></button>"),close_icon:s.Thrixty.create_element("<span class='thrixty_close_icon'>Ã—</span>"),rotation_speed_gauge:s.Thrixty.create_element("<input type='range' id='rotation_speed_gauge_"+(this.player_id+1)+"' class='thrixty_rotation_speed_gauge' min='0' max='10' value='5'>"),load_overlay:s.Thrixty.create_element("<div id='load_overlay_"+(this.player_id+1)+"' class='thrixty_load_overlay'></div>"),load_btn:s.Thrixty.create_element("<button type='button' id='load_btn_"+(this.player_id+1)+"' class='thrixty_load_btn'></button>"),load_icon:s.Thrixty.create_element("<svg id='load_icon_"+(this.player_id+1)+"' class='icons thrixty_load_icon' viewBox='0 0 100 100'>"+s.Thrixty.icons.load_icon+"</svg>"),zoom_advisory:s.Thrixty.create_element("<div id='zoom_advisory_"+(this.player_id+1)+"' class='thrixty_zoom_advisory'></div>"),zoom_canvas:document.getElementById("thrixty_zoom_canvas_"+(this.player_id+1))},!this.DOM_obj.zoom_canvas)throw Error("No zoom canvas found for player id "+this.player_id);this.DOM_obj.zoom_canvas.setAttribute("thrixty","found"),this.small={filepath:"",filelist_content:"",filelist_loaded:null,images_count:0,images_loaded:0,images_errored:0,images:[],context:"small",image_width:0,image_height:0,image_ratio:0,active_image_id:0},this.large={filepath:"",filelist_content:"",filelist_loaded:null,images_count:0,images_loaded:0,images_errored:0,images:[],context:"large",image_width:0,image_height:0,image_ratio:0,active_image_id:0},this.object_turn={prepared:!1,start_x:null,start_y:null,last_x:null,last_y:null},this.is_click=!1,this.prev_btn_event_vars={iv_id:0},this.relative_mouse={x:0,y:0},this.section_move={prepared:!1,minimap:!1},this.pixel_per_degree=2,this.draw_current_image=s.Thrixty.throttle(this.draw_current_image,40),s.Thrixty.log("Player (id == "+ +this.player_id+") initializing.",this.player_id),this.#t()}#t(){this.#e(),this.#i(),this.#s(),!1!==this.can_zoom&&this.#o()}#e(){let t=this.root_element.attributes;for(let e of t){let t=e.value.trim();switch(e.name){case"thrixty-basepath":""!=t&&(this.settings.basepath=t);break;case"thrixty-localization-path":""!=t&&(this.settings.localization_path=t);break;case"thrixty-filelist-path-small":""!=t&&(this.settings.filelist_path_small=t);case"thrixty-filelist-path-large":""!=t&&(this.settings.filelist_path_large=t);case"thrixty-play-direction":switch(t){case"normal":this.settings.reversed_play_direction=!1;break;case"reverse":case"reversed":this.settings.reversed_play_direction=!0}break;case"thrixty-drag-direction":switch(t){case"normal":this.settings.reversed_drag_direction=!1;break;case"reverse":case"reversed":this.settings.reversed_drag_direction=!0}break;case"thrixty-autoload":if(s.Thrixty.is_mobile)this.settings.autoload=!1;else switch(t){case"on":this.settings.autoload=!0;break;case"off":this.settings.autoload=!1}break;case"thrixty-autoplay":switch(t){case"on":case"-1":this.settings.autoplay=-1;break;case"off":case"0":this.settings.autoplay=0;break;default:let e=parseInt(t);e>0&&(this.settings.autoplay=e)}break;case"thrixty-start-image-id":let e=parseInt(t);e>=0&&(this.settings.start_image_id=e);break;case"thrixty-cycle-duration":if(""!=t){let e=parseInt(t);e>0&&(this.settings.cycle_duration=e)}break;case"thrixty-zoom-control":switch(t){case"progressive":case"classic":this.settings.zoom_control=t}break;case"thrixty-zoom-mode":switch(t){case"inbox":case"outbox":case"none":this.settings.zoom_mode=t}break;case"thrixty-zoom-mode-mobile":switch(t){case"inbox":case"outbox":case"none":this.settings.zoom_mode_mobile=t}break;case"thrixty-zoom-pointer":switch(t){case"minimap":case"marker":this.settings.zoom_pointer=t;break;case"none":case"":this.settings.zoom_pointer=""}break;case"thrixty-marker-mode":switch(t){case"new":case"old":this.settings.marker_mode=t}break;case"thrixty-sensitivity-x":if(""!=t){let e=parseInt(t);e>=0&&(this.settings.sensitivity_x=e)}break;case"thrixty-sensitivity-y":if(""!=t){let e=parseInt(t);e>=0&&(this.settings.sensitivity_y=e)}}let i=this.settings.basepath,o=this.settings.basepath;""!=i&&(i+="/"===i.charAt(i.length-1)?"":"/"),""!=o&&(o+="/"===o.charAt(o.length-1)?"":"/"),i+=this.settings.filelist_path_small,o+=this.settings.filelist_path_large,this.small.filepath=i,this.large.filepath=o}}#i(){this.can_zoom=!0}#s(){let t=this,e=new XMLHttpRequest;e.open("get",this.small.filepath,!0),e.onreadystatechange=function(){4==this.readyState&&(200==this.status?(s.Thrixty.log("basic (small) filelist found",t.player_id),t.small.filelist_loaded=!0,t.small.filelist_content=e.responseText):(s.Thrixty.log("basic (small) filelist not found",t.player_id),t.small.filelist_loaded=!1),t.#a())},e.send(null)}#o(){let t=this,e=new XMLHttpRequest;e.open("get",this.large.filepath,!0),e.onreadystatechange=function(){4==e.readyState&&(200==e.status?(s.Thrixty.log("large filelist found",t.player_id),t.large.filelist_loaded=!0,t.large.filelist_content=e.responseText,t.can_zoom=!0):(s.Thrixty.log("large filelist not found",t.player_id),t.large.filelist_loaded=!1,t.can_zoom=!1),t.#a())},e.send(null)}#a(){null!==this.small.filelist_loaded&&null!==this.large.filelist_loaded&&this.#n()}#n(){this.#l(),this.can_zoom&&this.#_(),this.#r(),this.#h(),this.#c(),this.#m(),this.settings.autoload?(this.#d(),"new"==this.settings.marker_mode&&this.#g()):this.#p(0),this.can_zoom&&this.#u(0)}#l(){this.small.images=[];let t=this.#b(this.small.filelist_content),e=t.length;this.small.images_count=e;for(let i=0;i<e;i++){let e={id:i,source:t[i],elem_loaded:null,to_small:null,to_large:null,element:document.createElement("img")};e.element.addEventListener("load",this.#y.bind(this,i)),e.element.addEventListener("error",this.#y.bind(this,i)),this.small.images.push(e)}}#_(){this.large.images=[];let t=this.#b(this.large.filelist_content),e=t.length;this.large.images_count=e;for(let i=0;i<e;i++){let e={id:i,source:t[i],elem_loaded:null,to_small:null,to_large:null,element:document.createElement("img")};e.element.addEventListener("load",this.#v.bind(this,i)),e.element.addEventListener("error",this.#v.bind(this,i)),this.large.images.push(e)}}#r(){this.root_element.style.display="none",this.DOM_obj.minimap_canvas.style.display="none",this.DOM_obj.marker.style.display="none",this.DOM_obj.close_btn.style.display="none",this.DOM_obj.size_btn.setAttribute("disabled","disabled"),this.DOM_obj.prev_btn.setAttribute("disabled","disabled"),this.DOM_obj.play_btn.setAttribute("disabled","disabled"),this.DOM_obj.next_btn.setAttribute("disabled","disabled"),this.DOM_obj.zoom_btn.setAttribute("disabled","disabled"),this.root_element.appendChild(this.DOM_obj.showroom),this.DOM_obj.showroom.appendChild(this.DOM_obj.canvas_container),this.DOM_obj.showroom.appendChild(this.DOM_obj.close_btn),this.DOM_obj.close_btn.appendChild(this.DOM_obj.close_icon),this.DOM_obj.canvas_container.appendChild(this.DOM_obj.bg_canvas),this.DOM_obj.canvas_container.appendChild(this.DOM_obj.main_canvas),this.DOM_obj.canvas_container.appendChild(this.DOM_obj.minimap_canvas),this.DOM_obj.canvas_container.appendChild(this.DOM_obj.marker),this.DOM_obj.showroom.appendChild(this.DOM_obj.progress_container),this.DOM_obj.progress_container.appendChild(this.DOM_obj.small_progress_bar),this.root_element.appendChild(this.DOM_obj.controls),this.DOM_obj.controls.appendChild(this.DOM_obj.control_container_one),this.DOM_obj.control_container_one.appendChild(this.DOM_obj.prev_btn),this.DOM_obj.prev_btn.appendChild(this.DOM_obj.prev_icon),this.DOM_obj.control_container_one.appendChild(this.DOM_obj.play_btn),this.DOM_obj.play_btn.appendChild(this.DOM_obj.play_icon),this.DOM_obj.play_btn.appendChild(this.DOM_obj.pause_icon),this.DOM_obj.control_container_one.appendChild(this.DOM_obj.next_btn),this.DOM_obj.next_btn.appendChild(this.DOM_obj.next_icon),this.DOM_obj.control_container_one.appendChild(this.DOM_obj.zoom_btn),this.DOM_obj.zoom_btn.appendChild(this.DOM_obj.zoom_in_icon),this.DOM_obj.zoom_btn.appendChild(this.DOM_obj.zoom_out_icon),this.DOM_obj.control_container_one.appendChild(this.DOM_obj.size_btn),this.DOM_obj.size_btn.appendChild(this.DOM_obj.fullsize_icon),this.DOM_obj.size_btn.appendChild(this.DOM_obj.normalsize_icon),this.settings.autoload||(this.root_element.appendChild(this.DOM_obj.load_overlay),this.DOM_obj.load_overlay.appendChild(this.DOM_obj.load_btn),this.DOM_obj.load_btn.appendChild(this.DOM_obj.load_icon)),this.root_element.appendChild(this.DOM_obj.zoom_advisory),s.Thrixty.is_mobile&&(this.DOM_obj.size_btn.style.display="none"),this.#f()}#p(t){let e=this.small.images[t].source;this.small.images[t].element.src=e}#d(){let t=this.small.images_count;for(let e=0;e<t;e++)this.#p(e);let e=new CustomEvent("thrixty:images-loaded",{detail:{player_id:this.player_id}});this.root_element.dispatchEvent(e)}#u(t){let e=this.large.images[t].source;this.large.images[t].element.src=e}#g(){let t=this.large.images_count;for(let e=0;e<t;e++)this.#u(e)}#b(t){let e=[];return e=t.replace(/['"\s]/g,"").split(","),this.settings.reversed_drag_direction&&e.reverse(),e}#x(t,e){"load"===e.type?(this.#D(t),this.#j(0),this.root_element.style.display="",this.#M(),this.draw_current_image()):s.Thrixty.log("SMALL SIZING IMAGE WAS NOT FOUND",this.player_id)}#O(t,e){"load"===e.type?(this.small.images_loaded++,this.small.images[t].elem_loaded=!0,s.Thrixty.log("small image "+t+" loaded ("+this.small.images[t].element.src+")",this.player_id)):"error"===e.type&&(this.small.images_errored++,this.small.images[t].elem_loaded=!1,s.Thrixty.log("small image "+t+" errored ("+this.small.images[t].element.src+")",this.player_id)),this.#w()}#y(t,e){null===this.small.images[t].elem_loaded&&(this.#z(this.settings.start_image_id),this.#O(t,e),0==t&&this.#x(t,e),this.small.images_loaded+this.small.images_errored===this.small.images_count&&(this.DOM_obj.prev_btn.removeAttribute("disabled"),this.DOM_obj.play_btn.removeAttribute("disabled"),this.DOM_obj.next_btn.removeAttribute("disabled"),this.DOM_obj.zoom_btn.removeAttribute("disabled"),this.DOM_obj.size_btn.removeAttribute("disabled"),this.#z(this.settings.start_image_id),this.settings.autoplay<0?(this.#k(),s.Thrixty.log("Autoplay infinite.",this.player_id)):0==this.settings.autoplay?s.Thrixty.log("No autoplay.",this.player_id):(this.#k(this.settings.autoplay*this.small.images_count),s.Thrixty.log("Autoplay "+this.settings.autoplay+" turn(s).",this.player_id))))}#D(t){let e=this.small.images[t].element;this.root_element.appendChild(e),e.style.display="block";let i=e.naturalWidth,o=e.naturalHeight,a=i/o;this.small.image_width=i,this.small.image_height=o,this.small.image_ratio=a,e.style.display="",this.root_element.removeChild(e),s.Thrixty.log("Small dimensions set to "+i+" x "+o,this.player_id)}#w(){let t=this.DOM_obj.small_progress_bar,e=(this.small.images_loaded+this.small.images_errored)/this.small.images_count;isNaN(e)||e<=0?(t.setAttribute("thrixty-state","unloaded"),t.style.width="0%"):e<1?(t.setAttribute("thrixty-state","loading"),t.style.width=100*e+"%"):(t.setAttribute("thrixty-state","loaded"),t.style.width="100%")}#T(t,e){"load"==e.type?this.#E(0):s.Thrixty.log("LARGE IMAGE WAS NOT FOUND",this.player_id)}#L(t,e){"load"==e.type?(this.large.images_loaded++,this.large.images[t].elem_loaded=!0,s.Thrixty.log("large image "+t+" loaded ("+this.large.images[t].element.src+")",this.player_id),(this.is_zoomed||this.is_fullpage)&&this.large.active_image_id==t&&this.draw_current_image()):"error"==e.type&&(this.large.images_errored++,this.large.images[t].elem_loaded=!1,s.Thrixty.log("large image "+t+" errored ("+this.large.images[t].element.src+")",this.player_id))}#v(t,e){null===this.large.images[t].elem_loaded&&(this.#L(t,e),0==t&&this.#T(t,e))}#E(t){let e=this.large.images[t].element;this.root_element.appendChild(e),e.style.display="block";let i=e.naturalWidth,o=e.naturalHeight,a=i/o;this.large.image_width=i,this.large.image_height=o,this.large.image_ratio=a,e.style.display="",this.root_element.removeChild(e),s.Thrixty.log("Large dimensions set to "+i+" x "+o,this.player_id)}#f(){this.events_assigned||(this.root_element.addEventListener("mousedown",(function(){this.focus()})),this.root_element.addEventListener("touchstart",(function(){this.focus()})),this.root_element.addEventListener("keydown",this.#C.bind(this)),s.Thrixty.add_mouse_hold_event(this.DOM_obj.prev_btn,this.#A.bind(this),100),s.Thrixty.add_touch_hold_event(this.DOM_obj.prev_btn,this.#A.bind(this),100),this.DOM_obj.play_btn.addEventListener("mousedown",this.#I.bind(this)),s.Thrixty.add_touch_click_event(this.DOM_obj.play_btn,this.#I.bind(this)),s.Thrixty.add_mouse_hold_event(this.DOM_obj.next_btn,this.#H.bind(this),100),s.Thrixty.add_touch_hold_event(this.DOM_obj.next_btn,this.#H.bind(this),100),this.DOM_obj.zoom_btn.addEventListener("click",this.#B.bind(this)),this.DOM_obj.size_btn.addEventListener("click",this.#X.bind(this)),this.DOM_obj.close_btn.addEventListener("click",this.#W.bind(this)),this.DOM_obj.rotation_speed_gauge.addEventListener("change",this.#Y.bind(this)),this.DOM_obj.load_overlay.addEventListener("click",this.#R.bind(this)),this.DOM_obj.load_btn.addEventListener("click",this.#R.bind(this)),document.addEventListener("mousedown",this.#S.bind(this)),this.DOM_obj.main_canvas.addEventListener("mousedown",this.#P.bind(this)),this.DOM_obj.minimap_canvas.addEventListener("mousedown",this.#N.bind(this)),this.DOM_obj.marker.addEventListener("mousedown",this.#q.bind(this)),document.addEventListener("mousemove",s.Thrixty.throttle(this.#F.bind(this),40)),this.DOM_obj.main_canvas.addEventListener("mousemove",s.Thrixty.throttle(this.#G.bind(this),40)),this.DOM_obj.minimap_canvas.addEventListener("mousemove",s.Thrixty.throttle(this.#U.bind(this),40)),this.DOM_obj.marker.addEventListener("mousemove",s.Thrixty.throttle(this.#K.bind(this),40)),document.addEventListener("mouseup",this.#J.bind(this)),this.DOM_obj.main_canvas.addEventListener("mouseup",this.#Z.bind(this)),this.DOM_obj.minimap_canvas.addEventListener("mouseup",this.#Q.bind(this)),this.DOM_obj.marker.addEventListener("mouseup",this.#V.bind(this)),document.addEventListener("touchstart",this.#$.bind(this),{passive:!1}),this.DOM_obj.main_canvas.addEventListener("touchstart",this.#tt.bind(this)),this.DOM_obj.minimap_canvas.addEventListener("touchstart",this.#et.bind(this)),this.DOM_obj.marker.addEventListener("touchstart",this.#it.bind(this)),document.addEventListener("touchmove",this.#st.bind(this),{passive:!1}),this.DOM_obj.main_canvas.addEventListener("touchmove",this.#ot.bind(this)),this.DOM_obj.minimap_canvas.addEventListener("touchmove",this.#at.bind(this)),this.DOM_obj.marker.addEventListener("touchmove",this.#nt.bind(this)),document.addEventListener("touchend",this.#lt.bind(this)),this.DOM_obj.main_canvas.addEventListener("touchend",this.#_t.bind(this)),this.DOM_obj.minimap_canvas.addEventListener("touchend",this.#rt.bind(this)),this.DOM_obj.marker.addEventListener("touchend",this.#ht.bind(this)),window.addEventListener("resize",s.Thrixty.throttle(this.#ct.bind(this),40)),this.root_element.addEventListener("wheel",this.#mt.bind(this)),this.events_assigned=!0)}#C(t){if(t.altKey||t.ctrlKey||t.metaKey)return;switch(t.key){case" ":this.#I(t),t.preventDefault();break;case"ArrowLeft":this.#A(t),t.preventDefault();break;case"ArrowRight":this.#H(t),t.preventDefault();break;case"ArrowUp":this.#dt(),t.preventDefault();break;case"ArrowDown":this.#gt(),t.preventDefault();break;case"Escape":this.#pt(),this.#m(),t.preventDefault(),this.#ut();break;case"F":case"f":this.#X(t),t.preventDefault();break;case"G":case"g":this.#B(t),t.preventDefault();break;case"PageUp":case"PageDown":case"Home":case"End":this.#mt(t)}}#R(t){this.#d(),"new"==this.settings.marker_mode&&this.#g(),this.root_element.removeChild(this.DOM_obj.load_overlay),t.stopPropagation()}#A(t){this.#pt(),this.#bt()}#I(t){this.#yt()}#H(t){this.#pt(),this.#vt()}#B(t){this.#ft(!0)}#X(t){this.#xt()}#W(t){this.#ut()}#Y(t){this.#Dt(parseInt(document.getElementById("rotation_speed_gauge_"+(this.player_id+1)).value))}#S(t){if(this.is_fullpage){let e=this.root_element.getBoundingClientRect(),i=e.width,s=e.height,o=e.left,a=e.top;(t.clientX-o<0||t.clientX-o>i||t.clientY-a<0||t.clientY-a>s)&&0==t.button&&(this.#ut(),t.preventDefault())}}#P(t){"progressive"==this.settings.zoom_control?0==t.button&&(this.#jt(t.clientX,t.clientY),t.preventDefault()):"classic"==this.settings.zoom_control&&0==t.button&&(this.#jt(t.clientX,t.clientY),t.preventDefault()),this.is_click=!0}#N(t){"progressive"==this.settings.zoom_control?0==t.button&&(this.#jt(t.clientX,t.clientY),t.preventDefault()):"classic"==this.settings.zoom_control&&0==t.button&&(this.#Mt("minimap"),this.#Ot(t.clientX,t.clientY),t.preventDefault())}#q(t){"progressive"==this.settings.zoom_control?0==t.button&&(this.#jt(t.clientX,t.clientY),t.preventDefault()):"classic"==this.settings.zoom_control&&0==t.button&&(this.#Mt("marker"),this.#Ot(t.clientX,t.clientY),t.preventDefault())}#F(t){if(!this.is_fullpage){let e=this.DOM_obj.main_canvas.getBoundingClientRect();e.width,e.height,e.left,e.top;t.preventDefault()}this.object_turn.prepared&&(this.#wt(t.clientX,t.clientY),t.preventDefault()),this.section_move.prepared&&(this.#Ot(t.clientX,t.clientY),t.preventDefault())}#G(t){this.is_zoomed&&"progressive"==this.settings.zoom_control&&(this.#Ot(t.clientX,t.clientY),t.preventDefault())}#U(t){this.is_zoomed&&"progressive"==this.settings.zoom_control&&(this.#Ot(t.clientX,t.clientY),t.preventDefault())}#K(t){this.is_zoomed&&"progressive"==this.settings.zoom_control&&(this.#Ot(t.clientX,t.clientY),t.preventDefault())}#J(t){this.object_turn.prepared&&(this.#wt(t.clientX,t.clientY),this.#zt(),t.preventDefault()),this.is_click&&(this.#yt(),this.is_click=!1,t.preventDefault()),this.section_move.prepared&&(this.#Ot(t.clientX,t.clientY),this.#kt(),t.preventDefault())}#Z(t){}#Q(t){}#V(t){}#$(t){if(!this.is_fullpage){if(function(t){if(!t||!("nodeType"in t))throw new Error("Node expected")}(t.touches[0].target),t.touches[0].target==this.DOM_obj.zoom_btn||this.DOM_obj.zoom_btn.contains(t.touches[0].target))return;let e=this.DOM_obj.main_canvas.getBoundingClientRect(),i=e.width,s=e.height,o=e.left,a=e.top;(t.touches[0].pageX-o<0||t.touches[0].pageX-o>i||t.touches[0].pageY-a<0||t.touches[0].pageY-a>s)&&this.#m()}}#tt(t){this.is_fullpage||(this.#Tt(),t.preventDefault()),1==t.touches.length&&(this.#jt(t.touches[0].clientX,t.touches[0].clientY),this.is_click=!0,t.preventDefault())}#et(t){1==t.touches.length&&this.is_zoomed&&(this.#Mt("minimap"),this.#Ot(t.touches[0].clientX,t.touches[0].clientY),t.preventDefault())}#it(t){1==t.touches.length&&this.is_zoomed&&(this.#Mt("marker"),this.#Ot(t.touches[0].clientX,t.touches[0].clientY),t.preventDefault())}#st(t){1==t.touches.length&&(this.is_fullpage&&t.cancelable&&t.preventDefault(),this.object_turn.prepared&&(this.#wt(t.touches[0].clientX,t.touches[0].clientY),t.cancelable&&t.preventDefault()),this.section_move.prepared&&(this.#Ot(t.touches[0].clientX,t.touches[0].clientY),t.cancelable&&t.preventDefault()))}#ot(t){}#at(t){}#nt(t){}#lt(t){this.object_turn.prepared&&(this.#zt(),t.preventDefault()),this.section_move.prepared&&(this.#kt(),t.preventDefault()),this.is_click&&(this.#yt(),this.is_click=!1)}#_t(t){}#rt(t){}#ht(t){}#jt(t,e){this.object_turn.prepared=!0,this.object_turn.start_x=t,this.object_turn.start_y=e,this.object_turn.last_x=t,this.object_turn.last_y=e}#wt(t,e){let i=t-this.object_turn.last_x;Math.abs(t-this.object_turn.start_x)>=this.settings.sensitivity_x&&(this.is_click=!1,this.#pt()),this.is_click||(this.object_turn.last_x=t-this.#Et(i))}#zt(){this.object_turn.prepared=!1,this.object_turn.last_x=null,this.object_turn.last_y=null}#Mt(t=""){""!=t&&(this.section_move.prepared=!0,"minimap"===t&&(this.section_move.minimap=!0))}#Ot(t,e){let i={x:t,y:e};this.section_move.minimap&&(i=this.#Lt(i)),this.#Ct(i.x,i.y),this.draw_current_image()}#kt(){this.section_move.prepared=!1,this.section_move.minimap=!1}#ct(t){this.#M(),this.#m(),s.Thrixty.is_mobile?this.DOM_obj.size_btn.style.display="none":this.DOM_obj.size_btn.style.display=""}#mt(t){this.is_fullpage&&t.preventDefault()}#At(){this.is_rotating&&(this.rotation_count<0?this.#vt():this.rotation_count>0?(this.#vt(),this.rotation_count--,0==this.rotation_count&&this.#pt()):this.#pt())}#k(t=-1){this.is_rotating||(this.rotation_count=t,0!=this.rotation_count&&(this.is_rotating=!0,this.DOM_obj.play_btn.setAttribute("thrixty-state","play"),this.rotation_id=setInterval(this.#At.bind(this),this.rotation_delay)))}#pt(){this.is_rotating&&(clearInterval(this.rotation_id),this.rotation_id=0,this.is_rotating=!1,this.DOM_obj.play_btn.setAttribute("thrixty-state","pause"))}#yt(){this.is_rotating?this.#pt():this.#k()}#Et(t){let e;e=this.is_zoomed||this.is_fullpage?360/this.large.images_count:360/this.small.images_count;let i=this.pixel_per_degree*e,s=t%i,o=(t-s)/i;return o*=-1,this.#z(o),this.draw_current_image(),s}#c(){let t=0;t=this.is_zoomed||this.is_fullpage?this.large.images_count:this.small.images_count,this.rotation_delay=Math.ceil(1e3/t*(this.settings.cycle_duration/this.rotation_speed_modifiers[this.rotation_speed_selected])),this.is_rotating&&(this.#pt(),this.#k())}#z(t){let e=0,i=0;this.is_zoomed||this.is_fullpage?(e=this.large.active_image_id,i=this.large.images_count,this.small.active_image_id=this.large.images[e].to_small):(e=this.small.active_image_id,i=this.small.images_count,this.large.active_image_id=this.small.images[e].to_large),e=Math.floor((e+t)%i),e<0&&(e+=i),this.is_zoomed||this.is_fullpage?(this.small.active_image_id=this.large.images[e].to_small,this.large.active_image_id=e):(this.small.active_image_id=e,this.large.active_image_id=this.small.images[e].to_large)}#vt(){this.settings.reversed_drag_direction&&this.settings.reversed_play_direction||!this.settings.reversed_drag_direction&&!this.settings.reversed_play_direction?this.#z(1):this.#z(-1),this.draw_current_image()}#bt(){this.settings.reversed_drag_direction&&this.settings.reversed_play_direction||!this.settings.reversed_drag_direction&&!this.settings.reversed_play_direction?this.#z(-1):this.#z(1),this.draw_current_image()}#Tt(t=!1){if(!this.is_zoomed){if(t||"none"!=this.settings.zoom_mode&&!s.Thrixty.is_mobile||"none"!=this.settings.zoom_mode_mobile&&s.Thrixty.is_mobile){let t=this.DOM_obj.main_canvas,e=this.DOM_obj.minimap_canvas;this.is_zoomed=!0,this.DOM_obj.zoom_btn.setAttribute("thrixty-state","zoomed_in");let i=t.getBoundingClientRect().left+t.offsetWidth/2,o=t.getBoundingClientRect().top+t.offsetHeight/2;this.#Ct(i,o),"minimap"==this.settings.zoom_pointer?(e.style.display="",e.style.width=100*this.small.image_width/this.large.image_width+"%",e.style.height=100*this.small.image_height/this.large.image_height+"%"):"marker"==this.settings.zoom_pointer&&(this.DOM_obj.marker.style.display=""),("outbox"==this.settings.zoom_mode&&!s.Thrixty.is_mobile||"outbox"==this.settings.zoom_mode_mobile&&s.Thrixty.is_mobile)&&this.#It()}this.draw_current_image()}}#m(){this.is_zoomed=!1,this.DOM_obj.zoom_btn.setAttribute("thrixty-state","zoomed_out"),this.DOM_obj.zoom_canvas.style.display="none",this.DOM_obj.minimap_canvas.style.display="none",this.DOM_obj.marker.style.display="none",this.draw_current_image()}#ft(t=!1){this.is_zoomed?this.#m():(this.is_rotating&&this.#pt(),this.#Tt(t)),this.#c()}#It(){if(!this.is_fullpage){this.DOM_obj.zoom_canvas.style.display=""}}#Ht(){if(this.is_fullpage)return;let t=new CustomEvent("thrixty:enter-fullpage",{detail:{player_id:this.player_id}});this.root_element.dispatchEvent(t),this.is_fullpage=!0,this.DOM_obj.size_btn.setAttribute("thrixty-state","fullpaged"),this.#M(),this.draw_current_image()}#ut(){if(!this.is_fullpage)return;this.is_fullpage=!1,this.DOM_obj.size_btn.setAttribute("thrixty-state","normalsized"),this.#M(),this.draw_current_image();let t=new CustomEvent("thrixty:quit-fullpage",{detail:{player_id:this.player_id}});this.root_element.dispatchEvent(t)}#xt(){this.is_fullpage?(this.#m(),this.#ut()):(this.#m(),this.#Ht())}draw_current_image(){this.is_zoomed?(!this.is_fullpage&&"outbox"==this.settings.zoom_mode&&!s.Thrixty.is_mobile||"outbox"==this.settings.zoom_mode_mobile&&s.Thrixty.is_mobile?this.#Bt():this.#Xt(),"marker"==this.settings.zoom_pointer?this.#Wt():this.#Yt()):this.is_fullpage?this.#Rt():this.#St()}#St(){let t=this.DOM_obj.main_canvas,e=t.getContext("2d"),i=this.#Pt();0!=this.canvas_size&&this.#j(0),e.clearRect(0,0,t.width,t.height),i&&e.drawImage(i,0,0)}#Rt(){let t=this.DOM_obj.main_canvas,e=t.getContext("2d"),i=this.#Nt();1!=this.canvas_size&&this.#j(1),e.clearRect(0,0,t.width,t.height),i&&e.drawImage(i,0,0,t.width,t.height)}#Xt(){let t=this.DOM_obj.main_canvas,e=t.getContext("2d"),i=this.#Nt();if(0!=this.canvas_size&&this.#j(0),e.clearRect(0,0,t.width,t.height),i){let t=this.#qt();e.drawImage(i,0,0,i.naturalWidth,i.naturalHeight,-t.x,-t.y,this.large.image_width,this.large.image_height)}}#Bt(){let t=this.DOM_obj.main_canvas,e=this.DOM_obj.zoom_canvas,i=t.getContext("2d"),s=e.getContext("2d"),o=this.#Pt(),a=this.#Nt();if(0!=this.canvas_size&&this.#j(0),i.clearRect(0,0,t.width,t.height),s.clearRect(0,0,e.width,e.height),o&&i.drawImage(o,0,0),a)if("old"==this.settings.marker_mode){let t=this.#qt();s.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,-t.x,-t.y,this.large.image_width,this.large.image_height)}else if("new"==this.settings.marker_mode){let{x:t,y:i,width:o,height:n}=this.#Ft();s.drawImage(a,t*this.large.image_width/this.small.image_width,i*this.large.image_height/this.small.image_height,o*this.large.image_width/this.small.image_width,n*this.large.image_height/this.small.image_height,0,0,e.width,e.height)}}#Yt(){let t=this.DOM_obj.main_canvas,e=this.DOM_obj.minimap_canvas,i=e.getContext("2d"),s=this.#Pt(),o=e.width*(this.small.image_width/this.large.image_width),a=e.height*(this.small.image_height/this.large.image_height),n=this.relative_mouse.x/t.offsetWidth*(e.width-o),l=this.relative_mouse.y/t.offsetHeight*(e.height-a);i.clearRect(0,0,e.width,e.height),s&&i.drawImage(s,0,0),i.globalAlpha=.5,i.fillStyle="black",i.beginPath(),i.moveTo(0,0),i.lineTo(this.small.image_width,0),i.lineTo(this.small.image_width,this.small.image_height),i.lineTo(0,this.small.image_height),i.lineTo(0,0),i.moveTo(n,l),i.lineTo(n,l+a),i.lineTo(n+o,l+a),i.lineTo(n+o,l),i.lineTo(n,l),i.closePath(),i.fill(),i.globalAlpha=1}#Ft(){return"old"==this.settings.marker_mode?{width:parseInt(this.DOM_obj.marker.style.width),height:parseInt(this.DOM_obj.marker.style.height),x:parseInt(this.DOM_obj.marker.style.left),y:parseInt(this.DOM_obj.marker.style.top)}:{width:parseInt(this.DOM_obj.marker.style.width),height:parseInt(this.DOM_obj.marker.style.height),x:this.relative_mouse.x,y:this.relative_mouse.y}}#Wt(){if("old"==this.settings.marker_mode){let t;t="outbox"==this.settings.zoom_mode&&!s.Thrixty.is_mobile||"outbox"==this.settings.zoom_mode_mobile&&s.Thrixty.is_mobile?this.DOM_obj.zoom_canvas:this.DOM_obj.canvas_container;let e=t.offsetWidth*this.small.image_width/this.large.image_width,i=t.offsetHeight*this.small.image_height/this.large.image_height,o=this.relative_mouse.x/t.offsetWidth*(t.offsetWidth-e),a=this.relative_mouse.y/t.offsetHeight*(t.offsetHeight-i);this.DOM_obj.marker.style.width=e+"px",this.DOM_obj.marker.style.height=i+"px",this.DOM_obj.marker.style.left=o+"px",this.DOM_obj.marker.style.top=a+"px"}else{let t;t="outbox"==this.settings.zoom_mode&&!s.Thrixty.is_mobile||"outbox"==this.settings.zoom_mode_mobile&&s.Thrixty.is_mobile?this.DOM_obj.zoom_canvas:this.DOM_obj.canvas_container;let e=t.offsetWidth*this.small.image_width/this.large.image_width,i=t.offsetHeight*this.small.image_height/this.large.image_height,o=this.relative_mouse.x,a=this.relative_mouse.y;this.DOM_obj.marker.style.width=e+"px",this.DOM_obj.marker.style.height=i+"px",this.DOM_obj.marker.style.left=o+"px",this.DOM_obj.marker.style.top=a+"px"}}#Ct(t,e){let i=this.DOM_obj.main_canvas,s=t-i.getBoundingClientRect().left,o=e-i.getBoundingClientRect().top;s<0&&(s=0),s>i.offsetWidth&&(s=i.offsetWidth),o<0&&(o=0),o>i.offsetHeight&&(o=i.offsetHeight),this.relative_mouse.x=s,this.relative_mouse.y=o}#qt(){let t=this.DOM_obj.main_canvas,e=this.relative_mouse.x/t.offsetWidth,i=this.relative_mouse.y/t.offsetHeight;return{x:e*(this.large.image_width-this.small.image_width),y:i*(this.large.image_height-this.small.image_height)}}#Pt(){let t=this.small.images[this.small.active_image_id];return t.elem_loaded?t.element:null}#Nt(){this.small.images[this.small.active_image_id];let t=this.large.images[this.large.active_image_id];return t.elem_loaded?t.element:(null===t.elem_loaded&&this.#u(this.large.active_image_id),this.#Pt())}#M(){if(this.is_fullpage){document.getElementById("thrixty-fullscreen-container")?.append(this.root_element),this.root_element.offsetWidth,this.root_element.offsetHeight;this.root_element.clientHeight,this.root_element.clientWidth;this.root_element.style.position="fixed",this.root_element.style.width="100%",this.root_element.style.height="100%",this.root_element.style.maxWidth="100%",this.root_element.style.maxHeight="100%",this.root_element.style.background="white",this.root_element.style.zIndex="10005",this.root_element.style.top="0",this.root_element.style.bottom="0",this.root_element.style.left="0",this.root_element.style.right="0",this.DOM_obj.showroom.style.width="",this.DOM_obj.showroom.style.height="",this.DOM_obj.canvas_container.style.width="",this.DOM_obj.canvas_container.style.height="",this.DOM_obj.canvas_container.style.marginLeft="",this.DOM_obj.canvas_container.style.marginTop="",this.DOM_obj.close_btn.style.display="",this.DOM_obj.zoom_advisory.style.display="none";let t=this.root_element.clientWidth,e=this.root_element.clientHeight;this.#Gt(t,e,this.large.image_ratio)}else{this.root_element_parent?.append(this.root_element),this.root_element.style.position="",this.root_element.style.top="",this.root_element.style.right="",this.root_element.style.bottom="",this.root_element.style.left="",this.root_element.style.width="",this.root_element.style.height="",this.root_element.style.maxWidth="",this.root_element.style.maxHeight="",this.root_element.style.border="",this.root_element.style.background="",this.root_element.style.zIndex="",this.DOM_obj.showroom.style.width="",this.DOM_obj.showroom.style.height="",this.DOM_obj.canvas_container.style.width="",this.DOM_obj.canvas_container.style.height="",this.DOM_obj.canvas_container.style.marginLeft="",this.DOM_obj.canvas_container.style.marginTop="",this.DOM_obj.close_btn.style.display="none",this.DOM_obj.zoom_advisory.style.display="";let t=this.root_element.clientWidth,e=t;e>this.small.image_width&&(e=this.small.image_width);let i=e/this.small.image_ratio;i+=this.DOM_obj.controls.clientHeight,i+=this.DOM_obj.zoom_advisory.clientHeight+20,this.root_element.style.width=t+"px",this.root_element.style.height=i+"px",t=this.root_element.clientWidth,i=this.root_element.clientHeight,this.root_element.style.width=t+"px",this.root_element.style.height=i+"px",this.#Gt(t,i,this.small.image_ratio)}}#Gt(t,e,i){let s=t,o=e-this.DOM_obj.controls.offsetHeight;if(this.DOM_obj.showroom.style.width=s+"px",this.DOM_obj.showroom.style.height=o+"px",s/o>i){let t=o*i,e=o,a=(s-t)/2,n=0;this.DOM_obj.canvas_container.style.width=t+"px",this.DOM_obj.canvas_container.style.height=e+"px",this.DOM_obj.canvas_container.style.marginLeft=a+"px",this.DOM_obj.canvas_container.style.marginTop=n+"px",this.DOM_obj.zoom_canvas.style.width=this.DOM_obj.canvas_container.style.width,this.DOM_obj.zoom_canvas.style.height=this.DOM_obj.canvas_container.style.height}else{let t=s,e=s/i,a=0,n=(o-e)/2;this.DOM_obj.canvas_container.style.width=t+"px",this.DOM_obj.canvas_container.style.height=e+"px",this.DOM_obj.canvas_container.style.marginLeft=a+"px",this.DOM_obj.canvas_container.style.marginTop=n+"px",this.DOM_obj.zoom_canvas.style.width=this.DOM_obj.canvas_container.style.width,this.DOM_obj.zoom_canvas.style.height=this.DOM_obj.canvas_container.style.height}}#j(t){let e=null;switch(t){default:case 0:e=this.small;break;case 1:e=this.large}let i=e.image_width,s=e.image_height;this.DOM_obj.bg_canvas.width=i,this.DOM_obj.bg_canvas.height=s,this.DOM_obj.main_canvas.width=i,this.DOM_obj.main_canvas.height=s,this.DOM_obj.minimap_canvas.width=i,this.DOM_obj.minimap_canvas.height=s,this.DOM_obj.zoom_canvas.width=i,this.DOM_obj.zoom_canvas.height=s,this.canvas_size=t}#h(){let t=this.small.images_count,e=this.large.images_count;if(t>0&&e>0){let i=t/e,s=e/t;for(let e=0;e<t;e++)this.small.images[e].to_large=Math.round(e/i);for(let t=0;t<e;t++)this.large.images[t].to_small=Math.round(t/s)}}#dt(){let t=this.rotation_speed_selected;t=t==this.rotation_speed_modifiers.length-1?this.rotation_speed_modifiers.length-1:t+1,this.rotation_speed_selected=t;let e=this.DOM_obj.rotation_speed_gauge;e.value=String(parseInt(e.value)+1),this.#c()}#gt(){let t=this.rotation_speed_selected;t=0==t?0:t-1,this.rotation_speed_selected=t;let e=this.DOM_obj.rotation_speed_gauge;e.value=String(parseInt(e.value)-1),this.#c()}#Dt(t){this.rotation_speed_selected=t,this.#c()}#Lt(t){let e=this.small.image_width/this.large.image_width,i=this.small.image_height/this.large.image_height;return{x:(t.x-this.DOM_obj.minimap_canvas.getBoundingClientRect().left)/e+this.DOM_obj.minimap_canvas.getBoundingClientRect().left,y:(t.y-this.DOM_obj.minimap_canvas.getBoundingClientRect().top)/i+this.DOM_obj.minimap_canvas.getBoundingClientRect().top}}}}},e={};function i(s){var o=e[s];if(void 0!==o)return o.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};i("./src/Thrixty.ts")}();