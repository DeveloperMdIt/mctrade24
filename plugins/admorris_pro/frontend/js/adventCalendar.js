!function(){const i={init(){const i=this;return this.el=$(".am-advent-calendar"),this.toggleEl=$(".am-advent-calendar__toggle"),this.windows=$(".am-advent-calendar__window").get().reduce(((i,t)=>i.concat(Object.create(o).init(t))),[]),this.windowGrid=$("#am-advent-calendar-windows"),this.windows.forEach((i=>{$(i.el).on("click",this.windowClickHandler(i).bind(this))})),$(document).on("windowOpened",((i,t)=>this.windowIsOpen=t)),$(document).on("windowClosed",(i=>this.windowIsOpen=!1)),this.snow=Object.create(n).init(),$(window).on("load",(()=>this.el.removeClass("transition-preload"))),this.toggleEl.on("focus mouseover",(t=>{i.windowGrid.find("img").removeAttr("hidden")})),this.toggleEl.on("click",(i=>{i.preventDefault(),this.isShown?(this.hide(),e(this.outsideClickListener)):(this.show(),this.outsideClickListener=t.bind(this),document.addEventListener("click",this.outsideClickListener))})),this},isShown:!1,windowIsOpen:!1,show(){this.el.addClass("am-advent-calendar--show"),this.windowGrid.attr("aria-hidden",!1),this.windowGrid.get(0).focus(),this.isShown=!0,$(this).trigger("calendarActivated"),this.toggleEl.attr("aria-expanded",!0),$("body").addClass("calendar-is-open")},hide(){this.el.removeClass("am-advent-calendar--show"),$("body").removeClass("calendar-is-open"),this.isShown=!1,!1!==this.windowIsOpen&&this.windowIsOpen.close(),this.windowGrid.attr("aria-hidden",!0),this.toggleEl.attr("aria-expanded",!1)},windowClickHandler(i){return t=>{this.windowIsOpen===i?i.close():(!1!==this.windowIsOpen&&this.windowIsOpen.close(),i.open())}}};function t(i){if(!$(i.target).closest(this.el).length&&!$(i.target).closest(".am-advent-calendar-modal").length&&!$(i.target).closest(".am-snow").length&&this.el.is(":visible"))return this.hide(),e(this.outsideClickListener),i.preventDefault(),!1}function e(i){document.removeEventListener("click",i)}const n={init(){return this.el=$(".am-snow").hide(),this.generator=function(){var i,t=document.querySelector(".am-snow");if(t)var e=t.getContext("2d"),n=window.innerWidth,s=window.innerHeight,o=200,a=[],d=void 0;function h(i,t){var e=3,n=.7;this.x=i,this.y=t,this.r=u(0,1),this.a=u(0,Math.PI),this.aStep=.01,this.weight=u(2,e),this.alpha=this.weight/e,this.speed=this.weight/e*n,this.update=function(){this.x+=Math.cos(this.a)*this.r,this.a+=this.aStep,this.y+=this.speed}}function r(){window.addEventListener("resize",p,!1);for(var i,t=o;t--;)i=new h(u(0,n,!0),u(0,s,!0)),a.push(i);l()}function l(){t.width=n,t.height=s}function w(){var i,t=a.length;for(c();t--;)(i=a[t]).update(),e.beginPath(),e.arc(i.x,i.y,i.weight,0,2*Math.PI,!1),e.fillStyle="rgba(255, 255, 255, "+i.alpha+")",e.fill(),i.y>=s&&(i.y=-i.weight);g()}function c(){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,n,s),e.restore()}function u(i,t,e){var n=Math.random()*(t-i+1)+i;return e?Math.floor(n):n}function g(){d=window.requestAnimationFrame(w)}function m(){d&&(window.cancelAnimationFrame(d),d=void 0)}function p(){i||(i=setTimeout((function(){i=null,v()}),500))}function v(){m(),e.clearRect(0,0,n,s),n=window.innerWidth,s=window.innerHeight,window.removeEventListener("resize",p),a=[],r(),g()}return{init:r,start:g,stop:m}}(),this.generator.init(),$(document).on("windowOpened",((i,t)=>{this.show()})),$(document).on("windowClosed",(i=>this.hide())),this},show(){this.generator.start(),this.el.show(),this.el.addClass("snowing")},hide(){this.el.removeClass("snowing"),this.el.hide(),this.generator.stop()}},s={init(i,t){return this.el=i,this.calWindow=t,$(this.el).on("hide.bs.modal",(()=>{this.calWindow.close()})),$(this.el).find(".close").on("click",(()=>{this.hide(),this.calWindow.close()})),this},show(){$(this.el).modal("show")},hide(){$(this.el).modal("hide")}},o={isOpen:!1,init(i){this.el=$(i),this.day=i.dataset.day;let t=$(`.am-advent-calendar-modal[data-day=${this.day}]`).get(0);return t?this.modal=Object.create(s).init(t,this):$(this.el).css("cursor","not-allowed"),this},open(){void 0!==this.modal&&($(this.el).addClass("is-open"),this.isOpen=!0,$(this.el).trigger("windowOpened",this),this.modal.show())},close(){$(this.el).removeClass("is-open"),this.isOpen=!1,$(this.el).trigger("windowClosed")}};$(document).ready((function(){$(".am-advent-calendar-wrapper").removeClass("hide"),Object.create(i).init()}))}();