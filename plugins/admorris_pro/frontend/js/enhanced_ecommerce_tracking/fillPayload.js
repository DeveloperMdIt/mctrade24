export function fillPayload({formData:t,productData:e=null,payloadData:a,matrixQuantityName:r}){let n,i=clone(a);null===e&&(e=i.items);const l=Array.from(t.entries()).filter((([t])=>t.startsWith(r)||"anzahl"===t));if(l.length>1)n=l.reduce(((t,[a,n])=>{const i=parseInt(n);if(isNaN(i)||i<=0)return t;const l=new RegExp(`${r}\\[(\\d+)\\]`).exec(a);if(!l||l.length<2)return t;const o=parseInt(l[1]),c=(s=o,e.find((t=>t.id==s)));var s;if(!c)throw new Error("Article not found");return c.quantity=i,t.concat(c)}),[]);else{n=e;var o=parseInt(l[0][1]);n[0].quantity=o}let c=fillItems(n,i);return i.items=c,i.value=i.value*c.reduce(((t,e)=>t+e.price*e.quantity),0),i}export const payloadItemsEmpty=t=>0===t.items.length;const clone=t=>JSON.parse(JSON.stringify(t)),fillItems=(t,e)=>t.filter((t=>t.quantity>0)).map((t=>createPayloadItem(t,e))),createPayloadItem=(t,e)=>{const a={};return a.item_id=t.item_id,a.item_name=t.item_name,a.price=e.value*t.price,a.brand=t.brand,a.quantity=t.quantity,a.item_category=e.items[0].item_category,a};