<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Shop; use Plugin\admorris_pro\ioHandling\rewardPoints\RewardPointsTransaction; if (!($oPlugin->getConfig()->getValue("\x61\x64\155\157\x72\162\151\x73\x5f\160\162\157\137\155\141\162\153\x65\164\151\156\x67\137\155\x61\x69\154\x63\x68\x69\155\160\137\x61\x63\x74\151\166\145") === "\131")) { goto gwWU_; } require_once $oPlugin->getPaths()->getFrontendPath() . "\155\x61\x69\154\x63\150\151\155\x70\x2f\x63\x6f\156\156\x65\143\164\151\157\156\56\160\150\x70"; if (!(isset($args_arr["\157\116\x65\x77\163\154\x65\164\164\145\162\105\155\x70\146\x61\x65\x6e\x67\x65\162"]) && is_object($args_arr["\x6f\x4e\145\x77\163\154\x65\x74\x74\x65\162\105\155\160\146\x61\145\156\x67\x65\162"]))) { goto it7u2; } $oNewsletterEmpfaenger = $args_arr["\157\x4e\145\167\163\154\x65\x74\x74\x65\x72\105\155\160\x66\x61\x65\x6e\x67\x65\x72"]; $lang = Shop::Container()->getDB()->select("\164\x73\x70\162\141\x63\150\145", "\x6b\x53\160\162\141\x63\x68\x65", $oNewsletterEmpfaenger->kSprache); if ($lang->cISO == "\147\145\162") { goto a8weR; } if ($lang->cISO == "\x65\x6e\x67") { goto zsFtL; } if ($lang->cISO == "\151\164\141") { goto MUCA0; } if ($lang->cISO == "\146\x72\x65") { goto KBNpj; } if ($lang->cISO == "\x73\160\x61") { goto wDFGe; } $lang = ''; goto rwMcp; wDFGe: $lang = "\x65\x73"; rwMcp: goto bXBw8; KBNpj: $lang = "\146\x72"; bXBw8: goto HtVwl; MUCA0: $lang = "\151\x74"; HtVwl: goto K3e7H; zsFtL: $lang = "\145\x6e"; K3e7H: goto h212U; a8weR: $lang = "\x64\x65"; h212U: if (!($oNewsletterEmpfaenger->kKunde != "\x30")) { goto rTR1N; } $getData = Shop::Container()->getDB()->query("\123\x45\x4c\x45\x43\x54\40\x6b\x4b\x75\156\x64\145\156\147\162\165\x70\x70\145\x2c\x20\144\x47\x65\142\x75\162\164\x73\164\x61\147\40\x46\122\x4f\115\40\x74\x6b\x75\x6e\x64\145\40\127\x48\105\122\x45\40\x6b\113\165\x6e\144\x65\x20\75\40{$oNewsletterEmpfaenger->kKunde}\40\x4c\x49\x4d\111\124\40\x31", 2); $dGeburtstag = $getData[0]->dGeburtstag ? date("\155\57\144", strtotime($getData[0]->dGeburtstag)) : null; $kundenGruppenID = $getData[0]->kKundengruppe; $getKundengruppe = Shop::Container()->getDB()->query("\x53\x45\x4c\x45\103\124\x20\143\x4e\x61\x6d\145\40\106\122\x4f\115\x20\x74\153\165\156\144\145\x6e\147\x72\x75\160\x70\145\x20\x57\x48\x45\122\x45\x20\x6b\113\165\x6e\144\x65\156\x67\162\165\160\160\x65\x20\75\x20{$kundenGruppenID}\x20\114\111\115\111\124\40\61", 2); $kundengruppeName = $getKundengruppe[0]->cName; $actualRewardPoints = RewardPointsTransaction::getCustomerRewardPoints($oNewsletterEmpfaenger->kKunde)->valid_points; $getDoubleOptInOption = Shop::Container()->getDB()->query("\x53\x45\x4c\105\x43\x54\x20\x63\x57\145\162\x74\40\106\x52\117\115\40\164\x65\151\156\x73\x74\x65\154\154\165\x6e\147\x65\156\x20\127\110\105\x52\105\x20\143\x4e\141\155\145\x20\x3d\40\47\x6e\x65\x77\x73\154\x65\164\164\x65\x72\x5f\144\x6f\165\x62\154\145\157\160\164\x27\40\114\111\x4d\111\124\40\61", 2); $doubleOptInOption = $getDoubleOptInOption[0]->cWert; if (!($doubleOptInOption == "\125")) { goto XVYLx; } $subscriptionStatus = "\163\x75\142\x73\x63\x72\x69\x62\145\x64"; $subscription = rudr_mailchimp_subscribe_unsubscribe($oNewsletterEmpfaenger->cEmail, "\163\165\142\x73\x63\x72\x69\142\x65\144", $lang, array("\106\116\101\x4d\x45" => $oNewsletterEmpfaenger->cVorname, "\114\x4e\x41\115\105" => $oNewsletterEmpfaenger->cNachname, "\102\111\122\x54\110\x44" => $dGeburtstag, "\x43\x47\x52\117\x55\x50" => $kundengruppeName, "\107\x45\116\x44\105\x52" => $oNewsletterEmpfaenger->cAnrede, "\x52\x45\127\101\x52\x44\120" => $actualRewardPoints)); XVYLx: rTR1N: it7u2: gwWU_: