<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\update; trait SettingsLoaderTrait { private string $SETTINGS_PREFIX = "\x61\144\x6d\157\x72\x72\151\163\x5f\x70\x72\x6f\137"; protected string $searchValue; protected array $pluginSettings; public function getSearchValue() : string { return $this->SETTINGS_PREFIX . $this->searchValue; } public function setSearchValue(string $searchValue) : void { if (str_ends_with($searchValue, "\x5f")) { goto nAXAC; } $searchValue .= "\137"; nAXAC: $this->searchValue = $searchValue; } protected function filterDuplicateSettings(array $array) : array { $tmp = []; foreach ($array as $key => $val) { $filtered = array_filter($array, fn($obj) => $obj->cName === $val->cName); $tmp[] = array_pop($filtered); if (!(count($filtered) > 0)) { goto nR2gt; } unset($array[$key]); nR2gt: BmrVD: } Y3Lo5: return $tmp; } public function loadSettings() { $pluginSettings = $this->db->getObjects("\x53\105\x4c\105\103\124\x20\52\40\106\x52\117\115\40\x74\160\154\x75\147\151\x6e\145\151\156\x73\164\x65\154\154\x75\x6e\x67\x65\x6e\xd\xa\40\40\40\x20\40\x20\40\40\x57\110\105\122\105\40\143\x4e\x61\155\145\x20\x4c\x49\113\x45\x20\72\163\x65\x61\x72\143\150\126\x61\x6c\165\145\40", ["\x73\x65\x61\162\x63\x68\x56\141\x6c\165\145" => "\x25" . $this->searchValue . "\45"]); $this->pluginSettings = $this->filterDuplicateSettings($pluginSettings); } }