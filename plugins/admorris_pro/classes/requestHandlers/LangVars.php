<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\requestHandlers; use JTL\Shop; class LangVars { public function load($varNames) { $data = []; if (!is_string($varNames)) { goto DDcEa; } $varNames = [$varNames]; DDcEa: $lang = Shop::Lang(); $installedLanguages = $lang->getInstalled(); foreach ($installedLanguages as $l) { $lang->setzeSprache($l->cISO); $customLangVars = $lang->getSectionValues("\x63\165\163\164\x6f\x6d"); foreach ($varNames as $name) { if (!isset($customLangVars[$name])) { goto WzoSQ; } $data[$l->cISO][$name] = $customLangVars[$name]; WzoSQ: HiGKp: } az6Vy: HmljX: } twInA: return $data; } public function save($data) { $lang = Shop::Lang(); $installedLanguages = $lang->getInstalled(); foreach ($data as $langIso => $variables) { $lang->setzeSprache($langIso); $customLangVars = $lang->getSectionValues("\143\x75\163\x74\x6f\x6d"); foreach ($variables as $varName => $value) { if (isset($customLangVars[$varName])) { goto Fn10G; } $lang->insert($langIso, 18, $varName, $value); goto hk7s6; Fn10G: if (!($customLangVars[$varName] !== $value)) { goto LM3De; } $lang->set(18, $varName, $value); LM3De: hk7s6: ZoKq_: } VY9UE: aGe2R: } SL9sH: Shop::Container()->getCache()->flushTags([CACHING_GROUP_LANGUAGE]); Shop::Container()->getDB()->query("\125\x50\x44\x41\124\x45\40\164\147\154\x6f\142\141\154\x73\x20\x53\105\x54\40\144\x4c\x65\x74\172\164\145\101\x65\x6e\144\145\x72\x75\x6e\x67\40\x3d\x20\x6e\x6f\x77\x28\x29", 4); } }