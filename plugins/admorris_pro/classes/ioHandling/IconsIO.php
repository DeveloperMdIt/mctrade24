<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro\ioHandling; use JTL\DB\DbInterface; use stdClass; class IconsIO { use IoRequestTrait; public function __construct(private DbInterface $db) { } public function getIcons() { $data = $this->db->query("\123\x45\114\105\x43\x54\40\x2a\x20\106\x52\117\115\x20\x78\160\154\165\147\151\x6e\x5f\x61\144\x6d\x6f\x72\x72\x69\163\137\x70\x72\157\137\151\x63\x6f\156\x73\40\x4f\122\104\x45\x52\40\102\x59\40\x63\141\x74\x65\x67\x6f\x72\171", 2); $response = json_encode($data); header("\103\157\156\164\x65\x6e\164\x2d\x74\171\160\145\x3a\x20\x61\160\x70\154\151\143\x61\x74\151\x6f\x6e\57\152\x73\x6f\156"); return $response; } public function getIconsByType($types) { $queryString = ''; $icons = $types; $i = 0; nsLWT: if (!($i < count($icons))) { goto zsrl4; } if ($i === 0) { goto q0I0P; } $queryString = $queryString . "\40\117\x52\x20\x69\143\157\x6e\124\171\160\x65\x20\x3d\x20\x27{$icons[$i]}\x27"; goto CvlNJ; q0I0P: $queryString = $queryString . "\x57\110\x45\122\x45\40\151\143\157\x6e\x54\x79\160\145\40\x3d\40\x27{$icons[$i]}\x27"; CvlNJ: Z_DTr: $i++; goto nsLWT; zsrl4: $data = $this->db->query("\x53\105\x4c\105\x43\x54\40\52\40\x46\x52\117\115\40\170\x70\154\165\147\x69\x6e\x5f\x61\144\x6d\157\x72\x72\x69\163\137\160\162\x6f\x5f\x69\143\157\156\163\40{$queryString}\x20\117\x52\104\x45\x52\40\x42\x59\x20\143\x61\x74\145\147\x6f\x72\x79", 2); $response = json_encode($data); header("\103\x6f\156\164\145\x6e\164\55\164\171\160\x65\x3a\x20\141\160\x70\x6c\151\143\x61\x74\x69\x6f\156\57\x6a\163\x6f\156"); return $response; } public function getIconsUsed() { $data = $this->db->query("\x53\x45\114\105\103\124\x20\xa\x20\40\x20\40\x78\160\154\165\x67\x69\x6e\x5f\x61\x64\x6d\157\162\162\x69\x73\137\x70\162\x6f\137\x69\143\157\156\163\137\x75\x73\145\144\56\x69\x64\54\xa\40\x20\x20\40\x78\x70\154\x75\147\151\x6e\x5f\141\144\155\157\x72\x72\x69\x73\x5f\160\162\157\x5f\151\143\157\156\163\56\x63\x61\x74\x65\147\x6f\162\x79\x2c\xa\40\40\x20\40\170\160\154\x75\x67\x69\x6e\137\x61\x64\x6d\x6f\x72\x72\151\x73\x5f\160\x72\157\137\151\x63\157\x6e\163\x2e\151\x63\157\x6e\x49\144\54\xa\x20\40\40\40\170\160\154\165\147\x69\x6e\x5f\x61\144\x6d\157\x72\x72\x69\163\137\x70\x72\157\x5f\151\x63\157\x6e\x73\x5f\165\163\145\144\56\x69\143\157\156\x54\x79\160\x65\54\12\x20\40\x20\x20\x78\x70\154\x75\x67\x69\156\x5f\141\144\x6d\x6f\x72\162\151\163\137\160\162\x6f\137\151\143\157\x6e\x73\x2e\160\x61\x74\x68\x4f\x72\123\x76\x67\54\12\x20\x20\40\x20\x78\160\154\165\147\151\156\137\141\x64\x6d\157\162\x72\x69\163\137\160\x72\x6f\x5f\x69\x63\157\x6e\163\x2e\x69\x63\x6f\156\x46\141\x6d\151\154\x79\54\xa\40\x20\x20\40\x78\160\154\165\x67\x69\x6e\x5f\141\x64\x6d\157\162\x72\151\163\137\160\x72\x6f\137\151\143\x6f\x6e\163\x5f\x75\163\x65\144\x2e\x73\151\x7a\145\115\x75\x6c\x74\151\160\x6c\151\x65\162\xa\40\x20\x20\x20\106\122\117\115\40\170\160\x6c\x75\147\151\156\x5f\141\x64\155\157\x72\162\151\x73\137\160\162\x6f\x5f\x69\143\157\156\x73\x5f\x75\163\x65\144\x20\x4c\x45\106\x54\40\x4a\x4f\x49\x4e\40\170\160\x6c\165\147\x69\156\x5f\141\144\155\157\x72\x72\151\x73\x5f\160\162\x6f\x5f\151\143\157\x6e\x73\40\117\116\x20\x78\x70\154\165\147\x69\156\x5f\141\x64\155\x6f\x72\162\x69\x73\137\160\x72\157\137\x69\x63\157\x6e\x73\137\165\x73\145\144\x2e\111\143\157\156\x49\x64\40\x3d\40\x78\x70\154\165\147\151\156\x5f\x61\144\x6d\x6f\x72\162\151\163\137\x70\x72\157\x5f\x69\x63\x6f\156\x73\x2e\151\143\157\156\x49\144", 2); $response = json_encode($data); header("\x43\157\156\164\x65\x6e\x74\55\164\171\160\x65\x3a\40\x61\x70\x70\x6c\x69\x63\x61\x74\151\x6f\x6e\x2f\152\x73\x6f\156"); return $response; } public function getIconUsedByType($type) { $query = "\x53\x45\114\x45\103\x54\40\x78\160\154\165\147\x69\x6e\x5f\141\x64\x6d\157\162\x72\x69\163\x5f\160\162\157\137\x69\x63\x6f\156\x73\x5f\x75\x73\x65\144\56\x69\144\x2c\xa\x20\40\40\x20\x78\x70\154\x75\x67\151\156\x5f\141\x64\x6d\x6f\x72\x72\x69\x73\x5f\x70\x72\x6f\x5f\151\143\157\x6e\163\x2e\143\x61\164\x65\x67\x6f\x72\171\x2c\12\40\40\40\x20\x78\160\154\165\147\151\x6e\137\x61\x64\x6d\x6f\x72\x72\151\163\137\160\x72\157\137\x69\143\x6f\x6e\163\56\x69\143\x6f\x6e\111\144\x2c\12\x20\x20\40\x20\170\x70\x6c\165\x67\151\156\x5f\x61\x64\155\157\162\x72\151\x73\137\160\162\x6f\x5f\151\x63\x6f\x6e\x73\x5f\x75\x73\145\x64\x2e\x69\x63\157\x6e\124\171\x70\145\x2c\12\40\40\x20\x20\170\x70\154\x75\147\151\156\137\x61\x64\x6d\x6f\x72\162\151\163\x5f\x70\x72\x6f\137\x69\x63\157\x6e\x73\56\160\141\164\x68\117\x72\123\x76\147\x2c\12\x20\x20\x20\x20\x78\160\154\165\x67\151\x6e\x5f\141\x64\155\157\162\162\151\163\137\x70\x72\157\137\151\143\157\x6e\163\56\151\x63\x6f\156\x46\x61\155\151\154\x79\x2c\xa\x20\40\x20\40\170\x70\154\165\x67\151\156\137\x61\x64\x6d\x6f\x72\x72\x69\x73\x5f\x70\162\x6f\137\151\143\157\156\163\137\165\x73\145\144\x2e\x73\151\172\145\115\165\x6c\x74\x69\x70\x6c\x69\x65\162\12\x20\40\40\x20\106\122\117\115\40\170\x70\154\165\147\151\156\x5f\141\x64\155\157\x72\162\151\163\137\160\x72\157\x5f\151\x63\x6f\156\163\137\x75\163\145\x64\x20\x4c\105\106\x54\x20\x4a\x4f\111\116\x20\170\160\154\165\x67\x69\x6e\x5f\x61\x64\x6d\x6f\162\x72\x69\163\x5f\160\162\x6f\x5f\x69\143\x6f\x6e\x73\x20\117\116\x20\170\160\154\x75\147\x69\x6e\x5f\141\x64\155\157\x72\162\151\x73\x5f\160\162\157\137\x69\143\157\156\x73\x5f\165\163\x65\x64\56\x49\x63\157\x6e\x49\144\x20\75\x20\170\160\x6c\x75\x67\x69\156\137\141\144\155\157\162\162\151\163\x5f\x70\162\x6f\x5f\x69\143\x6f\156\163\56\x69\143\157\156\111\144\12\40\x20\40\x20\127\x48\105\122\105\x20\170\160\154\x75\x67\151\156\137\141\144\x6d\x6f\x72\x72\x69\x73\x5f\160\x72\x6f\137\x69\143\157\156\x73\137\x75\x73\x65\x64\56\151\143\157\x6e\124\x79\x70\x65\x20\x3d\x20\x3a\x69\143\x6f\156\124\x79\x70\x65"; $data = $this->db->queryPrepared($query, ["\x69\x63\157\x6e\124\x79\x70\x65" => $type], 1); $response = json_encode($data); header("\103\x6f\x6e\x74\x65\x6e\164\x2d\164\171\160\x65\72\x20\141\x70\x70\x6c\151\x63\x61\164\x69\157\156\57\152\163\x6f\156"); return $response; } public function getPaymentIconsIds() { $data = $this->db->getSingleObject("\x53\105\x4c\x45\x43\x54\40\170\x70\x6c\165\x67\x69\x6e\137\x61\144\x6d\157\162\x72\x69\x73\137\160\162\x6f\x5f\x74\x65\155\160\154\x61\164\x65\x5f\163\x65\164\x74\151\156\147\163\56\160\x61\x79\x6d\x65\x6e\164\111\x63\x6f\156\163\x20\106\122\117\x4d\x20\170\x70\154\x75\147\151\x6e\x5f\x61\144\155\157\162\162\151\163\x5f\x70\x72\x6f\x5f\164\x65\155\x70\x6c\141\x74\145\x5f\163\145\x74\164\x69\156\147\x73"); $response = json_encode($data->paymentIcons); header("\x43\x6f\x6e\x74\145\156\x74\x2d\x74\171\160\x65\72\40\x61\160\160\x6c\151\x63\x61\164\x69\x6f\156\x2f\x6a\x73\157\156"); return $response; } public function addIcon($data) { $data; $object = new stdClass(); $object->category = $data["\143\x61\x74\x65\147\x6f\162\x79"]; $object->pathOrSvg = $data["\160\x61\x74\x68\x4f\162\x53\166\147"]; $object->iconFamily = "\x63\x75\x73\x74\157\x6d"; $object->iconType = "\x63\x75\163\164\x6f\x6d"; $query = $this->db->insert("\170\160\x6c\165\147\151\156\x5f\x61\144\x6d\x6f\162\x72\x69\x73\x5f\x70\x72\x6f\x5f\x69\x63\157\x6e\163", $object); if (!($query !== 0)) { goto KEFMV; } $object->iconId = $query; return $object; KEFMV: return $query; } public function iconSprite($req) { $sprite = $req; $path = PFAD_ROOT . "\x74\145\x6d\x70\x6c\x61\164\145\x73\x2f\x61\144\155\x6f\x72\x72\x69\163\137\x70\x72\157\x2f\151\143\x6f\x6e\x73\56\163\x76\147"; file_put_contents($path, $sprite); return hash_file("\155\144\65", $path); } public function paymentIconSprite($req) { $sprite = $req; $path = PFAD_ROOT . "\x74\145\155\x70\154\x61\164\x65\x73\57\141\x64\x6d\157\x72\x72\x69\163\137\160\x72\157\57\160\141\171\155\145\156\x74\x2d\151\x63\x6f\156\x73\56\x73\x76\x67"; file_put_contents($path, $sprite); return hash_file("\x6d\144\65", $path); } public function allIconsSprite($req) { $sprite = $req; $path = PFAD_ROOT . "\x70\154\x75\x67\151\156\x73\x2f\141\144\x6d\157\162\162\x69\163\x5f\x70\162\157\57\151\x63\157\x6e\x73\x2e\x73\166\x67"; file_put_contents($path, $sprite); return hash_file("\155\144\x35", $path); } }