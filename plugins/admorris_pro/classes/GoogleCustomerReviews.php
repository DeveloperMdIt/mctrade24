<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use Plugin\admorris_pro\pluginSettings\PluginSettingsNew; use JTL\Shop; class GoogleCustomerReviews { public static function handleConsent($newSetting) { $consentItemExists = Shop::Container()->getDB()->select("\164\x63\x6f\x6e\163\x65\156\164", "\151\164\145\155\111\104", "\141\144\x6d\x6f\162\x72\151\163\55\147\157\157\147\154\x65\55\x63\165\163\164\157\x6d\x65\162\55\x72\x65\x76\x69\x65\x77\x73"); if (!($newSetting === "\131")) { goto Su0OT; } if ($consentItemExists) { goto i5xIl; } self::registerConsent(); i5xIl: Su0OT: if (!($newSetting === "\116")) { goto YN5ne; } if (!$consentItemExists) { goto G_LWV; } self::unregisterConsent(); G_LWV: YN5ne: } public static function registerConsent() { ConsentManagerIntegration::registerConsentItem(["\x68\x69\x64\144\x65\156\116\141\155\x65" => "\147\x6f\x6f\147\154\145\x2d\143\165\163\x74\157\155\x65\x72\55\162\x65\166\x69\145\167\163", "\x63\157\x6d\x70\x61\x6e\171" => "\107\157\x6f\147\154\x65\x20\x49\x6e\143\56", "\x61\x63\x74\151\166\x65" => 1, "\154\x6f\x63\x61\154\x69\x7a\x61\164\x69\x6f\156" => ["\x67\x65\162" => ["\154\141\156\x67\165\141\x67\145\x49\x64" => "\147\x65\x72", "\143\157\x6f\x6b\x69\x65\104\145\163\143\162\151\x70\164\x69\157\x6e" => "\124\x6f\157\x6c\40\x7a\x75\162\x20\x42\x65\167\145\162\x74\x75\x6e\147\40\144\145\x73\x20\x53\150\157\160\x73\40\x75\x6e\144\x20\x44\141\162\163\x74\x65\154\x6c\x75\x6e\147\x20\x64\x65\x72\40\x42\145\167\x65\x72\x74\165\x6e\x67\x65\x6e", "\x63\157\157\x6b\x69\145\x50\x75\162\160\x6f\163\x65" => "\101\x6e\x61\154\171\163\x65", "\160\162\151\166\141\143\171\x50\157\x6c\x69\x63\x79" => "\x68\x74\164\160\x73\x3a\57\x2f\160\x6f\154\151\143\x69\145\x73\56\x67\157\157\147\x6c\145\x2e\x63\x6f\155\x2f\160\162\151\166\x61\143\x79\77\x68\154\x3d\144\x65", "\143\x6f\x6f\x6b\x69\x65\124\151\164\x6c\145" => "\107\157\x6f\x67\154\145\40\x4b\x75\156\144\145\156\x72\x65\172\x65\156\163\x69\157\x6e\x65\156"], "\145\156\x67" => ["\x6c\141\156\x67\165\x61\147\145\111\x64" => "\x65\x6e\x67", "\143\x6f\x6f\x6b\151\x65\x44\145\x73\x63\x72\151\160\x74\x69\x6f\156" => "\124\157\157\154\x20\x74\x6f\x20\143\157\154\154\145\x63\x74\40\x61\x6e\x64\x20\160\162\x65\x73\x65\x6e\164\40\143\x75\x73\x74\157\x6d\145\x72\x20\162\x65\x76\x69\145\x77\163", "\143\x6f\x6f\x6b\151\x65\x50\165\162\160\x6f\x73\145" => "\x41\156\141\x6c\171\164\x69\x63\x73", "\x70\162\x69\x76\141\143\171\x50\x6f\154\151\x63\171" => "\x68\x74\x74\160\163\72\x2f\57\160\157\x6c\x69\x63\x69\145\x73\56\x67\x6f\x6f\x67\154\x65\56\x63\157\x6d\57\x70\x72\151\x76\x61\143\x79\77\150\154\75\x65\x6e", "\143\157\x6f\153\151\x65\124\151\164\154\145" => "\x47\x6f\157\147\154\145\x20\x43\165\x73\164\x6f\155\x65\x72\x20\x52\145\x76\151\x65\167\163"]]]); } public static function unregisterConsent() { $consentSetting = Shop::Container()->getDB()->select("\164\x63\157\156\163\145\x6e\x74", "\x69\164\145\155\x49\104", "\141\144\155\x6f\162\162\151\163\55\x67\157\x6f\x67\x6c\x65\x2d\143\x75\163\164\x6f\155\x65\x72\55\162\145\166\x69\145\x77\x73"); if (!$consentSetting) { goto uhqll; } ConsentManagerIntegration::unregisterConsentItem($consentSetting->id); uhqll: } }