<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Shop; class NoShippingDays { public static function load($pluginSettings) { $noShippingDays = Shop::Container()->getDB()->query("\123\105\x4c\x45\103\x54\40\52\x20\x46\x52\117\x4d\x20\x78\160\154\165\147\151\156\137\x61\x64\155\x6f\162\162\151\x73\x5f\160\162\157\137\x6d\141\x72\x6b\145\x74\x69\x6e\147\x5f\x73\x68\x69\160\x70\151\x6e\x67\137\143\157\x75\x6e\164\x64\157\x77\156\x5f\x6e\157\137\163\x68\x69\160\160\x69\156\x67", 2); $noShippingDays_arr = array_reduce($noShippingDays, function ($carry, $item) { array_push($carry, $item->noShippingDate); return $carry; }, array()); $pluginSettings["\155\x61\x72\153\x65\x74\x69\x6e\x67\137\163\x68\x69\x70\x70\151\156\x67\x5f\x63\157\x75\156\164\x64\x6f\x77\x6e\137\156\x6f\x5f\163\x68\151\x70\x70\x69\x6e\147"] = $noShippingDays_arr; return $pluginSettings; } public static function save($pluginSettings) { $noShippingDays = $pluginSettings["\x6d\141\162\x6b\x65\x74\x69\x6e\147\x5f\x73\x68\x69\160\x70\151\x6e\x67\137\143\x6f\x75\x6e\x74\x64\x6f\x77\156\137\156\157\137\163\150\151\x70\160\151\156\x67"]; unset($pluginSettings["\155\141\162\x6b\x65\x74\x69\x6e\147\137\163\x68\151\x70\160\x69\x6e\x67\x5f\143\x6f\165\x6e\x74\144\157\x77\x6e\137\x6e\157\137\x73\150\x69\x70\x70\151\156\x67"]); $del = Shop::Container()->getDB()->query("\104\x45\x4c\x45\124\105\40\106\122\117\x4d\40\170\x70\154\165\x67\151\x6e\137\141\144\x6d\157\162\162\151\163\137\x70\162\x6f\137\x6d\141\x72\x6b\145\x74\151\x6e\147\137\x73\150\x69\x70\x70\x69\x6e\147\x5f\143\x6f\165\156\x74\144\157\167\x6e\x5f\x6e\x6f\x5f\163\x68\x69\160\160\151\x6e\x67", 3); $noShippingDays = array_reduce($noShippingDays, function ($carry, $item) { $obj = new \stdClass(); $obj->noShippingDate = $item; array_push($carry, $obj); return $carry; }, []); foreach ($noShippingDays as $value) { $kKey = Shop::Container()->getDB()->insert("\170\160\154\165\x67\151\x6e\137\x61\144\155\157\162\162\151\x73\137\160\162\x6f\x5f\x6d\141\x72\153\x65\164\x69\156\x67\x5f\163\150\x69\x70\160\x69\156\x67\x5f\x63\157\165\x6e\164\144\x6f\167\156\137\x6e\157\137\x73\150\x69\160\x70\151\x6e\147", $value); if (!($kKey < 0)) { goto pD6u0; } throw new \Exception("\x46\145\x68\x6c\x65\x72\40\142\x65\x69\x6d\40\163\x70\x65\x69\x63\x68\145\x72\156\x20\x64\145\x72\40\116\157\x53\x68\151\160\160\x69\x6e\x67\x44\141\171\x73"); pD6u0: imh9z: } pPj7M: return $pluginSettings; } }