<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Shop; class BlogSettings { public $currentBannerType = false; public $currentBannerImage; public $category; public $view; private $init = false; public $allCatBannerImage; public $bannerParallax; public $bannerTypeDetails; public $bannerTypeOverview; public $containerWidthDetails; public $containerWidthOverview; public $layoutType; public $bannerOverlayDetails; public $bannerOverlayOverview; function __construct() { $settings = Shop::get("\x61\144\x6d\x6f\162\x72\151\x73\120\x72\157\x2d\x73\145\x74\164\x69\x6e\x67\x73"); if (!empty($settings)) { goto ulqVM; } return; ulqVM: $this->allCatBannerImage = $settings["\142\x6c\x6f\147\137\142\x61\156\x6e\145\x72\137\x69\155\141\x67\x65"]; $this->bannerParallax = $settings["\142\154\157\147\x5f\x62\141\x6e\156\x65\162\137\160\x61\x72\141\x6c\154\141\x78"]; $this->bannerTypeDetails = $settings["\x62\x6c\x6f\x67\137\x62\x61\156\x6e\145\x72\137\x74\x79\x70\x65\x5f\x64\145\164\x61\x69\154\x73"]; $this->bannerTypeOverview = $settings["\142\154\157\147\x5f\142\141\156\x6e\145\162\x5f\x74\171\x70\x65\137\x6f\x76\x65\162\166\x69\x65\x77"]; $this->containerWidthDetails = $settings["\142\154\x6f\x67\x5f\143\x6f\156\x74\141\151\x6e\145\162\137\167\151\x64\164\150\x5f\144\x65\164\x61\x69\154\x73"]; $this->containerWidthOverview = $settings["\x62\154\x6f\x67\x5f\143\157\x6e\x74\141\x69\x6e\x65\x72\x5f\167\x69\x64\164\150\x5f\157\x76\145\162\166\151\145\167"]; $this->layoutType = $settings["\x62\x6c\x6f\x67\x5f\x6c\x61\x79\x6f\x75\x74\137\x74\x79\x70\145"]; $this->bannerOverlayDetails = $settings["\142\x6c\157\147\137\142\x61\x6e\156\x65\162\x5f\157\166\x65\x72\x6c\141\x79\x5f\144\145\x74\x61\x69\x6c\x73"]; $this->bannerOverlayOverview = $settings["\142\154\157\147\137\x62\x61\x6e\x6e\x65\162\137\x6f\166\x65\x72\x6c\141\171\137\x6f\166\x65\162\x76\x69\145\167"]; } public function initBanner($return = false) { goto F8csX; Shwuo: $uploadDir = PFAD_ROOT . \PFAD_NEWSBILDER; $images = $details->getNewsImages($uploadDir); $bannerImage = array_filter($images, function ($image) { return strpos($image->cName, "\142\x61\x6e\156\x65\x72") !== false; }); if (!empty($bannerImage)) { goto xYLgZ; } $bannerImage = array_filter($images, function ($image) { return strpos($image->cName, "\x5f\160\x72\145\x76\151\145\x77") === false; }); xYLgZ: if (!empty($bannerImage)) { goto BhVOJ; } $this->currentBannerType = false; goto pfg54; BhVOJ: goto x3Mra; jpWeI: Aazda: goto EV9KW; YJDgQ: FDLyO: $this->currentBannerImage = $this->allCatBannerImage; $this->currentBannerType = "\x61\154\x6c\x5f\143\141\x74\145\147\157\162\151\x65\163\x5f\x62\141\x6e\x6e\x65\x72"; ajdGo: Xa1DO: goto w8crQ; y7pjs: $this->view = "\x64\x65\164\141\x69\154\163"; if (!($this->bannerTypeDetails !== "\144\145\146\141\x75\154\x74")) { goto BvUqh; } $details = Shop::Smarty()->getTemplateVars("\157\116\x65\x77\x73\x41\x72\143\150\151\x76"); goto Shwuo; F8csX: if ($this->init) { goto XCihY; } $step = Shop::getPageType(); if (!in_array($step, [PAGE_NEWS, PAGE_NEWSMONAT, PAGE_NEWSDETAIL, PAGE_NEWSKATEGORIE])) { goto xtX5k; } $this->initCategory(); if ($step === PAGE_NEWS) { goto xAWgW; } if ($step === PAGE_NEWSDETAIL) { goto y7pjs; } goto w8crQ; xAWgW: $this->view = "\157\166\x65\162\x76\x69\x65\167"; if ($this->bannerTypeOverview !== "\144\x65\146\141\165\154\164") { goto CAVk3; } goto NArp_; x3Mra: $this->currentBannerImage = reset($bannerImage)->cURL; $this->currentBannerType = "\x64\145\164\x61\x69\x6c\163\137\x62\x61\156\156\145\x72"; pfg54: BvUqh: w8crQ: xtX5k: $this->init = true; XCihY: if (!$return) { goto Aazda; } return $this->currentBannerType; goto jpWeI; NArp_: $this->currentBannerType = false; goto Xa1DO; CAVk3: if ($this->category && $this->category->cPreviewImage) { goto Xmcdk; } if (!$this->category && $this->allCatBannerImage) { goto FDLyO; } goto ajdGo; Xmcdk: $this->currentBannerImage = $this->category->cPreviewImage; $this->currentBannerType = "\143\x61\x74\x65\147\157\x72\171\x5f\x62\x61\156\x6e\145\162"; goto ajdGo; goto YJDgQ; EV9KW: } public function initCategory() { $kat = Shop::Smarty()->getTemplateVars("\156\x4e\x65\x77\x73\113\141\164"); if ($kat && $kat != -1) { goto V9WEN; } $this->category = false; goto nncKs; V9WEN: $kat_arr = Shop::Smarty()->getTemplateVars("\x6f\x4e\145\x77\x73\x4b\x61\164\145\x67\157\162\151\145\x5f\x61\162\162"); foreach ($kat_arr as $key => $value) { if (!($value->kNewsKategorie == $kat)) { goto bdhMZ; } $this->category = $value; bdhMZ: Oq98Z: } Ogq4h: nncKs: } public function getHeaderOverlay($admorris_pro_templateSettings) { if (!(Shop::getPageType() === PAGE_NEWS)) { goto nGhnr; } if ($this->view === "\x6f\x76\145\162\166\151\x65\x77") { goto iJiDI; } return $this->bannerOverlayDetails && $this->currentBannerImage && $admorris_pro_templateSettings->header_overlay === "\131"; goto YsJyc; iJiDI: return $this->bannerOverlayOverview && $this->currentBannerImage && $admorris_pro_templateSettings->header_overlay === "\131"; YsJyc: nGhnr: } public function getBannerParallax() { if (!(Shop::getPageType() === PAGE_NEWS && $this->bannerParallax)) { goto mOufr; } return true; mOufr: } public function getBannerCssClasses($admorris_pro_templateSettings) { goto P95hj; ybKcn: PVth6: $classes .= "\40\160\141\162\x61\x6c\154\141\x78\55\x77\x69\156\x64\157\x77"; wcCVX: if ($this->view === "\x6f\x76\145\162\x76\151\x65\x77") { goto VGeCk; } $classes .= "\x20\142\154\157\x67\55\142\141\x6e\x6e\145\162\55\x2d\144\145\164\x61\x69\154\x73"; goto S3TAM; VGeCk: $classes .= "\40\142\x6c\x6f\x67\x2d\142\x61\x6e\156\145\x72\x2d\55\x6f\166\x65\x72\x76\151\x65\167"; S3TAM: d16tA: goto fh12Y; LALN9: goto KV2wt; Y5vVA: $classes .= "\x20\142\154\157\x67\55\142\141\x6e\x6e\x65\162\x2d\55\156\x61\162\x72\x6f\x77"; KV2wt: if (!$this->getHeaderOverlay($admorris_pro_templateSettings)) { goto CBkkv; } $classes .= "\40\142\154\x6f\x67\55\x62\x61\156\156\x65\162\55\55\x6f\x76\145\x72\x6c\141\171"; CBkkv: if ($this->bannerParallax) { goto PVth6; } $classes .= "\40\142\x61\143\153\x67\162\157\x75\x6e\144\55\143\x6f\166\x65\162"; goto wcCVX; goto ybKcn; fh12Y: return $classes; goto v98O0; zd4uK: if ($bannerType === "\x66\165\x6c\154\x73\x63\162\145\x65\x6e") { goto avzEk; } if ($bannerType === "\x6e\141\162\162\x6f\167") { goto Y5vVA; } goto KV2wt; avzEk: if ($this->getHeaderOverlay($admorris_pro_templateSettings)) { goto E1JS2; } $classes .= "\x20\x62\154\x6f\x67\x2d\x62\x61\156\156\x65\x72\55\55\x66\x75\x6c\x6c\163\143\162\x65\145\x6e"; goto j2ECJ; E1JS2: $classes .= "\40\x62\154\157\147\x2d\142\141\x6e\156\x65\162\x2d\x2d\x66\165\x6c\x6c\x73\x63\162\x65\145\156\x2d\x77\x69\x74\x68\x2d\157\x76\145\x72\x6c\141\x79"; j2ECJ: goto LALN9; P95hj: $classes = ''; if (!$this->currentBannerType) { goto d16tA; } if ($this->view === "\157\x76\x65\x72\166\x69\x65\x77") { goto XGW9F; } $bannerType = $this->bannerTypeDetails; $bannerOverlay = $this->bannerOverlayDetails; goto KlNcY; XGW9F: $bannerType = $this->bannerTypeOverview; $bannerOverlay = $this->bannerOverlayOverview; KlNcY: goto zd4uK; v98O0: } public function getBannerType() { if ($this->view === "\x6f\x76\145\x72\166\151\x65\167") { goto Xqzma; } return $this->bannerTypeDetails; goto bZWAr; Xqzma: return $this->bannerTypeOverview; bZWAr: } }