<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Shop; trait SettingsTrait { private array $mapSettings = ["\141\143\164\151\166\x65"]; private string $settingPrefix; public object $lang; private array $langVars; private array $_settings; public bool $active; private function setMapSettings(array $settings) : void { $this->mapSettings = [...$this->mapSettings, ...$settings]; } public function getSetting(string $property) { return array_key_exists("{$this->settingPrefix}\137{$property}", $this->_settings) ? $this->_settings["{$this->settingPrefix}\x5f{$property}"] : null; } private function initSettings() { $this->_settings = Shop::get("\141\x64\x6d\x6f\162\x72\151\x73\x50\162\157\55\x73\145\164\x74\x69\156\147\163"); foreach ($this->mapSettings as $value) { $this->{$value} = $this->getSetting($value); F5pSN: } T2Dvz: $langVars = ["\x70\162\145\146\151\x78\145\144\x5f\164\145\170\x74", "\160\157\x73\164\146\x69\170\x65\144\137\164\x65\x78\x74", "\x6f\x6c\144\137\x70\x72\151\143\145", "\x75\166\x70"]; $this->lang = new \stdClass(); foreach ($langVars as $value) { $this->lang->{$value} = $this->plugin->getLocalization()->getTranslation("\141\x64\155\x6f\162\162\x69\x73\137\x70\x72\157\x5f\x6d\x61\x72\x6b\x65\x74\x69\156\x67\x5f\x64\151\x73\x63\157\165\156\x74\137\x64\151\x73\x70\x6c\x61\171\137{$value}"); k6Kla: } PAS43: } private function getExpertSettingValue(string $property) : ?string { $prefix = str_replace("\155\141\162\x6b\145\164\151\156\x67\137", '', $this->settingPrefix); $settingKey = "\x61\x64\155\x6f\x72\x72\151\163\137\x70\x72\157\x5f\145\x78\x70\x65\x72\x74\137\163\x65\x74\164\x69\x6e\147\x73\x5f{$prefix}\x5f{$property}"; return $this->plugin->getConfig()->getValue($settingKey); } private function getCssSelectorSetting(string $property) : array { $selector = $this->getExpertSettingValue("{$property}\137\x63\163\x73\137\163\x65\154\x65\x63\164\x6f\x72"); $type = $this->getExpertSettingValue("{$property}\x5f\x63\x73\163\x5f\x73\145\154\145\143\164\157\162\137\x74\x79\160\x65"); return [$selector, $type]; } private function executePhpQuery(string $content, string $selector, string $method) { $pq = \pq($selector); if (method_exists($pq, $method)) { goto ezzrs; } throw new \Exception("\x4d\145\x74\x68\157\x64\40{$method}\x20\x64\x6f\145\x73\40\156\x6f\x74\x20\x65\170\x69\163\x74\x20\151\156\40\160\x68\x70\121\165\145\x72\x79\x2e"); goto irg3H; ezzrs: $pq->{$method}($content); irg3H: } private function cssSelector(string $property, string $content) : void { $this->executePhpQuery($content, ...$this->getCssSelectorSetting($property)); } }