<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Shop; class SalesBoosterIcons { private static $salesBooster = ["\162\145\x63\145\x6e\164\x53\141\154\x65\163", "\162\x65\143\x65\156\164\126\x69\x73\151\164\163"]; private static $fields = ["\155\x61\162\153\145\x74\151\156\147\x5f\x72\x65\143\145\x6e\164\x5f\163\x61\154\x65\x73\x5f\x69\143\x6f\x6e", "\x6d\x61\162\x6b\145\x74\x69\156\147\137\x72\x65\143\x65\x6e\164\137\x76\x69\x73\x69\x74\163\x5f\x69\x63\157\x6e"]; public static function load($pluginSettings) { $settings = []; foreach (self::$salesBooster as $booster) { $query = "\123\x45\x4c\105\x43\x54\x20\170\160\154\x75\x67\151\x6e\x5f\141\144\155\157\162\162\151\x73\x5f\x70\x72\x6f\137\151\143\x6f\156\163\x5f\x75\x73\145\144\56\x69\x64\x2c\xa\40\x20\40\40\40\x20\x78\160\154\x75\x67\x69\156\137\141\x64\155\157\x72\162\x69\163\137\160\x72\157\x5f\151\143\157\x6e\163\56\143\x61\x74\x65\147\x6f\162\x79\x2c\xa\40\x20\x20\40\40\40\170\x70\154\x75\147\151\x6e\137\141\144\x6d\157\x72\162\151\x73\x5f\x70\162\x6f\137\151\143\x6f\156\163\x2e\x69\143\157\x6e\x49\x64\x2c\xa\40\x20\x20\x20\40\40\170\x70\154\x75\147\151\x6e\x5f\x61\x64\x6d\x6f\x72\162\x69\163\137\160\x72\x6f\x5f\x69\x63\x6f\x6e\x73\137\x75\x73\145\x64\x2e\151\x63\157\156\124\x79\160\145\54\12\40\x20\x20\40\x20\40\170\160\154\x75\147\151\x6e\x5f\141\x64\x6d\x6f\x72\162\151\163\137\x70\162\157\137\x69\x63\157\x6e\x73\x2e\x70\141\164\x68\x4f\x72\x53\166\x67\x2c\12\x20\x20\40\x20\40\x20\170\x70\x6c\165\147\151\156\x5f\141\144\155\157\x72\162\151\163\137\x70\162\x6f\137\151\x63\157\x6e\163\56\x69\143\157\x6e\x46\x61\155\x69\x6c\171\x2c\xa\40\40\x20\x20\40\x20\x78\160\154\165\147\x69\156\x5f\141\x64\x6d\x6f\x72\x72\x69\163\x5f\x70\x72\x6f\137\151\143\x6f\x6e\163\x5f\x75\163\x65\144\56\x73\x69\172\145\x4d\165\154\x74\x69\x70\154\151\145\162\12\x20\x20\x20\x20\x20\40\x46\x52\117\115\x20\x78\160\x6c\x75\147\x69\156\x5f\x61\x64\x6d\157\162\162\x69\x73\x5f\160\x72\157\x5f\151\x63\157\x6e\163\137\x75\x73\145\x64\40\x4c\105\x46\124\40\112\117\x49\116\x20\170\160\x6c\x75\x67\151\156\137\x61\144\x6d\x6f\x72\162\151\x73\x5f\x70\x72\157\137\151\x63\157\x6e\x73\40\117\116\40\170\160\154\165\147\151\156\137\141\144\155\x6f\162\162\x69\163\x5f\160\x72\x6f\x5f\x69\x63\157\x6e\x73\137\165\x73\145\144\x2e\111\x63\157\156\x49\144\40\75\x20\x78\160\154\165\x67\151\156\x5f\141\x64\155\157\162\162\x69\x73\x5f\160\162\157\x5f\151\x63\157\156\x73\56\151\x63\x6f\x6e\x49\x64\xa\x20\40\x20\x20\40\x20\x57\x48\x45\x52\x45\x20\x78\160\154\165\x67\x69\156\x5f\x61\144\155\157\162\162\x69\x73\137\160\x72\x6f\137\151\143\x6f\156\163\x5f\x75\x73\145\144\56\151\143\157\156\x54\x79\160\145\x20\75\x20\72\x69\x63\x6f\156\x54\x79\x70\145"; $data = Shop::Container()->getDB()->queryPrepared($query, ["\151\143\157\x6e\124\171\x70\x65" => $booster], 1); array_push($settings, $data); Cc84u: } IjlOe: $pluginSettings["\155\x61\x72\x6b\145\x74\151\156\x67\137\162\x65\x63\145\156\164\137\x73\x61\x6c\x65\163\137\x69\143\157\156"] = $settings[0]; $pluginSettings["\x6d\x61\162\153\145\164\151\x6e\x67\137\162\x65\x63\145\x6e\x74\137\x76\151\x73\151\164\163\137\x69\x63\157\x6e"] = $settings[1]; return $pluginSettings; } public static function save($pluginSettings) { $salesBoosterIcons = new \stdClass(); $salesBoosterIcons->recent_sales = (object) $pluginSettings["\x6d\x61\162\153\145\x74\151\156\147\137\162\x65\143\x65\x6e\164\x5f\163\x61\154\x65\163\x5f\x69\143\157\156"]; $salesBoosterIcons->recent_visits = (object) $pluginSettings["\155\x61\x72\x6b\x65\x74\151\156\147\137\x72\x65\143\x65\156\x74\x5f\x76\151\x73\151\164\163\x5f\151\x63\x6f\156"]; unset($pluginSettings["\155\x61\x72\153\145\x74\151\x6e\147\x5f\x72\x65\143\145\x6e\164\137\163\x61\154\x65\163\137\x69\143\x6f\156"]); unset($pluginSettings["\155\141\162\x6b\x65\164\151\x6e\x67\x5f\x72\145\143\145\x6e\164\x5f\166\x69\163\151\x74\x73\137\x69\143\x6f\156"]); foreach ($salesBoosterIcons as $icon) { $iconObj = new \stdClass(); $iconObj->id = $icon->id; $iconObj->iconType = $icon->iconType; $iconObj->iconId = $icon->iconId; $iconObj->iconFamily = $icon->iconFamily; $req = Shop::Container()->getDB()->update("\170\160\154\165\x67\151\156\137\141\144\x6d\157\162\x72\x69\163\137\160\162\157\137\151\143\x6f\x6e\x73\x5f\165\x73\x65\144", "\x69\144", (int) $iconObj->id, $iconObj); if (!($req < 0)) { goto kHHBE; } throw new \Exception("\106\145\150\x6c\145\x72\40\142\x65\x69\x6d\x20\x73\x70\x65\x69\x63\150\145\162\156\40\x64\145\x72\40\123\x61\x6c\x65\x73\55\x42\x6f\157\163\164\x65\162\55\x49\x63\x6f\x6e\163"); kHHBE: o5SRg: } z0O0d: return $pluginSettings; } }