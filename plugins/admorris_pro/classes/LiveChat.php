<?php
/*   __________________________________________________
    |  Copyright by admorris.pro  |
    |__________________________________________________|
*/
 namespace Plugin\admorris_pro; use JTL\Shop; class LiveChat { public static function handleConsent($newLiveChatSetting) { $consentItemExists = Shop::Container()->getDB()->select("\x74\143\x6f\x6e\163\145\156\x74", "\151\x74\145\x6d\111\104", "\x61\x64\x6d\x6f\x72\162\x69\x73\x2d\x6c\x69\166\145\143\150\141\x74"); if (!($newLiveChatSetting === "\131")) { goto Lxeba; } if ($consentItemExists) { goto ERSq9; } self::registerConsent(); ERSq9: Lxeba: if (!($newLiveChatSetting === "\116")) { goto kld2K; } if (!$consentItemExists) { goto ANNz0; } self::unregisterConsent(); ANNz0: kld2K: } public static function registerConsent() { ConsentManagerIntegration::registerConsentItem(["\x68\151\x64\144\x65\156\116\x61\155\x65" => "\154\151\166\145\143\x68\141\x74", "\x63\x6f\x6d\x70\141\156\171" => "\x74\141\167\x6b\56\x74\x6f\40\151\x6e\143\56", "\x61\143\164\x69\x76\x65" => 1, "\154\x6f\x63\x61\154\x69\172\141\x74\x69\x6f\156" => ["\147\145\162" => ["\x6c\141\156\147\165\141\147\145\x49\144" => "\x67\x65\x72", "\143\157\157\x6b\151\x65\104\145\163\x63\x72\151\x70\x74\151\x6f\x6e" => "\x4c\151\166\145\x63\150\x61\x74\163\157\146\164\167\x61\162\145\40\x7a\165\162\40\113\157\x6d\155\165\156\151\x6b\141\164\x69\157\156\x20\x6d\x69\x74\40\x75\x6e\163\x65\162\145\x6e\40\113\165\156\144\x65\x6e", "\143\x6f\157\x6b\151\x65\x50\165\162\x70\157\x73\145" => "\113\x6f\x6d\155\165\156\x69\153\141\164\x69\x6f\156", "\x70\x72\151\x76\141\143\x79\120\x6f\154\151\143\x79" => "\x68\164\164\x70\163\x3a\57\57\167\167\x77\x2e\164\x61\x77\153\56\164\157\x2f\x70\x72\151\x76\x61\143\x79\x2d\160\157\x6c\x69\x63\171\x2f", "\x63\157\157\153\151\x65\124\151\x74\x6c\145" => "\x54\x61\x77\x6b\x20\x4c\x69\166\x65\x63\150\141\164"], "\x65\x6e\x67" => ["\154\x61\156\x67\165\x61\147\145\111\144" => "\x65\x6e\147", "\143\157\157\x6b\x69\x65\x44\145\163\x63\162\x69\160\x74\151\157\x6e" => "\x4c\151\166\145\x63\150\141\x74\40\x73\x6f\x66\164\x77\x61\162\x65\x20\146\157\x72\40\x63\x6f\x6d\x6d\x75\156\151\143\141\x74\x69\x6f\x6e\40\x77\151\x74\150\40\157\x75\162\40\143\x75\163\164\157\155\145\x72\163", "\143\157\x6f\153\151\145\x50\x75\162\x70\x6f\163\x65" => "\x43\157\x6d\155\x75\156\151\143\141\x74\151\x6f\x6e", "\160\162\x69\x76\141\143\x79\x50\x6f\154\x69\x63\x79" => "\150\164\x74\160\163\x3a\57\x2f\167\167\167\56\x74\141\167\x6b\56\164\x6f\57\x70\x72\x69\166\141\x63\171\x2d\x70\x6f\x6c\151\x63\171\x2f", "\x63\x6f\x6f\x6b\x69\x65\124\x69\x74\154\x65" => "\x54\x61\x77\x6b\40\x4c\x69\166\x65\143\150\x61\164"]]]); } public static function unregisterConsent() { $consentSetting = Shop::Container()->getDB()->select("\x74\143\157\156\163\145\x6e\x74", "\x69\x74\145\x6d\111\104", "\x61\x64\155\x6f\162\162\x69\163\x2d\154\x69\166\x65\x63\x68\x61\x74"); if (!$consentSetting) { goto WR2Db; } ConsentManagerIntegration::unregisterConsentItem($consentSetting->id); WR2Db: } }